<h1>ESP API</h1>
<a name="Extensions"></a><h2>Extensions</h2>
  <table class="apiIndex" title="Extensions">
<tr class="apiDef">
<td class="apiName"><a href="#group___esp_parse" class="nameRef">EspParse</a></td>
<td class="apiBrief">ESP page parser structure.</td></tr>
<tr class="apiDef">
<td class="apiName"><a href="#group___esp_req" class="nameRef">EspReq</a></td>
<td class="apiBrief">ESP request structure.</td></tr>
<tr class="apiDef">
<td class="apiName"><a href="#group___esp_route" class="nameRef">EspRoute</a></td>
<td class="apiBrief">EspRoute extended route configuration.</td></tr>
</table>
<a name="Functions"></a><h2>Functions</h2>
  <table class="apiIndex" title="Functions">
<tr class="apiDef"><td class="apiType">void</td><td><a href="#group___esp_route_1gaf0597c922fe4a863f84e40f93d3d5ee4" class="nameRef">espAction</a>(<a href="http.html#group___http_route" class="ref">HttpRoute</a> *route, <a href="osdep.html#group___osdep_1ga0f128c3e0c83721af0220c00554e9c4e" class="ref">cchar</a> *targetKey, <a href="osdep.html#group___osdep_1ga0f128c3e0c83721af0220c00554e9c4e" class="ref">cchar</a> *abilities, <a href="#esp_8h_1a3be68c9acb3ee13fce7b42a600b1ffdd" class="ref">EspProc</a> actionProc)</td></tr><tr class="apiBrief"><td>&nbsp;</td><td>Define an action.</td></tr>
<tr class="apiDef"><td class="apiType">void</td><td><a href="#group___esp_req_1ga4f8a144e4388122909991a0402b92550" class="nameRef">espAddHeader</a>(<a href="http.html#group___http_stream" class="ref">HttpStream</a> *stream, <a href="osdep.html#group___osdep_1ga0f128c3e0c83721af0220c00554e9c4e" class="ref">cchar</a> *key, <a href="osdep.html#group___osdep_1ga0f128c3e0c83721af0220c00554e9c4e" class="ref">cchar</a> *fmt, ...)</td></tr><tr class="apiBrief"><td>&nbsp;</td><td>Add a header to the transmission using a format string.</td></tr>
<tr class="apiDef"><td class="apiType">void</td><td><a href="#group___esp_req_1ga98fdeb62e229b97f5fe8049298d5c7fc" class="nameRef">espAddHeaderString</a>(<a href="http.html#group___http_stream" class="ref">HttpStream</a> *stream, <a href="osdep.html#group___osdep_1ga0f128c3e0c83721af0220c00554e9c4e" class="ref">cchar</a> *key, <a href="osdep.html#group___osdep_1ga0f128c3e0c83721af0220c00554e9c4e" class="ref">cchar</a> *value)</td></tr><tr class="apiBrief"><td>&nbsp;</td><td>Add a header to the transmission.</td></tr>
<tr class="apiDef"><td class="apiType">void</td><td><a href="#group___esp_route_1gaa6e0943224a139d93f465b7ff2060c36" class="nameRef">espAddHomeRoute</a>(<a href="http.html#group___http_route" class="ref">HttpRoute</a> *route)</td></tr><tr class="apiBrief"><td>&nbsp;</td><td>Add a route for the home page.</td></tr>
<tr class="apiDef"><td class="apiType">void</td><td><a href="#group___esp_req_1ga3824ffbe5db5e46d872aeb0adfdbaf65" class="nameRef">espAddParam</a>(<a href="http.html#group___http_stream" class="ref">HttpStream</a> *stream, <a href="osdep.html#group___osdep_1ga0f128c3e0c83721af0220c00554e9c4e" class="ref">cchar</a> *var, <a href="osdep.html#group___osdep_1ga0f128c3e0c83721af0220c00554e9c4e" class="ref">cchar</a> *value)</td></tr><tr class="apiBrief"><td>&nbsp;</td><td>Add a request parameter value if it is not already defined.</td></tr>
<tr class="apiDef"><td class="apiType">void</td><td><a href="#group___esp_route_1gab12f7c6108ac1d0a972fc837e9b9dec8" class="nameRef">espAddRouteSet</a>(<a href="http.html#group___http_route" class="ref">HttpRoute</a> *route, <a href="osdep.html#group___osdep_1ga0f128c3e0c83721af0220c00554e9c4e" class="ref">cchar</a> *set)</td></tr><tr class="apiBrief"><td>&nbsp;</td><td>Add a route set.</td></tr>
<tr class="apiDef"><td class="apiType">void</td><td><a href="#group___esp_req_1ga3a999dbd5209ab0507ec697bb452eba9" class="nameRef">espAppendHeader</a>(<a href="http.html#group___http_stream" class="ref">HttpStream</a> *stream, <a href="osdep.html#group___osdep_1ga0f128c3e0c83721af0220c00554e9c4e" class="ref">cchar</a> *key, <a href="osdep.html#group___osdep_1ga0f128c3e0c83721af0220c00554e9c4e" class="ref">cchar</a> *fmt, ...)</td></tr><tr class="apiBrief"><td>&nbsp;</td><td>Append a transmission header.</td></tr>
<tr class="apiDef"><td class="apiType">void</td><td><a href="#group___esp_req_1gadc294b278fde028e375f3a43e8da4ffc" class="nameRef">espAppendHeaderString</a>(<a href="http.html#group___http_stream" class="ref">HttpStream</a> *stream, <a href="osdep.html#group___osdep_1ga0f128c3e0c83721af0220c00554e9c4e" class="ref">cchar</a> *key, <a href="osdep.html#group___osdep_1ga0f128c3e0c83721af0220c00554e9c4e" class="ref">cchar</a> *value)</td></tr><tr class="apiBrief"><td>&nbsp;</td><td>Append a transmission header string.</td></tr>
<tr class="apiDef"><td class="apiType">void</td><td><a href="#group___esp_req_1ga343d565150be797bbcfbf67a3ef98bb5" class="nameRef">espAutoFinalize</a>(<a href="http.html#group___http_stream" class="ref">HttpStream</a> *stream)</td></tr><tr class="apiBrief"><td>&nbsp;</td><td>Auto-finalize transmission of the http request.</td></tr>
<tr class="apiDef"><td class="apiType">int</td><td><a href="#group___esp_route_1ga0d812aed0ff96f0ffa281860270e8910" class="nameRef">espBindProc</a>(<a href="http.html#group___http_route" class="ref">HttpRoute</a> *route, <a href="osdep.html#group___osdep_1ga0f128c3e0c83721af0220c00554e9c4e" class="ref">cchar</a> *pattern, void *actionProc)</td></tr><tr class="apiBrief"><td>&nbsp;</td><td>Define an action for a URI pattern.</td></tr>
<tr class="apiDef"><td class="apiType">char *</td><td><a href="#group___esp_route_1gadca72b20c0416a6e834105ae329e8529" class="nameRef">espBuildScript</a>(<a href="http.html#group___http_route" class="ref">HttpRoute</a> *route, <a href="osdep.html#group___osdep_1ga0f128c3e0c83721af0220c00554e9c4e" class="ref">cchar</a> *page, <a href="osdep.html#group___osdep_1ga0f128c3e0c83721af0220c00554e9c4e" class="ref">cchar</a> *path, <a href="osdep.html#group___osdep_1ga0f128c3e0c83721af0220c00554e9c4e" class="ref">cchar</a> *cacheName, <a href="osdep.html#group___osdep_1ga0f128c3e0c83721af0220c00554e9c4e" class="ref">cchar</a> *layout, <a href="#struct_esp_state" class="ref">EspState</a> *state, char **err)</td></tr><tr class="apiBrief"><td>&nbsp;</td><td>Convert an ESP web page into C code.</td></tr>
<tr class="apiDef"><td class="apiType">int</td><td><a href="#group___esp_route_1ga01d07d3db11f99c0d1b93b068ec56c67" class="nameRef">espCache</a>(<a href="http.html#group___http_route" class="ref">HttpRoute</a> *route, <a href="osdep.html#group___osdep_1ga0f128c3e0c83721af0220c00554e9c4e" class="ref">cchar</a> *uri, int lifesecs, int flags)</td></tr><tr class="apiBrief"><td>&nbsp;</td><td>Add caching for response content.</td></tr>
<tr class="apiDef"><td class="apiType">void</td><td><a href="#group___esp_req_1gadeac99cba2f4655c6ae0e8c108646e90" class="nameRef">espClearCurrentSession</a>(<a href="http.html#group___http_stream" class="ref">HttpStream</a> *stream)</td></tr><tr class="apiBrief"><td>&nbsp;</td><td>Clear the current authenticated session.</td></tr>
<tr class="apiDef"><td class="apiType"><a href="osdep.html#group___osdep_1gad5c9d4ba3dc37783a528b0925dc981a0" class="ref">bool</a></td><td><a href="#group___esp_route_1gaa6f62a5bb430f502b6067cac74d948e4" class="nameRef">espCompile</a>(<a href="http.html#group___http_route" class="ref">HttpRoute</a> *route, <a href="mpr.html#group___mpr_dispatcher" class="ref">MprDispatcher</a> *dispatcher, <a href="osdep.html#group___osdep_1ga0f128c3e0c83721af0220c00554e9c4e" class="ref">cchar</a> *source, <a href="osdep.html#group___osdep_1ga0f128c3e0c83721af0220c00554e9c4e" class="ref">cchar</a> *module, <a href="osdep.html#group___osdep_1ga0f128c3e0c83721af0220c00554e9c4e" class="ref">cchar</a> *cacheName, int isView, char **errMsg)</td></tr><tr class="apiBrief"><td>&nbsp;</td><td>Compile an ESP page, controller or view.</td></tr>
<tr class="apiDef"><td class="apiType">void</td><td><a href="#group___esp_route_1ga8e9d301b4d8ea03e194be4339ec9d361" class="nameRef">espController</a>(<a href="http.html#group___http_route" class="ref">HttpRoute</a> *route, <a href="#esp_8h_1a3be68c9acb3ee13fce7b42a600b1ffdd" class="ref">EspProc</a> baseProc)</td></tr><tr class="apiBrief"><td>&nbsp;</td><td>Define a common controller function to invoke before invoking for all controller actions.</td></tr>
<tr class="apiDef"><td class="apiType"><a href="#group___esp_route" class="ref">EspRoute</a> *</td><td><a href="#esp_8h_1ac8b1fec7b34093c10064dd4d16622fc2" class="nameRef">espCreateRoute</a>(<a href="http.html#group___http_route" class="ref">HttpRoute</a> *route)</td></tr><tr class="apiBrief"><td>&nbsp;</td><td>Create an EspRoute object.</td></tr>
<tr class="apiDef"><td class="apiType"><a href="osdep.html#group___osdep_1ga0f128c3e0c83721af0220c00554e9c4e" class="ref">cchar</a> *</td><td><a href="#group___esp_req_1ga57e9d8b8f378b9e142b0291221ff2b16" class="nameRef">espCreateSession</a>(<a href="http.html#group___http_stream" class="ref">HttpStream</a> *stream)</td></tr><tr class="apiBrief"><td>&nbsp;</td><td>Create a session state object.</td></tr>
<tr class="apiDef"><td class="apiType">void</td><td><a href="#group___esp_route_1ga619e3d85014d882f8330e47ee1f6ac24" class="nameRef">espDefineBase</a>(<a href="http.html#group___http_route" class="ref">HttpRoute</a> *route, <a href="#esp_8h_1adc749236ce9c01e8c3f43a4b779df700" class="ref">EspLegacyProc</a> baseProc),ME_DEPRECATED(&quot;Use,espDefineCommon,instead&quot;)</td></tr><tr class="apiBrief"><td>&nbsp;</td><td>Define a base controller function to invoke for all controller actions.</td></tr>
<tr class="apiDef"><td class="apiType">void</td><td><a href="#group___esp_route_1gab7ebccfe31eb1e07f3f40db700d18bd9" class="nameRef">espDefineView</a>(<a href="http.html#group___http_route" class="ref">HttpRoute</a> *route, <a href="osdep.html#group___osdep_1ga0f128c3e0c83721af0220c00554e9c4e" class="ref">cchar</a> *path, void *viewProc)</td></tr><tr class="apiBrief"><td>&nbsp;</td><td>Define a view.</td></tr>
<tr class="apiDef"><td class="apiType">void</td><td><a href="#group___esp_req_1ga49dfd97fc85a367ccf7d146454b52cbc" class="nameRef">espDestroySession</a>(<a href="http.html#group___http_stream" class="ref">HttpStream</a> *stream)</td></tr><tr class="apiBrief"><td>&nbsp;</td><td>Destroy a session state object.</td></tr>
<tr class="apiDef"><td class="apiType">int</td><td><a href="#esp_8h_1a0fafa076a86bf29ec11d07515817da3c" class="nameRef">espEmail</a>(<a href="http.html#group___http_stream" class="ref">HttpStream</a> *stream, <a href="osdep.html#group___osdep_1ga0f128c3e0c83721af0220c00554e9c4e" class="ref">cchar</a> *to, <a href="osdep.html#group___osdep_1ga0f128c3e0c83721af0220c00554e9c4e" class="ref">cchar</a> *from, <a href="osdep.html#group___osdep_1ga0f128c3e0c83721af0220c00554e9c4e" class="ref">cchar</a> *subject, <a href="mpr.html#group___mpr_time" class="ref">MprTime</a> date, <a href="osdep.html#group___osdep_1ga0f128c3e0c83721af0220c00554e9c4e" class="ref">cchar</a> *mime, <a href="osdep.html#group___osdep_1ga0f128c3e0c83721af0220c00554e9c4e" class="ref">cchar</a> *message, <a href="mpr.html#group___mpr_list" class="ref">MprList</a> *files)</td></tr><tr class="apiBrief"><td>&nbsp;</td><td>Send mail using sendmail.</td></tr>
<tr class="apiDef"><td class="apiType">char *</td><td><a href="#group___esp_route_1gac48430a671a2f13e5b6b1461e10584bd" class="nameRef">espExpandCommand</a>(<a href="http.html#group___http_route" class="ref">HttpRoute</a> *route, <a href="osdep.html#group___osdep_1ga0f128c3e0c83721af0220c00554e9c4e" class="ref">cchar</a> *command, <a href="osdep.html#group___osdep_1ga0f128c3e0c83721af0220c00554e9c4e" class="ref">cchar</a> *source, <a href="osdep.html#group___osdep_1ga0f128c3e0c83721af0220c00554e9c4e" class="ref">cchar</a> *module)</td></tr><tr class="apiBrief"><td>&nbsp;</td><td>Expand a compile or link command template.</td></tr>
<tr class="apiDef"><td class="apiType">void</td><td><a href="#group___esp_req_1gafa8c60c6ae199dd31fa92c4dbbaa7c2d" class="nameRef">espFinalize</a>(<a href="http.html#group___http_stream" class="ref">HttpStream</a> *stream)</td></tr><tr class="apiBrief"><td>&nbsp;</td><td>Indicate the request is finalized.</td></tr>
<tr class="apiDef"><td class="apiType">void</td><td><a href="#group___esp_req_1ga117d4806f7e97f74d2803065bb7f69f3" class="nameRef">espFlush</a>(<a href="http.html#group___http_stream" class="ref">HttpStream</a> *stream)</td></tr><tr class="apiBrief"><td>&nbsp;</td><td>Flush transmit data.</td></tr>
<tr class="apiDef"><td class="apiType"><a href="http.html#group___http_auth" class="ref">HttpAuth</a> *</td><td><a href="#group___esp_req_1gadae2ae5eea0f9ee61e16476257155600" class="nameRef">espGetAuth</a>(<a href="http.html#group___http_stream" class="ref">HttpStream</a> *stream)</td></tr><tr class="apiBrief"><td>&nbsp;</td><td>Get the current route HttpAuth object.</td></tr>
<tr class="apiDef"><td class="apiType"><a href="osdep.html#group___osdep_1ga0f128c3e0c83721af0220c00554e9c4e" class="ref">cchar</a> *</td><td><a href="#group___esp_route_1ga744ec95e55de1ea6717c0b843a950636" class="nameRef">espGetConfig</a>(<a href="http.html#group___http_route" class="ref">HttpRoute</a> *route, <a href="osdep.html#group___osdep_1ga0f128c3e0c83721af0220c00554e9c4e" class="ref">cchar</a> *key, <a href="osdep.html#group___osdep_1ga0f128c3e0c83721af0220c00554e9c4e" class="ref">cchar</a> *defaultValue)</td></tr><tr class="apiBrief"><td>&nbsp;</td><td>Get a configuration value from the ESP pak.json.</td></tr>
<tr class="apiDef"><td class="apiType"><a href="mpr.html#mpr_8h_1a87e9f435008723c7b1489af1944c6e20" class="ref">MprOff</a></td><td><a href="#group___esp_req_1ga8428a4283b20243796432100eba44e58" class="nameRef">espGetContentLength</a>(<a href="http.html#group___http_stream" class="ref">HttpStream</a> *stream)</td></tr><tr class="apiBrief"><td>&nbsp;</td><td>Get the receive body content length.</td></tr>
<tr class="apiDef"><td class="apiType"><a href="osdep.html#group___osdep_1ga0f128c3e0c83721af0220c00554e9c4e" class="ref">cchar</a> *</td><td><a href="#group___esp_req_1ga586861878e43266fa526ef44674a0b68" class="nameRef">espGetContentType</a>(<a href="http.html#group___http_stream" class="ref">HttpStream</a> *stream)</td></tr><tr class="apiBrief"><td>&nbsp;</td><td>Get the receive body content type.</td></tr>
<tr class="apiDef"><td class="apiType"><a href="osdep.html#group___osdep_1ga0f128c3e0c83721af0220c00554e9c4e" class="ref">cchar</a> *</td><td><a href="#group___esp_req_1ga16b8a88a0dfd2f5396ef0e49152b0312" class="nameRef">espGetCookie</a>(<a href="http.html#group___http_stream" class="ref">HttpStream</a> *stream, <a href="osdep.html#group___osdep_1ga0f128c3e0c83721af0220c00554e9c4e" class="ref">cchar</a> *name)</td></tr><tr class="apiBrief"><td>&nbsp;</td><td>Get a request cookie.</td></tr>
<tr class="apiDef"><td class="apiType"><a href="osdep.html#group___osdep_1ga0f128c3e0c83721af0220c00554e9c4e" class="ref">cchar</a> *</td><td><a href="#group___esp_req_1ga14eb020f49b227cee4ce01a6f44d8106" class="nameRef">espGetCookies</a>(<a href="http.html#group___http_stream" class="ref">HttpStream</a> *stream)</td></tr><tr class="apiBrief"><td>&nbsp;</td><td>Get the request cookies.</td></tr>
<tr class="apiDef"><td class="apiType">void *</td><td><a href="#group___esp_req_1ga5865e351cceb4f52ea71424946c893bc" class="nameRef">espGetData</a>(<a href="http.html#group___http_stream" class="ref">HttpStream</a> *stream)</td></tr><tr class="apiBrief"><td>&nbsp;</td><td>Get the private data reference for the current request set via setData.</td></tr>
<tr class="apiDef"><td class="apiType"><a href="edi.html#group___edi" class="ref">Edi</a> *</td><td><a href="#group___esp_req_1ga8da27be8120b260cf9128c06e928c4ba" class="nameRef">espGetDatabase</a>(<a href="http.html#group___http_stream" class="ref">HttpStream</a> *stream)</td></tr><tr class="apiBrief"><td>&nbsp;</td><td>Get the current database instance.</td></tr>
<tr class="apiDef"><td class="apiType"><a href="osdep.html#group___osdep_1ga0f128c3e0c83721af0220c00554e9c4e" class="ref">cchar</a> *</td><td><a href="#group___esp_req_1gaf2207f27d7f38c0c7ddc63a4972c8f64" class="nameRef">espGetDocuments</a>(<a href="http.html#group___http_stream" class="ref">HttpStream</a> *stream)</td></tr><tr class="apiBrief"><td>&nbsp;</td><td>Get the default documents directory for the request route.</td></tr>
<tr class="apiDef"><td class="apiType"><a href="#group___esp_route" class="ref">EspRoute</a> *</td><td><a href="#group___esp_req_1ga4deb6b39d025c58bef586d5d23c09f0d" class="nameRef">espGetEspRoute</a>(<a href="http.html#group___http_stream" class="ref">HttpStream</a> *stream)</td></tr><tr class="apiBrief"><td>&nbsp;</td><td>Get the current extended route information.</td></tr>
<tr class="apiDef"><td class="apiType"><a href="osdep.html#group___osdep_1ga0f128c3e0c83721af0220c00554e9c4e" class="ref">cchar</a> *</td><td><a href="#group___esp_req_1gabb29826c28bfabba639cf6cbab8f4248" class="nameRef">espGetFeedback</a>(<a href="http.html#group___http_stream" class="ref">HttpStream</a> *stream, <a href="osdep.html#group___osdep_1ga0f128c3e0c83721af0220c00554e9c4e" class="ref">cchar</a> *type)</td></tr><tr class="apiBrief"><td>&nbsp;</td><td>Get a feedback message defined via feedback.</td></tr>
<tr class="apiDef"><td class="apiType"><a href="edi.html#group___edi_grid" class="ref">EdiGrid</a> *</td><td><a href="#group___esp_req_1ga2d3407b93aba291894cf9faec7823b1d" class="nameRef">espGetGrid</a>(<a href="http.html#group___http_stream" class="ref">HttpStream</a> *stream)</td></tr><tr class="apiBrief"><td>&nbsp;</td><td>Get the current database grid reference.</td></tr>
<tr class="apiDef"><td class="apiType"><a href="osdep.html#group___osdep_1ga0f128c3e0c83721af0220c00554e9c4e" class="ref">cchar</a> *</td><td><a href="#group___esp_req_1ga55166a9390a6764f71d22334b6f4261f" class="nameRef">espGetHeader</a>(<a href="http.html#group___http_stream" class="ref">HttpStream</a> *stream, <a href="osdep.html#group___osdep_1ga0f128c3e0c83721af0220c00554e9c4e" class="ref">cchar</a> *key)</td></tr><tr class="apiBrief"><td>&nbsp;</td><td>Get an rx http header.</td></tr>
<tr class="apiDef"><td class="apiType"><a href="mpr.html#struct_mpr_hash" class="ref">MprHash</a> *</td><td><a href="#group___esp_req_1gaacbdf7a3620ff21d9494e5134173fa14" class="nameRef">espGetHeaderHash</a>(<a href="http.html#group___http_stream" class="ref">HttpStream</a> *stream)</td></tr><tr class="apiBrief"><td>&nbsp;</td><td>Get the hash table of rx Http headers.</td></tr>
<tr class="apiDef"><td class="apiType">char *</td><td><a href="#group___esp_req_1gaa1f4c2b82170859379130673d16b9976" class="nameRef">espGetHeaders</a>(<a href="http.html#group___http_stream" class="ref">HttpStream</a> *stream)</td></tr><tr class="apiBrief"><td>&nbsp;</td><td>Get all the request http headers.</td></tr>
<tr class="apiDef"><td class="apiType">int</td><td><a href="#group___esp_req_1ga8c516f5c15f5610e38c7a2c8f37f28cc" class="nameRef">espGetIntParam</a>(<a href="http.html#group___http_stream" class="ref">HttpStream</a> *stream, <a href="osdep.html#group___osdep_1ga0f128c3e0c83721af0220c00554e9c4e" class="ref">cchar</a> *var, int defaultValue)</td></tr><tr class="apiBrief"><td>&nbsp;</td><td>Get a request pararmeter as an integer.</td></tr>
<tr class="apiDef"><td class="apiType"><a href="osdep.html#group___osdep_1ga0f128c3e0c83721af0220c00554e9c4e" class="ref">cchar</a> *</td><td><a href="#group___esp_req_1ga2c7910b773f2ba46690dacfce18883eb" class="nameRef">espGetMethod</a>(<a href="http.html#group___http_stream" class="ref">HttpStream</a> *stream)</td></tr><tr class="apiBrief"><td>&nbsp;</td><td>Get the HTTP method.</td></tr>
<tr class="apiDef"><td class="apiType"><a href="osdep.html#group___osdep_1ga0f128c3e0c83721af0220c00554e9c4e" class="ref">cchar</a> *</td><td><a href="#group___esp_req_1ga7fa102e12c3f6459a7cd937bcef00e7e" class="nameRef">espGetParam</a>(<a href="http.html#group___http_stream" class="ref">HttpStream</a> *stream, <a href="osdep.html#group___osdep_1ga0f128c3e0c83721af0220c00554e9c4e" class="ref">cchar</a> *var, <a href="osdep.html#group___osdep_1ga0f128c3e0c83721af0220c00554e9c4e" class="ref">cchar</a> *defaultValue)</td></tr><tr class="apiBrief"><td>&nbsp;</td><td>Get a request parameter.</td></tr>
<tr class="apiDef"><td class="apiType"><a href="mpr.html#group___mpr_json" class="ref">MprJson</a> *</td><td><a href="#group___esp_req_1gaa8e42a2cef0c9baf1f70081756ed2558" class="nameRef">espGetParamObj</a>(<a href="http.html#group___http_stream" class="ref">HttpStream</a> *stream, <a href="osdep.html#group___osdep_1ga0f128c3e0c83721af0220c00554e9c4e" class="ref">cchar</a> *var)</td></tr><tr class="apiBrief"><td>&nbsp;</td><td>Get a request pararmeter as a JSON object.</td></tr>
<tr class="apiDef"><td class="apiType"><a href="mpr.html#group___mpr_json" class="ref">MprJson</a> *</td><td><a href="#group___esp_req_1gac396be6071893fbb7c911ca900b133fd" class="nameRef">espGetParams</a>(<a href="http.html#group___http_stream" class="ref">HttpStream</a> *stream)</td></tr><tr class="apiBrief"><td>&nbsp;</td><td>Get the request parameters.</td></tr>
<tr class="apiDef"><td class="apiType"><a href="osdep.html#group___osdep_1ga0f128c3e0c83721af0220c00554e9c4e" class="ref">cchar</a> *</td><td><a href="#group___esp_req_1ga6c01218c942727d853bb13222ee2ad40" class="nameRef">espGetPath</a>(<a href="http.html#group___http_stream" class="ref">HttpStream</a> *stream)</td></tr><tr class="apiBrief"><td>&nbsp;</td><td>Get the request URI path string.</td></tr>
<tr class="apiDef"><td class="apiType"><a href="osdep.html#group___osdep_1ga0f128c3e0c83721af0220c00554e9c4e" class="ref">cchar</a> *</td><td><a href="#group___esp_req_1gab8a6e6a859f2a8b42bdd7e6b28a92803" class="nameRef">espGetQueryString</a>(<a href="http.html#group___http_stream" class="ref">HttpStream</a> *stream)</td></tr><tr class="apiBrief"><td>&nbsp;</td><td>Get the request URI query string.</td></tr>
<tr class="apiDef"><td class="apiType"><a href="osdep.html#group___osdep_1ga0f128c3e0c83721af0220c00554e9c4e" class="ref">cchar</a> *</td><td><a href="#group___esp_req_1gaa93ec0ce3050ebc361003b017f8f7ecc" class="nameRef">espGetReferrer</a>(<a href="http.html#group___http_stream" class="ref">HttpStream</a> *stream)</td></tr><tr class="apiBrief"><td>&nbsp;</td><td>Get the referring URI.</td></tr>
<tr class="apiDef"><td class="apiType"><a href="http.html#group___http_route" class="ref">HttpRoute</a> *</td><td><a href="#group___esp_req_1ga30c1f8dca033aa2093998cf0093e8708" class="nameRef">espGetRoute</a>(<a href="http.html#group___http_stream" class="ref">HttpStream</a> *stream)</td></tr><tr class="apiBrief"><td>&nbsp;</td><td>Get the current route HttpRoute object.</td></tr>
<tr class="apiDef"><td class="apiType"><a href="edi.html#group___edi" class="ref">Edi</a> *</td><td><a href="#group___esp_req_1ga31a63865f5ac3a4b97e793a69649de45" class="nameRef">espGetRouteDatabase</a>(<a href="http.html#group___http_route" class="ref">HttpRoute</a> *route)</td></tr><tr class="apiBrief"><td>&nbsp;</td><td>Get the default database defined on a route.</td></tr>
<tr class="apiDef"><td class="apiType"><a href="osdep.html#group___osdep_1ga0f128c3e0c83721af0220c00554e9c4e" class="ref">cchar</a> *</td><td><a href="#group___esp_req_1gaa4674c619719ff1487bf9258b05c9794" class="nameRef">espGetRouteVar</a>(<a href="http.html#group___http_stream" class="ref">HttpStream</a> *stream, <a href="osdep.html#group___osdep_1ga0f128c3e0c83721af0220c00554e9c4e" class="ref">cchar</a> *var)</td></tr><tr class="apiBrief"><td>&nbsp;</td><td>Get a route variable.</td></tr>
<tr class="apiDef"><td class="apiType"><a href="osdep.html#group___osdep_1ga0f128c3e0c83721af0220c00554e9c4e" class="ref">cchar</a> *</td><td><a href="#group___esp_req_1ga51e835444417ad26d3cde665b875b535" class="nameRef">espGetSessionID</a>(<a href="http.html#group___http_stream" class="ref">HttpStream</a> *stream, int create)</td></tr><tr class="apiBrief"><td>&nbsp;</td><td>Get the session state ID.</td></tr>
<tr class="apiDef"><td class="apiType">int</td><td><a href="#group___esp_req_1gac69ab5a3aefeb52ee610c97a782f5be8" class="nameRef">espGetStatus</a>(<a href="http.html#group___http_stream" class="ref">HttpStream</a> *stream)</td></tr><tr class="apiBrief"><td>&nbsp;</td><td>Get the response status.</td></tr>
<tr class="apiDef"><td class="apiType"><a href="osdep.html#group___osdep_1ga0f128c3e0c83721af0220c00554e9c4e" class="ref">cchar</a> *</td><td><a href="#group___esp_req_1ga6458200f97538630443957fe302316c1" class="nameRef">espGetStatusMessage</a>(<a href="http.html#group___http_stream" class="ref">HttpStream</a> *stream)</td></tr><tr class="apiBrief"><td>&nbsp;</td><td>Get the Http response status message.</td></tr>
<tr class="apiDef"><td class="apiType"><a href="http.html#group___http_stream" class="ref">HttpStream</a> *</td><td><a href="#group___esp_req_1gad2e6be70f61174f11ac68c5ee52e0462" class="nameRef">espGetStream</a>(void)</td></tr><tr class="apiBrief"><td>&nbsp;</td><td>Get the current request stream.</td></tr>
<tr class="apiDef"><td class="apiType"><a href="mpr.html#group___mpr_list" class="ref">MprList</a> *</td><td><a href="#group___esp_req_1gaefb9136c155b9763d37d401e82091354" class="nameRef">espGetUploads</a>(<a href="http.html#group___http_stream" class="ref">HttpStream</a> *stream)</td></tr><tr class="apiBrief"><td>&nbsp;</td><td>Get the uploaded files.</td></tr>
<tr class="apiDef"><td class="apiType"><a href="osdep.html#group___osdep_1ga0f128c3e0c83721af0220c00554e9c4e" class="ref">cchar</a> *</td><td><a href="#group___esp_req_1gab8f0cb172ba311dca5ceb8500372cf1a" class="nameRef">espGetUri</a>(<a href="http.html#group___http_stream" class="ref">HttpStream</a> *stream)</td></tr><tr class="apiBrief"><td>&nbsp;</td><td>Get the request URI string.</td></tr>
<tr class="apiDef"><td class="apiType"><a href="osdep.html#group___osdep_1gad5c9d4ba3dc37783a528b0925dc981a0" class="ref">bool</a></td><td><a href="#group___esp_req_1gadb37c44514aa605a811280e2fdee9329" class="nameRef">espHasGrid</a>(<a href="http.html#group___http_stream" class="ref">HttpStream</a> *stream)</td></tr><tr class="apiBrief"><td>&nbsp;</td><td>Test if a current grid has been defined via <a class="ref" href="#group___esp_req_1ga09f9871ba0bf8058575c8a22a34774ab">espSetGrid</a></td></tr>
<tr class="apiDef"><td class="apiType"><a href="osdep.html#group___osdep_1gad5c9d4ba3dc37783a528b0925dc981a0" class="ref">bool</a></td><td><a href="#group___esp_req_1ga1b26f1c2f8e1f78024f076464c1483dc" class="nameRef">espHasRec</a>(<a href="http.html#group___http_stream" class="ref">HttpStream</a> *stream)</td></tr><tr class="apiBrief"><td>&nbsp;</td><td>Test if a current record has been defined and save to the database.</td></tr>
<tr class="apiDef"><td class="apiType">int</td><td><a href="#group___esp_route_1gaca1c2bea3bde8c348d3d70c35ef21667" class="nameRef">espInit</a>(<a href="http.html#group___http_route" class="ref">HttpRoute</a> *route, <a href="osdep.html#group___osdep_1ga0f128c3e0c83721af0220c00554e9c4e" class="ref">cchar</a> *prefix, <a href="osdep.html#group___osdep_1ga0f128c3e0c83721af0220c00554e9c4e" class="ref">cchar</a> *path)</td></tr><tr class="apiBrief"><td>&nbsp;</td><td>Initialize ESP.</td></tr>
<tr class="apiDef"><td class="apiType">void</td><td><a href="#esp_8h_1a56eafbf70fb0509e85aa5070becbaca6" class="nameRef">espInitHtmlOptions</a>(<a href="#struct_esp" class="ref">Esp</a> *esp)</td></tr><tr class="apiBrief"><td>&nbsp;</td><td>Add HTLM internal options to the Esp.options hash.</td></tr>
<tr class="apiDef"><td class="apiType">int</td><td><a href="#esp_8h_1a240f55c3789229bd59ec4c2c4b5c1557" class="nameRef">espInitParser</a>(void)</td></tr><tr class="apiBrief"><td>&nbsp;</td><td>Initialize the ESP configuration file parser.</td></tr>
<tr class="apiDef"><td class="apiType"><a href="osdep.html#group___osdep_1gad5c9d4ba3dc37783a528b0925dc981a0" class="ref">bool</a></td><td><a href="#group___esp_req_1gaba5e635fa31811599d1d3c156164f1bf" class="nameRef">espIsAuthenticated</a>(<a href="http.html#group___http_stream" class="ref">HttpStream</a> *stream)</td></tr><tr class="apiBrief"><td>&nbsp;</td><td>Test if the user is authenticated.</td></tr>
<tr class="apiDef"><td class="apiType"><a href="osdep.html#group___osdep_1gad5c9d4ba3dc37783a528b0925dc981a0" class="ref">bool</a></td><td><a href="#group___esp_req_1ga87aa523e2a34d6c1db9355d16746ba83" class="nameRef">espIsCurrentSession</a>(<a href="http.html#group___http_stream" class="ref">HttpStream</a> *stream)</td></tr><tr class="apiBrief"><td>&nbsp;</td><td>Test if the request is being made on behalf of the current, single authenticated user.</td></tr>
<tr class="apiDef"><td class="apiType"><a href="osdep.html#group___osdep_1gad5c9d4ba3dc37783a528b0925dc981a0" class="ref">bool</a></td><td><a href="#group___esp_req_1ga911251b3456386c09a53a33c2f063c07" class="nameRef">espIsEof</a>(<a href="http.html#group___http_stream" class="ref">HttpStream</a> *stream)</td></tr><tr class="apiBrief"><td>&nbsp;</td><td>Test if the receive input stream is at end-of-file.</td></tr>
<tr class="apiDef"><td class="apiType"><a href="osdep.html#group___osdep_1gad5c9d4ba3dc37783a528b0925dc981a0" class="ref">bool</a></td><td><a href="#group___esp_req_1ga1a37202ca271308e8742ad69af29443b" class="nameRef">espIsFinalized</a>(<a href="http.html#group___http_stream" class="ref">HttpStream</a> *stream)</td></tr><tr class="apiBrief"><td>&nbsp;</td><td>Test if the request has been finalized.</td></tr>
<tr class="apiDef"><td class="apiType"><a href="osdep.html#group___osdep_1gad5c9d4ba3dc37783a528b0925dc981a0" class="ref">bool</a></td><td><a href="#group___esp_req_1gaad694d30c39f736bfd07a4e89facd407" class="nameRef">espIsSecure</a>(<a href="http.html#group___http_stream" class="ref">HttpStream</a> *stream)</td></tr><tr class="apiBrief"><td>&nbsp;</td><td>Test if the stream is using SSL and is secure.</td></tr>
<tr class="apiDef"><td class="apiType">int</td><td><a href="#group___esp_route_1ga619751fdfd2aa494d0074bd661e5e103" class="nameRef">espLoadCompilerRules</a>(<a href="http.html#group___http_route" class="ref">HttpRoute</a> *route)</td></tr><tr class="apiBrief"><td>&nbsp;</td><td>Load the compiler rules from esp-compile.json.</td></tr>
<tr class="apiDef"><td class="apiType">int</td><td><a href="#group___esp_route_1ga8719b78bdfb4e3228c6e9be843f45140" class="nameRef">espLoadConfig</a>(<a href="http.html#group___http_route" class="ref">HttpRoute</a> *route)</td></tr><tr class="apiBrief"><td>&nbsp;</td><td>Load configuration for an ESP application.</td></tr>
<tr class="apiDef"><td class="apiType"><a href="osdep.html#group___osdep_1gad5c9d4ba3dc37783a528b0925dc981a0" class="ref">bool</a></td><td><a href="#group___esp_req_1ga9de5abcd3d4052efaa3d3e410ebbf6c9" class="nameRef">espMatchParam</a>(<a href="http.html#group___http_stream" class="ref">HttpStream</a> *stream, <a href="osdep.html#group___osdep_1ga0f128c3e0c83721af0220c00554e9c4e" class="ref">cchar</a> *var, <a href="osdep.html#group___osdep_1ga0f128c3e0c83721af0220c00554e9c4e" class="ref">cchar</a> *value)</td></tr><tr class="apiBrief"><td>&nbsp;</td><td>Match a request parameter with an expected value.</td></tr>
<tr class="apiDef"><td class="apiType">int</td><td><a href="#esp_8h_1a2f63950b45dd427b2bdfa7ae1c8f85c0" class="nameRef">espOpen</a>(<a href="mpr.html#group___mpr_module" class="ref">MprModule</a> *module)</td></tr><tr class="apiBrief"><td>&nbsp;</td><td>ESP initialization entry point.</td></tr>
<tr class="apiDef"><td class="apiType"><a href="edi.html#group___edi_grid" class="ref">EdiGrid</a> *</td><td><a href="#group___esp_req_1ga8d1d1a452011e3a410f6d9c79150a958" class="nameRef">espReadTable</a>(<a href="http.html#group___http_stream" class="ref">HttpStream</a> *stream, <a href="osdep.html#group___osdep_1ga0f128c3e0c83721af0220c00554e9c4e" class="ref">cchar</a> *tableName)</td></tr><tr class="apiBrief"><td>&nbsp;</td><td>Read a table from the current database.</td></tr>
<tr class="apiDef"><td class="apiType"><a href="osdep.html#group___osdep_1ga7d08ccc1e981eb4d5a238641ac4ccfc1" class="ref">ssize</a></td><td><a href="#group___esp_req_1ga855352588dacdb979a50caae379b736e" class="nameRef">espReceive</a>(<a href="http.html#group___http_stream" class="ref">HttpStream</a> *stream, char *buf, <a href="osdep.html#group___osdep_1ga7d08ccc1e981eb4d5a238641ac4ccfc1" class="ref">ssize</a> size)</td></tr><tr class="apiBrief"><td>&nbsp;</td><td>Read receive body content.</td></tr>
<tr class="apiDef"><td class="apiType">void</td><td><a href="#group___esp_req_1gad40cb0d52cde0cfa28a6040c5bc035e3" class="nameRef">espRedirect</a>(<a href="http.html#group___http_stream" class="ref">HttpStream</a> *stream, int status, <a href="osdep.html#group___osdep_1ga0f128c3e0c83721af0220c00554e9c4e" class="ref">cchar</a> *target)</td></tr><tr class="apiBrief"><td>&nbsp;</td><td>Redirect the client.</td></tr>
<tr class="apiDef"><td class="apiType">void</td><td><a href="#group___esp_req_1ga8b565b1563e5dda7271549a1e2b96139" class="nameRef">espRedirectBack</a>(<a href="http.html#group___http_stream" class="ref">HttpStream</a> *stream)</td></tr><tr class="apiBrief"><td>&nbsp;</td><td>Redirect the client back to the referrer.</td></tr>
<tr class="apiDef"><td class="apiType">void</td><td><a href="#group___esp_req_1ga3dc70abb6ffc559b812d3199aa4238db" class="nameRef">espRemoveCookie</a>(<a href="http.html#group___http_stream" class="ref">HttpStream</a> *stream, <a href="osdep.html#group___osdep_1ga0f128c3e0c83721af0220c00554e9c4e" class="ref">cchar</a> *name)</td></tr><tr class="apiBrief"><td>&nbsp;</td><td>Remove a cookie.</td></tr>
<tr class="apiDef"><td class="apiType">int</td><td><a href="#group___esp_req_1gaa89cbec1f573b93990587fb190efe6bb" class="nameRef">espRemoveHeader</a>(<a href="http.html#group___http_stream" class="ref">HttpStream</a> *stream, <a href="osdep.html#group___osdep_1ga0f128c3e0c83721af0220c00554e9c4e" class="ref">cchar</a> *key)</td></tr><tr class="apiBrief"><td>&nbsp;</td><td>Remove a header from the transmission.</td></tr>
<tr class="apiDef"><td class="apiType">void</td><td><a href="#group___esp_req_1ga2ca5f0bbfd91449ba14ec1368c3731fb" class="nameRef">espRemoveSessionVar</a>(<a href="http.html#group___http_stream" class="ref">HttpStream</a> *stream, <a href="osdep.html#group___osdep_1ga0f128c3e0c83721af0220c00554e9c4e" class="ref">cchar</a> *name)</td></tr><tr class="apiBrief"><td>&nbsp;</td><td>Remove a session state variable.</td></tr>
<tr class="apiDef"><td class="apiType"><a href="osdep.html#group___osdep_1ga7d08ccc1e981eb4d5a238641ac4ccfc1" class="ref">ssize</a></td><td><a href="#group___esp_req_1ga740f0e3af771eb0b256cd7221e4bb4df" class="nameRef">espRender</a>(<a href="http.html#group___http_stream" class="ref">HttpStream</a> *stream, <a href="osdep.html#group___osdep_1ga0f128c3e0c83721af0220c00554e9c4e" class="ref">cchar</a> *fmt, ...)</td></tr><tr class="apiBrief"><td>&nbsp;</td><td>Render a formatted string.</td></tr>
<tr class="apiDef"><td class="apiType"><a href="osdep.html#group___osdep_1ga7d08ccc1e981eb4d5a238641ac4ccfc1" class="ref">ssize</a></td><td><a href="#group___esp_req_1gab1ae06f7d01f771d47e06a97d6eb9a48" class="nameRef">espRenderBlock</a>(<a href="http.html#group___http_stream" class="ref">HttpStream</a> *stream, <a href="osdep.html#group___osdep_1ga0f128c3e0c83721af0220c00554e9c4e" class="ref">cchar</a> *buf, <a href="osdep.html#group___osdep_1ga7d08ccc1e981eb4d5a238641ac4ccfc1" class="ref">ssize</a> size)</td></tr><tr class="apiBrief"><td>&nbsp;</td><td>Render a block of data to the client.</td></tr>
<tr class="apiDef"><td class="apiType"><a href="osdep.html#group___osdep_1ga7d08ccc1e981eb4d5a238641ac4ccfc1" class="ref">ssize</a></td><td><a href="#group___esp_req_1ga48248f6e2da9c63d14de1acfea49f0fb" class="nameRef">espRenderCached</a>(<a href="http.html#group___http_stream" class="ref">HttpStream</a> *stream)</td></tr><tr class="apiBrief"><td>&nbsp;</td><td>Render cached content.</td></tr>
<tr class="apiDef"><td class="apiType"><a href="osdep.html#group___osdep_1ga7d08ccc1e981eb4d5a238641ac4ccfc1" class="ref">ssize</a></td><td><a href="#group___esp_req_1gafa3a630f74ad5bd46445737d204745b4" class="nameRef">espRenderConfig</a>(<a href="http.html#group___http_stream" class="ref">HttpStream</a> *stream)</td></tr><tr class="apiBrief"><td>&nbsp;</td><td>Render the client configuration string in JSON.</td></tr>
<tr class="apiDef"><td class="apiType">void</td><td><a href="#group___esp_req_1ga321591a7772d9555f93d8804513c0707" class="nameRef">espRenderDocument</a>(<a href="http.html#group___http_stream" class="ref">HttpStream</a> *stream, <a href="osdep.html#group___osdep_1ga0f128c3e0c83721af0220c00554e9c4e" class="ref">cchar</a> *path)</td></tr><tr class="apiBrief"><td>&nbsp;</td><td>Render an ESP document.</td></tr>
<tr class="apiDef"><td class="apiType"><a href="osdep.html#group___osdep_1ga7d08ccc1e981eb4d5a238641ac4ccfc1" class="ref">ssize</a></td><td><a href="#group___esp_req_1ga97dcf0c01a210b1190bbaf6ddec55626" class="nameRef">espRenderError</a>(<a href="http.html#group___http_stream" class="ref">HttpStream</a> *stream, int status, <a href="osdep.html#group___osdep_1ga0f128c3e0c83721af0220c00554e9c4e" class="ref">cchar</a> *fmt, ...)</td></tr><tr class="apiBrief"><td>&nbsp;</td><td>Render an error message back to the client and finalize the request.</td></tr>
<tr class="apiDef"><td class="apiType"><a href="osdep.html#group___osdep_1ga7d08ccc1e981eb4d5a238641ac4ccfc1" class="ref">ssize</a></td><td><a href="#esp_8h_1acd50895af625f24f565c21f27a934405" class="nameRef">espRenderFeedback</a>(<a href="http.html#group___http_stream" class="ref">HttpStream</a> *stream, <a href="osdep.html#group___osdep_1ga0f128c3e0c83721af0220c00554e9c4e" class="ref">cchar</a> *types)</td></tr><tr class="apiBrief"><td>&nbsp;</td><td>Render feedback messages.</td></tr>
<tr class="apiDef"><td class="apiType"><a href="osdep.html#group___osdep_1ga7d08ccc1e981eb4d5a238641ac4ccfc1" class="ref">ssize</a></td><td><a href="#group___esp_req_1ga679268b7235fa3a44c66bc5ccf9d334a" class="nameRef">espRenderFile</a>(<a href="http.html#group___http_stream" class="ref">HttpStream</a> *stream, <a href="osdep.html#group___osdep_1ga0f128c3e0c83721af0220c00554e9c4e" class="ref">cchar</a> *path)</td></tr><tr class="apiBrief"><td>&nbsp;</td><td>Render the contents of a file back to the client.</td></tr>
<tr class="apiDef"><td class="apiType"><a href="osdep.html#group___osdep_1ga7d08ccc1e981eb4d5a238641ac4ccfc1" class="ref">ssize</a></td><td><a href="#group___esp_req_1ga73989d22b93eb4f2bd0e57f5312d7070" class="nameRef">espRenderSafe</a>(<a href="http.html#group___http_stream" class="ref">HttpStream</a> *stream, <a href="osdep.html#group___osdep_1ga0f128c3e0c83721af0220c00554e9c4e" class="ref">cchar</a> *fmt, ...)</td></tr><tr class="apiBrief"><td>&nbsp;</td><td>Render a formatted string after HTML escaping.</td></tr>
<tr class="apiDef"><td class="apiType"><a href="osdep.html#group___osdep_1ga7d08ccc1e981eb4d5a238641ac4ccfc1" class="ref">ssize</a></td><td><a href="#group___esp_req_1gac13211295b015088127ac10684933f19" class="nameRef">espRenderSafeString</a>(<a href="http.html#group___http_stream" class="ref">HttpStream</a> *stream, <a href="osdep.html#group___osdep_1ga0f128c3e0c83721af0220c00554e9c4e" class="ref">cchar</a> *s)</td></tr><tr class="apiBrief"><td>&nbsp;</td><td>Render a safe string of data to the client.</td></tr>
<tr class="apiDef"><td class="apiType"><a href="osdep.html#group___osdep_1ga7d08ccc1e981eb4d5a238641ac4ccfc1" class="ref">ssize</a></td><td><a href="#group___esp_req_1ga08cb7d6bbbb06131994b6033ea99b5ad" class="nameRef">espRenderString</a>(<a href="http.html#group___http_stream" class="ref">HttpStream</a> *stream, <a href="osdep.html#group___osdep_1ga0f128c3e0c83721af0220c00554e9c4e" class="ref">cchar</a> *s)</td></tr><tr class="apiBrief"><td>&nbsp;</td><td>Render a string of data to the client.</td></tr>
<tr class="apiDef"><td class="apiType"><a href="osdep.html#group___osdep_1ga7d08ccc1e981eb4d5a238641ac4ccfc1" class="ref">ssize</a></td><td><a href="#group___esp_req_1ga38422504736e4bd4d5a9af9a76345885" class="nameRef">espRenderVar</a>(<a href="http.html#group___http_stream" class="ref">HttpStream</a> *stream, <a href="osdep.html#group___osdep_1ga0f128c3e0c83721af0220c00554e9c4e" class="ref">cchar</a> *name)</td></tr><tr class="apiBrief"><td>&nbsp;</td><td>Render the value of a request variable to the client.</td></tr>
<tr class="apiDef"><td class="apiType"><a href="osdep.html#group___osdep_1gad5c9d4ba3dc37783a528b0925dc981a0" class="ref">bool</a></td><td><a href="#group___esp_req_1ga6b235109ed8caa6ff411df4160630ba9" class="nameRef">espRenderView</a>(<a href="http.html#group___http_stream" class="ref">HttpStream</a> *stream, <a href="osdep.html#group___osdep_1ga0f128c3e0c83721af0220c00554e9c4e" class="ref">cchar</a> *view, int flags)</td></tr><tr class="apiBrief"><td>&nbsp;</td><td>Render an ESP view page to the client.</td></tr>
<tr class="apiDef"><td class="apiType"><a href="#group___esp_route" class="ref">EspRoute</a> *</td><td><a href="#group___esp_route_1ga7814b1fa47cbcc97d8bdd1d7141b3d4b" class="nameRef">espRoute</a>(<a href="http.html#group___http_route" class="ref">HttpRoute</a> *route, <a href="osdep.html#group___osdep_1gad5c9d4ba3dc37783a528b0925dc981a0" class="ref">bool</a> create)</td></tr><tr class="apiBrief"><td>&nbsp;</td><td>Return the corresponding EspRoute for the given Route.</td></tr>
<tr class="apiDef"><td class="apiType"><a href="osdep.html#group___osdep_1ga7d08ccc1e981eb4d5a238641ac4ccfc1" class="ref">ssize</a></td><td><a href="#group___esp_req_1gabd3396f92f086163b3f873ab8f4ef68f" class="nameRef">espSendGrid</a>(<a href="http.html#group___http_stream" class="ref">HttpStream</a> *stream, <a href="edi.html#group___edi_grid" class="ref">EdiGrid</a> *grid, int flags)</td></tr><tr class="apiBrief"><td>&nbsp;</td><td>Send a database grid as a JSON string.</td></tr>
<tr class="apiDef"><td class="apiType"><a href="osdep.html#group___osdep_1ga7d08ccc1e981eb4d5a238641ac4ccfc1" class="ref">ssize</a></td><td><a href="#group___esp_req_1ga6ad553215efae37b30624cc189f8ec93" class="nameRef">espSendRec</a>(<a href="http.html#group___http_stream" class="ref">HttpStream</a> *stream, <a href="edi.html#group___edi_rec" class="ref">EdiRec</a> *rec, int flags)</td></tr><tr class="apiBrief"><td>&nbsp;</td><td>Send a database record as a JSON string.</td></tr>
<tr class="apiDef"><td class="apiType"><a href="osdep.html#group___osdep_1ga7d08ccc1e981eb4d5a238641ac4ccfc1" class="ref">ssize</a></td><td><a href="#group___esp_req_1gab58e0600c271a9cd45d9b71f7946eb92" class="nameRef">espSendResult</a>(<a href="http.html#group___http_stream" class="ref">HttpStream</a> *stream, <a href="osdep.html#group___osdep_1gad5c9d4ba3dc37783a528b0925dc981a0" class="ref">bool</a> success)</td></tr><tr class="apiBrief"><td>&nbsp;</td><td>Send a JSON response result.</td></tr>
<tr class="apiDef"><td class="apiType"><a href="osdep.html#group___osdep_1gad5c9d4ba3dc37783a528b0925dc981a0" class="ref">bool</a></td><td><a href="#group___esp_req_1gade4f16e9df197e729243386fb4adf9b5" class="nameRef">espSetAutoFinalizing</a>(<a href="http.html#group___http_stream" class="ref">HttpStream</a> *stream, <a href="osdep.html#group___osdep_1gad5c9d4ba3dc37783a528b0925dc981a0" class="ref">bool</a> on)</td></tr><tr class="apiBrief"><td>&nbsp;</td><td>Enable auto-finalizing for this request.</td></tr>
<tr class="apiDef"><td class="apiType">int</td><td><a href="#group___esp_route_1gada3b399d10e3f1eaee004cde256e379f" class="nameRef">espSetConfig</a>(<a href="http.html#group___http_route" class="ref">HttpRoute</a> *route, <a href="osdep.html#group___osdep_1ga0f128c3e0c83721af0220c00554e9c4e" class="ref">cchar</a> *key, <a href="osdep.html#group___osdep_1ga0f128c3e0c83721af0220c00554e9c4e" class="ref">cchar</a> *value)</td></tr><tr class="apiBrief"><td>&nbsp;</td><td>Set a configuration value to the ESP pak.json.</td></tr>
<tr class="apiDef"><td class="apiType">void</td><td><a href="#group___esp_req_1ga9159e247a36c454bc3e0840051b7233a" class="nameRef">espSetContentLength</a>(<a href="http.html#group___http_stream" class="ref">HttpStream</a> *stream, <a href="mpr.html#mpr_8h_1a87e9f435008723c7b1489af1944c6e20" class="ref">MprOff</a> length)</td></tr><tr class="apiBrief"><td>&nbsp;</td><td>Define a content length header in the transmission.</td></tr>
<tr class="apiDef"><td class="apiType">void</td><td><a href="#group___esp_req_1gabed006452ae09b7a3c387755876429df" class="nameRef">espSetContentType</a>(<a href="http.html#group___http_stream" class="ref">HttpStream</a> *stream, <a href="osdep.html#group___osdep_1ga0f128c3e0c83721af0220c00554e9c4e" class="ref">cchar</a> *mimeType)</td></tr><tr class="apiBrief"><td>&nbsp;</td><td>Set the transmission (response) content mime type.</td></tr>
<tr class="apiDef"><td class="apiType">void</td><td><a href="#group___esp_req_1ga5b14b36d8775d67665900c6c241c01e0" class="nameRef">espSetCookie</a>(<a href="http.html#group___http_stream" class="ref">HttpStream</a> *stream, <a href="osdep.html#group___osdep_1ga0f128c3e0c83721af0220c00554e9c4e" class="ref">cchar</a> *name, <a href="osdep.html#group___osdep_1ga0f128c3e0c83721af0220c00554e9c4e" class="ref">cchar</a> *value, <a href="osdep.html#group___osdep_1ga0f128c3e0c83721af0220c00554e9c4e" class="ref">cchar</a> *path, <a href="osdep.html#group___osdep_1ga0f128c3e0c83721af0220c00554e9c4e" class="ref">cchar</a> *domain, <a href="mpr.html#mpr_8h_1adbceeccda24c35e7b4c6090db7065319" class="ref">MprTicks</a> lifespan, <a href="osdep.html#group___osdep_1gad5c9d4ba3dc37783a528b0925dc981a0" class="ref">bool</a> isSecure)</td></tr><tr class="apiBrief"><td>&nbsp;</td><td>Set a cookie in the transmission.</td></tr>
<tr class="apiDef"><td class="apiType">void</td><td><a href="#group___esp_req_1ga7716b0e1e8129914f1ef94585c37673a" class="nameRef">espSetCurrentSession</a>(<a href="http.html#group___http_stream" class="ref">HttpStream</a> *stream)</td></tr><tr class="apiBrief"><td>&nbsp;</td><td>Set this authenticated session as the current session.</td></tr>
<tr class="apiDef"><td class="apiType">void</td><td><a href="#esp_8h_1a3534a4b4994b1de062c75ebb121b59fe" class="nameRef">espSetData</a>(<a href="http.html#group___http_stream" class="ref">HttpStream</a> *stream, void *data)</td></tr><tr class="apiBrief"><td>&nbsp;</td><td>Set a private data reference for the current request.</td></tr>
<tr class="apiDef"><td class="apiType">void</td><td><a href="#group___esp_req_1ga771dab7992d00940e83a27d47c4fbeec" class="nameRef">espSetFeedback</a>(<a href="http.html#group___http_stream" class="ref">HttpStream</a> *stream, <a href="osdep.html#group___osdep_1ga0f128c3e0c83721af0220c00554e9c4e" class="ref">cchar</a> *type, <a href="osdep.html#group___osdep_1ga0f128c3e0c83721af0220c00554e9c4e" class="ref">cchar</a> *fmt, ...)</td></tr><tr class="apiBrief"><td>&nbsp;</td><td>Set a feedback message.</td></tr>
<tr class="apiDef"><td class="apiType">void</td><td><a href="#group___esp_req_1gad86d75d3f1de8522aa232e023cfdde73" class="nameRef">espSetFeedbackv</a>(<a href="http.html#group___http_stream" class="ref">HttpStream</a> *stream, <a href="osdep.html#group___osdep_1ga0f128c3e0c83721af0220c00554e9c4e" class="ref">cchar</a> *type, <a href="osdep.html#group___osdep_1ga0f128c3e0c83721af0220c00554e9c4e" class="ref">cchar</a> *fmt, va_list args)</td></tr><tr class="apiBrief"><td>&nbsp;</td><td>Send a feedback message.</td></tr>
<tr class="apiDef"><td class="apiType"><a href="edi.html#group___edi_grid" class="ref">EdiGrid</a> *</td><td><a href="#group___esp_req_1ga09f9871ba0bf8058575c8a22a34774ab" class="nameRef">espSetGrid</a>(<a href="http.html#group___http_stream" class="ref">HttpStream</a> *stream, <a href="edi.html#group___edi_grid" class="ref">EdiGrid</a> *grid)</td></tr><tr class="apiBrief"><td>&nbsp;</td><td>Set the current database grid.</td></tr>
<tr class="apiDef"><td class="apiType">void</td><td><a href="#group___esp_req_1gac60ee82bf1ce6b09cfe9ebe669062af0" class="nameRef">espSetHeader</a>(<a href="http.html#group___http_stream" class="ref">HttpStream</a> *stream, <a href="osdep.html#group___osdep_1ga0f128c3e0c83721af0220c00554e9c4e" class="ref">cchar</a> *key, <a href="osdep.html#group___osdep_1ga0f128c3e0c83721af0220c00554e9c4e" class="ref">cchar</a> *fmt, ...)</td></tr><tr class="apiBrief"><td>&nbsp;</td><td>Set a transmission header.</td></tr>
<tr class="apiDef"><td class="apiType">void</td><td><a href="#group___esp_req_1gad13e6dc837686a7b820105374750ed4f" class="nameRef">espSetHeaderString</a>(<a href="http.html#group___http_stream" class="ref">HttpStream</a> *stream, <a href="osdep.html#group___osdep_1ga0f128c3e0c83721af0220c00554e9c4e" class="ref">cchar</a> *key, <a href="osdep.html#group___osdep_1ga0f128c3e0c83721af0220c00554e9c4e" class="ref">cchar</a> *value)</td></tr><tr class="apiBrief"><td>&nbsp;</td><td>Set a simple key/value transmission header.</td></tr>
<tr class="apiDef"><td class="apiType">void</td><td><a href="#group___esp_req_1ga6696ab81bed4cdd5031cf535e614e726" class="nameRef">espSetNotifier</a>(<a href="http.html#group___http_stream" class="ref">HttpStream</a> *stream, <a href="http.html#group___http_stream_1gad583143fc934fa15f237b74102c31c4a" class="ref">HttpNotifier</a> notifier)</td></tr><tr class="apiBrief"><td>&nbsp;</td><td>Define a notifier callback for this stream.</td></tr>
<tr class="apiDef"><td class="apiType">void</td><td><a href="#group___esp_req_1ga0363bac2a708d5185f9335fcfbffa510" class="nameRef">espSetParam</a>(<a href="http.html#group___http_stream" class="ref">HttpStream</a> *stream, <a href="osdep.html#group___osdep_1ga0f128c3e0c83721af0220c00554e9c4e" class="ref">cchar</a> *var, <a href="osdep.html#group___osdep_1ga0f128c3e0c83721af0220c00554e9c4e" class="ref">cchar</a> *value)</td></tr><tr class="apiBrief"><td>&nbsp;</td><td>Set a request parameter value.</td></tr>
<tr class="apiDef"><td class="apiType">void</td><td><a href="#group___esp_req_1ga019457243559de65eafc912540707f28" class="nameRef">espSetParamInt</a>(<a href="http.html#group___http_stream" class="ref">HttpStream</a> *stream, <a href="osdep.html#group___osdep_1ga0f128c3e0c83721af0220c00554e9c4e" class="ref">cchar</a> *var, int value)</td></tr><tr class="apiBrief"><td>&nbsp;</td><td>Set an integer request parameter value.</td></tr>
<tr class="apiDef"><td class="apiType"><a href="edi.html#group___edi_rec" class="ref">EdiRec</a> *</td><td><a href="#group___esp_req_1ga0a635f2487e8ce077c791814ed9a8fd5" class="nameRef">espSetRec</a>(<a href="http.html#group___http_stream" class="ref">HttpStream</a> *stream, <a href="edi.html#group___edi_rec" class="ref">EdiRec</a> *rec)</td></tr><tr class="apiBrief"><td>&nbsp;</td><td>Set the current database record.</td></tr>
<tr class="apiDef"><td class="apiType">void</td><td><a href="#group___esp_req_1ga5b28e98f9f6b7c9932dfe72f8afaa86d" class="nameRef">espSetStatus</a>(<a href="http.html#group___http_stream" class="ref">HttpStream</a> *stream, int status)</td></tr><tr class="apiBrief"><td>&nbsp;</td><td>Set a Http response status.</td></tr>
<tr class="apiDef"><td class="apiType">void</td><td><a href="#group___esp_req_1ga0f123fdd3a6adf76ecc8eb0a27cd7605" class="nameRef">espSetStream</a>(<a href="http.html#group___http_stream" class="ref">HttpStream</a> *stream)</td></tr><tr class="apiBrief"><td>&nbsp;</td><td>Set the current request stream.</td></tr>
<tr class="apiDef"><td class="apiType">void</td><td><a href="#group___esp_req_1gacfda1021dede1225a27d384584f066ad" class="nameRef">espShowRequest</a>(<a href="http.html#group___http_stream" class="ref">HttpStream</a> *stream)</td></tr><tr class="apiBrief"><td>&nbsp;</td><td>Show request details.</td></tr>
<tr class="apiDef"><td class="apiType">int</td><td><a href="#esp_8h_1a2b6ab1f6cf9333533ece4ed0f871e0a6" class="nameRef">espStaticInitialize</a>(<a href="#group___esp_route_1ga39099f433a25379dcf1ff0381e78b8d3" class="ref">EspModuleEntry</a> entry, <a href="osdep.html#group___osdep_1ga0f128c3e0c83721af0220c00554e9c4e" class="ref">cchar</a> *appName, <a href="osdep.html#group___osdep_1ga0f128c3e0c83721af0220c00554e9c4e" class="ref">cchar</a> *routeName)</td></tr><tr class="apiBrief"><td>&nbsp;</td><td>Initialize a static library ESP module.</td></tr>
<tr class="apiDef"><td class="apiType"><a href="osdep.html#group___osdep_1gad5c9d4ba3dc37783a528b0925dc981a0" class="ref">bool</a></td><td><a href="#group___esp_route_1ga115c8f838daf7b187cb8a07787734f37" class="nameRef">espTestConfig</a>(<a href="http.html#group___http_route" class="ref">HttpRoute</a> *route, <a href="osdep.html#group___osdep_1ga0f128c3e0c83721af0220c00554e9c4e" class="ref">cchar</a> *key, <a href="osdep.html#group___osdep_1ga0f128c3e0c83721af0220c00554e9c4e" class="ref">cchar</a> *desired)</td></tr><tr class="apiBrief"><td>&nbsp;</td><td>Test if a configuration property from the ESP pak.json has a desired value.</td></tr>
<tr class="apiDef"><td class="apiType">void</td><td><a href="#group___esp_req_1gab4ece9543d64a835a54c225d2e5e49a3" class="nameRef">espUpdateCache</a>(<a href="http.html#group___http_stream" class="ref">HttpStream</a> *stream, <a href="osdep.html#group___osdep_1ga0f128c3e0c83721af0220c00554e9c4e" class="ref">cchar</a> *uri, <a href="osdep.html#group___osdep_1ga0f128c3e0c83721af0220c00554e9c4e" class="ref">cchar</a> *data, int lifesecs)</td></tr><tr class="apiBrief"><td>&nbsp;</td><td>Update the cached content for a request.</td></tr>
<tr class="apiDef"><td class="apiType"><a href="osdep.html#group___osdep_1gad5c9d4ba3dc37783a528b0925dc981a0" class="ref">bool</a></td><td><a href="#group___esp_req_1ga30c12797ca0400feda759dbc26485b56" class="nameRef">espUpdateRec</a>(<a href="http.html#group___http_stream" class="ref">HttpStream</a> *stream, <a href="edi.html#group___edi_rec" class="ref">EdiRec</a> *rec)</td></tr><tr class="apiBrief"><td>&nbsp;</td><td>Write a record to the database.</td></tr>
<tr class="apiDef"><td class="apiType"><a href="osdep.html#group___osdep_1ga0f128c3e0c83721af0220c00554e9c4e" class="ref">cchar</a> *</td><td><a href="#group___esp_req_1ga75a45ce2a706a3cdd453bde9a0b1b0da" class="nameRef">espUri</a>(<a href="http.html#group___http_stream" class="ref">HttpStream</a> *stream, <a href="osdep.html#group___osdep_1ga0f128c3e0c83721af0220c00554e9c4e" class="ref">cchar</a> *target)</td></tr><tr class="apiBrief"><td>&nbsp;</td><td>Create a URI.</td></tr>
</table>
<a name="Typedefs"></a><h2>Typedefs</h2>
<table class="apiIndex" title="typedefs">
<tr class="apiDef"><td class="apiName"><a href="#struct_esp" class="nameRef">Esp</a></td><td class="apiBrief">Top level ESP structure.</td></tr>
<tr class="apiDef"><td class="apiName"><a href="#struct_esp_action" class="nameRef">EspAction</a></td><td class="apiBrief">Action definition.</td></tr>
<tr class="apiDef"><td class="apiName"><a href="#esp_8h_1adc749236ce9c01e8c3f43a4b779df700" class="nameRef">EspLegacyProc</a></td><td class="apiBrief">Procedure callback.</td></tr>
<tr class="apiDef"><td class="apiName"><a href="#group___esp_route_1ga39099f433a25379dcf1ff0381e78b8d3" class="nameRef">EspModuleEntry</a></td><td class="apiBrief">Entry point for a loadable ESP module.</td></tr>
<tr class="apiDef"><td class="apiName"><a href="#group___esp_req_1gaade394637a4d5f682c1edcc287023658" class="nameRef">EspViewProc</a></td><td class="apiBrief">View procedure callback.</td></tr>
</table>
<a name="Defines"></a><h2>Defines</h2>
<table class="apiIndex" title="Defines">
<tr class="apiDef">
<td>#define</td><td><a href="#esp_8h_1aa6f48e3182369365e297875b006aa9a2" class="nameRef">ESP_COMPILE_JSON</a>&nbsp;&nbsp;&nbsp;&quot;esp-compile.json&quot;</td>
</tr>
<tr class="apiBrief"><td>&nbsp;</td><td>Compile rules filename.</td></tr>
<tr class="apiDef">
<td>#define</td><td><a href="#esp_8h_1aa68f305d1ecb9ade4367dd644343c3e3" class="nameRef">ESP_COMPILE_OPTIMIZED</a>&nbsp;&nbsp;&nbsp;1</td>
</tr>
<tr class="apiBrief"><td>&nbsp;</td><td>Override to compile in release mode.</td></tr>
<tr class="apiDef">
<td>#define</td><td><a href="#esp_8h_1a9e73077dd63f91100f534eccf609087b" class="nameRef">ESP_COMPILE_SYMBOLS</a>&nbsp;&nbsp;&nbsp;0</td>
</tr>
<tr class="apiBrief"><td>&nbsp;</td><td>Override to compile in debug mode.</td></tr>
<tr class="apiDef">
<td>#define</td><td><a href="#esp_8h_1a61427a6279173262d67b485f3e83a5d8" class="nameRef">ESP_LIFESPAN</a>&nbsp;&nbsp;&nbsp;(3600 * TPS)</td>
</tr>
<tr class="apiBrief"><td>&nbsp;</td><td>Default generated content cache lifespan.</td></tr>
<tr class="apiDef">
<td>#define</td><td><a href="#esp_8h_1a43fbeae907747e051a493bb33e63a4f4" class="nameRef">ESP_LISTEN</a>&nbsp;&nbsp;&nbsp;&quot;4000&quot;</td>
</tr>
<tr class="apiBrief"><td>&nbsp;</td><td>Default listening endpoint for the esp program.</td></tr>
<tr class="apiDef">
<td>#define</td><td><a href="#esp_8h_1aba24bbfd8deaacad96a6aa1aa88b4dd1" class="nameRef">ESP_TOK_INCR</a>&nbsp;&nbsp;&nbsp;1024</td>
</tr>
<tr class="apiBrief"><td>&nbsp;</td><td>Growth increment for ESP tokens.</td></tr>
<tr class="apiDef">
<td>#define</td><td><a href="#esp_8h_1aaa20b3ba42a13818a076cb243333f8dd" class="nameRef">ESP_UNLOAD_TIMEOUT</a>&nbsp;&nbsp;&nbsp;(10)</td>
</tr>
<tr class="apiBrief"><td>&nbsp;</td><td>Very short timeout for reloading.</td></tr>
<tr class="apiDef">
<td>#define</td><td><a href="#esp_8h_1a83ac0bb3f3dacee229192dd9d52de9d7" class="nameRef">ME_ESP_ABBREV</a>&nbsp;&nbsp;&nbsp;1</td>
</tr>
<tr class="apiBrief"><td>&nbsp;</td><td>Enable the ESP Abbreviated API.</td></tr>
<tr class="apiDef">
<td>#define</td><td><a href="#esp_8h_1a127996447ce859e8cd9a792090171d1f" class="nameRef">ME_ESP_EMAIL_TIMEOUT</a>&nbsp;&nbsp;&nbsp;(60 * 1000)</td>
</tr>
<tr class="apiBrief"><td>&nbsp;</td><td>Timeout for sending email.</td></tr>
<tr class="apiDef">
<td>#define</td><td><a href="#esp_8h_1a70054cf2427d6a3f1de5d4843046ef6b" class="nameRef">ME_ESP_RELOAD_TIMEOUT</a>&nbsp;&nbsp;&nbsp;(5 * 1000)</td>
</tr>
<tr class="apiBrief"><td>&nbsp;</td><td>Timeout for reloading esp modules.</td></tr>
  </table>
<h2>EspParse</h2>
<a name="group___esp_parse"></a>
<div class="api">
  <div class="prototype">EspParse</div>
  <div class="apiDetail">
<p>ESP page parser structure.</p>
    <dl><dt>See Also:</dt><dd>
    <a href="#struct_esp" class="ref">Esp</a></dd></dl>
  </div>
</div>
<h2>EspReq</h2>
<a name="group___esp_req"></a>
<div class="api">
  <div class="prototype">EspReq</div>
  <div class="apiDetail">
<p>ESP request structure.</p>
    <dl><dt><b>API</b> Stability:</dt><dd>Internal.</dd></dl>
    <dl><dt>See Also:</dt><dd>
    <a href="#struct_esp" class="ref">Esp</a></dd></dl>
    <dl><dt>Fields:</dt><dd>
    <table class="parameters" title="Parameters">
    <tr><td class="param">int</td><td><td>autoFinalize</td><td>
Request is or will be auto-finalized.
</td>
    <tr><td class="param">cchar *</td><td><td>commandLine</td><td>
Command line for compile/link.
</td>
    <tr><td class="param">void *</td><td><td>data</td><td>
Custom data for request (managed).
</td>
    <tr><td class="param">Edi *</td><td><td>edi</td><td>
Database for this request.
</td>
    <tr><td class="param"><a class="ref" href="#struct_esp">Esp</a> *</td><td><td>esp</td><td>
Convenient esp reference.
</td>
    <tr><td class="param"><a class="ref" href="#struct_mpr_hash" external="/Users/mob/dev/mpr/doc/api/mpr.dtags">MprHash</a> *</td><td><td>feedback</td><td>
Feedback messages.
</td>
    <tr><td class="param">int</td><td><td>lastDomID</td><td>
Last generated DOM ID.
</td>
    <tr><td class="param"><a class="ref" href="#struct_mpr_hash" external="/Users/mob/dev/mpr/doc/api/mpr.dtags">MprHash</a> *</td><td><td>lastFeedback</td><td>
Feedback messages from the last request.
</td>
    <tr><td class="param"><a class="ref" href="#group___http_stream_1gad583143fc934fa15f237b74102c31c4a" external="/Users/mob/dev/http/doc/api/http.dtags">HttpNotifier</a></td><td><td>notifier</td><td>
Http state change notification callback.
</td>
    <tr><td class="param">HttpRoute *</td><td><td>route</td><td>
Route reference.
</td>
    <tr><td class="param">int</td><td><td>sessionProbed</td><td>
Already probed for session store.
</td>
    <tr><td class="param">void *</td><td><td>staticData</td><td>
Custom data for request (unmanaged).
</td>
    </table></dd></dl>
  </div>
</div>
<a name="group___esp_req_1ga4f8a144e4388122909991a0402b92550"></a>
<div class="api">
  <div class="prototype">
    void
    espAddHeader
(<a href="http.html#group___http_stream" class="ref">HttpStream</a> *stream, <a href="osdep.html#group___osdep_1ga0f128c3e0c83721af0220c00554e9c4e" class="ref">cchar</a> *key, <a href="osdep.html#group___osdep_1ga0f128c3e0c83721af0220c00554e9c4e" class="ref">cchar</a> *fmt, ...)
  </div>
  <div class="apiDetail">
<p>Add a header to the transmission using a format string.</p>
    <dl><dt><b>Description</b>:</dt><dd>Add a header if it does not already exist.</dd></dl>
    <dl><dt>Parameters:</dt><dd>
    <table class="parameters" title="Parameters">
    <tr><td class="param">stream</td><td>HttpStream stream object.</td>
    <tr><td class="param">key</td><td>Http response header key.</td>
    <tr><td class="param">fmt</td><td>Printf style formatted string to use as the header key value.</td>
    <tr><td class="param">...</td><td>Arguments for fmt.</td>
    </table></dd></dl>
    <dl><dt><b>API</b> Stability:</dt><dd>Stable.</dd></dl>
    <dl><dt>See Also:</dt><dd>
    <a href="#struct_esp" class="ref">Esp</a></dd></dl>
  </div>
</div>
<a name="group___esp_req_1ga98fdeb62e229b97f5fe8049298d5c7fc"></a>
<div class="api">
  <div class="prototype">
    void
    espAddHeaderString
(<a href="http.html#group___http_stream" class="ref">HttpStream</a> *stream, <a href="osdep.html#group___osdep_1ga0f128c3e0c83721af0220c00554e9c4e" class="ref">cchar</a> *key, <a href="osdep.html#group___osdep_1ga0f128c3e0c83721af0220c00554e9c4e" class="ref">cchar</a> *value)
  </div>
  <div class="apiDetail">
<p>Add a header to the transmission.</p>
    <dl><dt><b>Description</b>:</dt><dd>Add a header if it does not already exist.</dd></dl>
    <dl><dt>Parameters:</dt><dd>
    <table class="parameters" title="Parameters">
    <tr><td class="param">stream</td><td>HttpStream stream object.</td>
    <tr><td class="param">key</td><td>Http response header key.</td>
    <tr><td class="param">value</td><td>Value to set for the header.</td>
    </table></dd></dl>
    <dl><dt><b>API</b> Stability:</dt><dd>Stable.</dd></dl>
    <dl><dt>See Also:</dt><dd>
    <a href="#struct_esp" class="ref">Esp</a></dd></dl>
  </div>
</div>
<a name="group___esp_req_1ga3824ffbe5db5e46d872aeb0adfdbaf65"></a>
<div class="api">
  <div class="prototype">
    void
    espAddParam
(<a href="http.html#group___http_stream" class="ref">HttpStream</a> *stream, <a href="osdep.html#group___osdep_1ga0f128c3e0c83721af0220c00554e9c4e" class="ref">cchar</a> *var, <a href="osdep.html#group___osdep_1ga0f128c3e0c83721af0220c00554e9c4e" class="ref">cchar</a> *value)
  </div>
  <div class="apiDetail">
<p>Add a request parameter value if it is not already defined.</p>
    <dl><dt>Parameters:</dt><dd>
    <table class="parameters" title="Parameters">
    <tr><td class="param">stream</td><td>HttpStream stream object.</td>
    <tr><td class="param">var</td><td>Name of the request parameter to set.</td>
    <tr><td class="param">value</td><td>Value to set.</td>
    </table></dd></dl>
    <dl><dt><b>API</b> Stability:</dt><dd>Stable.</dd></dl>
    <dl><dt>See Also:</dt><dd>
    <a href="#struct_esp" class="ref">Esp</a></dd></dl>
  </div>
</div>
<a name="group___esp_req_1ga3a999dbd5209ab0507ec697bb452eba9"></a>
<div class="api">
  <div class="prototype">
    void
    espAppendHeader
(<a href="http.html#group___http_stream" class="ref">HttpStream</a> *stream, <a href="osdep.html#group___osdep_1ga0f128c3e0c83721af0220c00554e9c4e" class="ref">cchar</a> *key, <a href="osdep.html#group___osdep_1ga0f128c3e0c83721af0220c00554e9c4e" class="ref">cchar</a> *fmt, ...)
  </div>
  <div class="apiDetail">
<p>Append a transmission header.</p>
    <dl><dt><b>Description</b>:</dt><dd>Set the header if it does not already exist. Append with a &quot;, &quot; separator if the header already exists.</dd></dl>
    <dl><dt>Parameters:</dt><dd>
    <table class="parameters" title="Parameters">
    <tr><td class="param">stream</td><td>HttpStream stream object.</td>
    <tr><td class="param">key</td><td>Http response header key.</td>
    <tr><td class="param">fmt</td><td>Printf style formatted string to use as the header key value.</td>
    <tr><td class="param">...</td><td>Arguments for fmt.</td>
    </table></dd></dl>
    <dl><dt><b>API</b> Stability:</dt><dd>Stable.</dd></dl>
    <dl><dt>See Also:</dt><dd>
    <a href="#struct_esp" class="ref">Esp</a></dd></dl>
  </div>
</div>
<a name="group___esp_req_1gadc294b278fde028e375f3a43e8da4ffc"></a>
<div class="api">
  <div class="prototype">
    void
    espAppendHeaderString
(<a href="http.html#group___http_stream" class="ref">HttpStream</a> *stream, <a href="osdep.html#group___osdep_1ga0f128c3e0c83721af0220c00554e9c4e" class="ref">cchar</a> *key, <a href="osdep.html#group___osdep_1ga0f128c3e0c83721af0220c00554e9c4e" class="ref">cchar</a> *value)
  </div>
  <div class="apiDetail">
<p>Append a transmission header string.</p>
    <dl><dt><b>Description</b>:</dt><dd>Set the header if it does not already exist. Append with a &quot;, &quot; separator if the header already exists.</dd></dl>
    <dl><dt>Parameters:</dt><dd>
    <table class="parameters" title="Parameters">
    <tr><td class="param">stream</td><td>HttpStream stream object.</td>
    <tr><td class="param">key</td><td>Http response header key.</td>
    <tr><td class="param">value</td><td>Value to set for the header.</td>
    </table></dd></dl>
    <dl><dt><b>API</b> Stability:</dt><dd>Stable.</dd></dl>
    <dl><dt>See Also:</dt><dd>
    <a href="#struct_esp" class="ref">Esp</a></dd></dl>
  </div>
</div>
<a name="group___esp_req_1ga343d565150be797bbcfbf67a3ef98bb5"></a>
<div class="api">
  <div class="prototype">
    void
    espAutoFinalize
(<a href="http.html#group___http_stream" class="ref">HttpStream</a> *stream)
  </div>
  <div class="apiDetail">
<p>Auto-finalize transmission of the http request.</p>
    <dl><dt><b>Description</b>:</dt><dd>If auto-finalization is enabled via <a class="ref" href="#group___esp_req_1gade4f16e9df197e729243386fb4adf9b5">espSetAutoFinalizing</a>, this call will finalize writing Http response data by writing the final chunk trailer if required. If using chunked transfers, a null chunk trailer is required to signify the end of write data. If the request is already finalized, this call does nothing.</dd></dl>
    <dl><dt>Parameters:</dt><dd>
    <table class="parameters" title="Parameters">
    <tr><td class="param">stream</td><td>HttpStream stream object.</td>
    </table></dd></dl>
    <dl><dt><b>API</b> Stability:</dt><dd>Stable.</dd></dl>
    <dl><dt>See Also:</dt><dd>
    <a href="#struct_esp" class="ref">Esp</a></dd></dl>
  </div>
</div>
<a name="group___esp_req_1gadeac99cba2f4655c6ae0e8c108646e90"></a>
<div class="api">
  <div class="prototype">
    void
    espClearCurrentSession
(<a href="http.html#group___http_stream" class="ref">HttpStream</a> *stream)
  </div>
  <div class="apiDetail">
<p>Clear the current authenticated session.</p>
    <dl><dt><b>API</b> Stability:</dt><dd>Stable.</dd></dl>
    <dl><dt>See Also:</dt><dd>
    <a href="#struct_esp" class="ref">Esp</a></dd></dl>
  </div>
</div>
<a name="group___esp_req_1ga57e9d8b8f378b9e142b0291221ff2b16"></a>
<div class="api">
  <div class="prototype">
    <a href="osdep.html#group___osdep_1ga0f128c3e0c83721af0220c00554e9c4e" class="ref">cchar</a> *
    * espCreateSession
(<a href="http.html#group___http_stream" class="ref">HttpStream</a> *stream)
  </div>
  <div class="apiDetail">
<p>Create a session state object.</p>
    <dl><dt><b>Description</b>:</dt><dd>The session state object can be used to share state between requests. If a session has not already been created, this call will create a new session. It will create a response cookie containing a session ID that will be sent to the client with the response. Note: Objects are stored in the session state using JSON serialization.</dd></dl>
    <dl><dt>Parameters:</dt><dd>
    <table class="parameters" title="Parameters">
    <tr><td class="param">stream</td><td>HttpStream stream object.</td>
    </table></dd></dl>
    <dl><dt>Returns:</dt><dd>Session ID string.</dd></dl>
    <dl><dt><b>API</b> Stability:</dt><dd>Stable.</dd></dl>
    <dl><dt>See Also:</dt><dd>
    <a href="#struct_esp" class="ref">Esp</a></dd></dl>
  </div>
</div>
<a name="group___esp_req_1ga49dfd97fc85a367ccf7d146454b52cbc"></a>
<div class="api">
  <div class="prototype">
    void
    espDestroySession
(<a href="http.html#group___http_stream" class="ref">HttpStream</a> *stream)
  </div>
  <div class="apiDetail">
<p>Destroy a session state object.</p>
    <dl><dt><b>Description</b>:</dt><dd>This will destroy the server-side session state and emit an expired cookie to the client to force it to erase the session cookie.</dd></dl>
    <dl><dt>Parameters:</dt><dd>
    <table class="parameters" title="Parameters">
    <tr><td class="param">stream</td><td>HttpStream stream object.</td>
    </table></dd></dl>
    <dl><dt><b>API</b> Stability:</dt><dd>Stable.</dd></dl>
    <dl><dt>See Also:</dt><dd>
    <a href="#struct_esp" class="ref">Esp</a></dd></dl>
  </div>
</div>
<a name="group___esp_req_1gafa8c60c6ae199dd31fa92c4dbbaa7c2d"></a>
<div class="api">
  <div class="prototype">
    void
    espFinalize
(<a href="http.html#group___http_stream" class="ref">HttpStream</a> *stream)
  </div>
  <div class="apiDetail">
<p>Indicate the request is finalized.</p>
    <dl><dt><b>Description</b>:</dt><dd>Calling this routine indicates that the handler has fully finished processing the request including processing all input, generating a full response and any other required processing. This call will invoke <a class="ref" href="#group___http_tx_1ga848477a87a2c69d2785d8573019a2802" external="/Users/mob/dev/http/doc/api/http.dtags">httpFinalizeOutput</a> and then set the request finalized flag. If the request is already finalized, this call does nothing. A handler MUST call httpFinalize when it has completed processing a request. As background: there are three finalize concepts: HttpTx.finalizedOutput means the handler has generated all the response output but it may not yet be fully transmited through the pipeline and to the network by the connector. HttpTx.finalizedConnector means the connector has sent all the output to the network. HttpTx.finalized means the application has fully processed the request including reading all the input data it wishes to read and has generated all the output that will be generated. A fully finalized request has both HttpTx.finalized and HttpTx.finalizedConnector true.</dd></dl>
    <dl><dt>Parameters:</dt><dd>
    <table class="parameters" title="Parameters">
    <tr><td class="param">stream</td><td>HttpStream stream object.</td>
    </table></dd></dl>
    <dl><dt><b>API</b> Stability:</dt><dd>Stable.</dd></dl>
    <dl><dt>See Also:</dt><dd>
    <a href="#struct_esp" class="ref">Esp</a></dd></dl>
  </div>
</div>
<a name="group___esp_req_1ga117d4806f7e97f74d2803065bb7f69f3"></a>
<div class="api">
  <div class="prototype">
    void
    espFlush
(<a href="http.html#group___http_stream" class="ref">HttpStream</a> *stream)
  </div>
  <div class="apiDetail">
<p>Flush transmit data.</p>
    <dl><dt><b>Description</b>:</dt><dd>This writes any buffered data and initiates writing to the peer. This will not block.</dd></dl>
    <dl><dt>Parameters:</dt><dd>
    <table class="parameters" title="Parameters">
    <tr><td class="param">stream</td><td>HttpStream stream object.</td>
    </table></dd></dl>
    <dl><dt><b>API</b> Stability:</dt><dd>Stable.</dd></dl>
    <dl><dt>See Also:</dt><dd>
    <a href="#struct_esp" class="ref">Esp</a></dd></dl>
  </div>
</div>
<a name="group___esp_req_1gadae2ae5eea0f9ee61e16476257155600"></a>
<div class="api">
  <div class="prototype">
    <a href="http.html#group___http_auth" class="ref">HttpAuth</a> *
    * espGetAuth
(<a href="http.html#group___http_stream" class="ref">HttpStream</a> *stream)
  </div>
  <div class="apiDetail">
<p>Get the current route HttpAuth object.</p>
    <dl><dt>Parameters:</dt><dd>
    <table class="parameters" title="Parameters">
    <tr><td class="param">stream</td><td>HttpStream stream object.</td>
    </table></dd></dl>
    <dl><dt>Returns:</dt><dd>The HttpAuth object.</dd></dl>
    <dl><dt><b>API</b> Stability:</dt><dd>Stable.</dd></dl>
    <dl><dt>See Also:</dt><dd>
    <a href="#struct_esp" class="ref">Esp</a></dd></dl>
  </div>
</div>
<a name="group___esp_req_1ga8428a4283b20243796432100eba44e58"></a>
<div class="api">
  <div class="prototype">
    <a href="mpr.html#mpr_8h_1a87e9f435008723c7b1489af1944c6e20" class="ref">MprOff</a>
    espGetContentLength
(<a href="http.html#group___http_stream" class="ref">HttpStream</a> *stream)
  </div>
  <div class="apiDetail">
<p>Get the receive body content length.</p>
    <dl><dt><b>Description</b>:</dt><dd>Get the length of the receive body content (if any). This is used in servers to get the length of posted data and, in clients, to get the response body length.</dd></dl>
    <dl><dt>Parameters:</dt><dd>
    <table class="parameters" title="Parameters">
    <tr><td class="param">stream</td><td>HttpStream stream object.</td>
    </table></dd></dl>
    <dl><dt>Returns:</dt><dd>A count of the response content data in bytes.</dd></dl>
    <dl><dt><b>API</b> Stability:</dt><dd>Stable.</dd></dl>
    <dl><dt>See Also:</dt><dd>
    <a href="#struct_esp" class="ref">Esp</a></dd></dl>
  </div>
</div>
<a name="group___esp_req_1ga586861878e43266fa526ef44674a0b68"></a>
<div class="api">
  <div class="prototype">
    <a href="osdep.html#group___osdep_1ga0f128c3e0c83721af0220c00554e9c4e" class="ref">cchar</a> *
    * espGetContentType
(<a href="http.html#group___http_stream" class="ref">HttpStream</a> *stream)
  </div>
  <div class="apiDetail">
<p>Get the receive body content type.</p>
    <dl><dt><b>Description</b>:</dt><dd>Get the content mime type of the receive body content (if any).</dd></dl>
    <dl><dt>Parameters:</dt><dd>
    <table class="parameters" title="Parameters">
    <tr><td class="param">stream</td><td>HttpStream stream object.</td>
    </table></dd></dl>
    <dl><dt>Returns:</dt><dd>Mime type of any receive content. Set to NULL if not posted data.</dd></dl>
    <dl><dt><b>API</b> Stability:</dt><dd>Stable.</dd></dl>
    <dl><dt>See Also:</dt><dd>
    <a href="#struct_esp" class="ref">Esp</a></dd></dl>
  </div>
</div>
<a name="group___esp_req_1ga16b8a88a0dfd2f5396ef0e49152b0312"></a>
<div class="api">
  <div class="prototype">
    <a href="osdep.html#group___osdep_1ga0f128c3e0c83721af0220c00554e9c4e" class="ref">cchar</a> *
    * espGetCookie
(<a href="http.html#group___http_stream" class="ref">HttpStream</a> *stream, <a href="osdep.html#group___osdep_1ga0f128c3e0c83721af0220c00554e9c4e" class="ref">cchar</a> *name)
  </div>
  <div class="apiDetail">
<p>Get a request cookie.</p>
    <dl><dt><b>Description</b>:</dt><dd>Get the cookie for the given name.</dd></dl>
    <dl><dt>Parameters:</dt><dd>
    <table class="parameters" title="Parameters">
    <tr><td class="param">stream</td><td>HttpStream stream object.</td>
    <tr><td class="param">name</td><td>Cookie name to retrieve.</td>
    </table></dd></dl>
    <dl><dt>Returns:</dt><dd>The cookie value Return null if the cookie is not defined.</dd></dl>
    <dl><dt><b>API</b> Stability:</dt><dd>Stable.</dd></dl>
    <dl><dt>See Also:</dt><dd>
    <a href="#struct_esp" class="ref">Esp</a></dd></dl>
  </div>
</div>
<a name="group___esp_req_1ga14eb020f49b227cee4ce01a6f44d8106"></a>
<div class="api">
  <div class="prototype">
    <a href="osdep.html#group___osdep_1ga0f128c3e0c83721af0220c00554e9c4e" class="ref">cchar</a> *
    * espGetCookies
(<a href="http.html#group___http_stream" class="ref">HttpStream</a> *stream)
  </div>
  <div class="apiDetail">
<p>Get the request cookies.</p>
    <dl><dt><b>Description</b>:</dt><dd>Get the cookies defined in the current request. This returns the HTTP cookies header with all cookies in one string.</dd></dl>
    <dl><dt>Parameters:</dt><dd>
    <table class="parameters" title="Parameters">
    <tr><td class="param">stream</td><td>HttpStream stream object.</td>
    </table></dd></dl>
    <dl><dt>Returns:</dt><dd>Return a string containing the cookies sent in the Http header of the last request.</dd></dl>
    <dl><dt><b>API</b> Stability:</dt><dd>Stable.</dd></dl>
    <dl><dt>See Also:</dt><dd>
    <a href="#struct_esp" class="ref">Esp</a></dd></dl>
  </div>
</div>
<a name="group___esp_req_1ga5865e351cceb4f52ea71424946c893bc"></a>
<div class="api">
  <div class="prototype">
    void *
    * espGetData
(<a href="http.html#group___http_stream" class="ref">HttpStream</a> *stream)
  </div>
  <div class="apiDetail">
<p>Get the private data reference for the current request set via setData.</p>
    <dl><dt>Parameters:</dt><dd>
    <table class="parameters" title="Parameters">
    <tr><td class="param">stream</td><td>HttpStream object.</td>
    </table></dd></dl>
    <dl><dt><b>API</b> Stability:</dt><dd>Stable.</dd></dl>
    <dl><dt>See Also:</dt><dd>
    <a href="#struct_esp" class="ref">Esp</a></dd></dl>
  </div>
</div>
<a name="group___esp_req_1ga8da27be8120b260cf9128c06e928c4ba"></a>
<div class="api">
  <div class="prototype">
    <a href="edi.html#group___edi" class="ref">Edi</a> *
    * espGetDatabase
(<a href="http.html#group___http_stream" class="ref">HttpStream</a> *stream)
  </div>
  <div class="apiDetail">
<p>Get the current database instance.</p>
    <dl><dt><b>Description</b>:</dt><dd>A route may have a default database configured via the EspDb Appweb.conf configuration directive. The database will be opened when the web server initializes and will be shared between all requests using the route.</dd></dl>
    <dl><dt>Returns:</dt><dd>Edi EDI database handle.</dd></dl>
    <dl><dt><b>API</b> Stability:</dt><dd>Stable.</dd></dl>
    <dl><dt>See Also:</dt><dd>
    <a href="#struct_esp" class="ref">Esp</a></dd></dl>
  </div>
</div>
<a name="group___esp_req_1gaf2207f27d7f38c0c7ddc63a4972c8f64"></a>
<div class="api">
  <div class="prototype">
    <a href="osdep.html#group___osdep_1ga0f128c3e0c83721af0220c00554e9c4e" class="ref">cchar</a> *
    * espGetDocuments
(<a href="http.html#group___http_stream" class="ref">HttpStream</a> *stream)
  </div>
  <div class="apiDetail">
<p>Get the default documents directory for the request route.</p>
    <dl><dt>Parameters:</dt><dd>
    <table class="parameters" title="Parameters">
    <tr><td class="param">stream</td><td>HttpStream stream object.</td>
    </table></dd></dl>
    <dl><dt>Returns:</dt><dd>A directory path name.</dd></dl>
    <dl><dt><b>API</b> Stability:</dt><dd>Stable.</dd></dl>
    <dl><dt>See Also:</dt><dd>
    <a href="#struct_esp" class="ref">Esp</a></dd></dl>
  </div>
</div>
<a name="group___esp_req_1ga4deb6b39d025c58bef586d5d23c09f0d"></a>
<div class="api">
  <div class="prototype">
    <a href="#group___esp_route" class="ref">EspRoute</a> *
    * espGetEspRoute
(<a href="http.html#group___http_stream" class="ref">HttpStream</a> *stream)
  </div>
  <div class="apiDetail">
<p>Get the current extended route information.</p>
    <dl><dt>Returns:</dt><dd>EspRoute instance.</dd></dl>
    <dl><dt><b>API</b> Stability:</dt><dd>Stable.</dd></dl>
    <dl><dt>See Also:</dt><dd>
    <a href="#struct_esp" class="ref">Esp</a></dd></dl>
  </div>
</div>
<a name="group___esp_req_1gabb29826c28bfabba639cf6cbab8f4248"></a>
<div class="api">
  <div class="prototype">
    <a href="osdep.html#group___osdep_1ga0f128c3e0c83721af0220c00554e9c4e" class="ref">cchar</a> *
    * espGetFeedback
(<a href="http.html#group___http_stream" class="ref">HttpStream</a> *stream, <a href="osdep.html#group___osdep_1ga0f128c3e0c83721af0220c00554e9c4e" class="ref">cchar</a> *type)
  </div>
  <div class="apiDetail">
<p>Get a feedback message defined via feedback.</p>
    <dl><dt>Parameters:</dt><dd>
    <table class="parameters" title="Parameters">
    <tr><td class="param">stream</td><td>HttpStream object.</td>
    <tr><td class="param">type</td><td>type of feedback message to retrieve. This may be set to any word, but the following feedback types are typically supported as per RFC 5424: &quot;debug&quot;, &quot;info&quot;, &quot;notice&quot;, &quot;warn&quot;, &quot;error&quot;, &quot;critical&quot;.</td>
    </table></dd></dl>
    <dl><dt>Returns:</dt><dd>Reference to the feedback message.</dd></dl>
    <dl><dt><b>API</b> Stability:</dt><dd>Stable.</dd></dl>
    <dl><dt>See Also:</dt><dd>
    <a href="#struct_esp" class="ref">Esp</a></dd></dl>
  </div>
</div>
<a name="group___esp_req_1ga2d3407b93aba291894cf9faec7823b1d"></a>
<div class="api">
  <div class="prototype">
    <a href="edi.html#group___edi_grid" class="ref">EdiGrid</a> *
    * espGetGrid
(<a href="http.html#group___http_stream" class="ref">HttpStream</a> *stream)
  </div>
  <div class="apiDetail">
<p>Get the current database grid reference.</p>
    <dl><dt><b>Description</b>:</dt><dd>The current grid is defined via setGrid.</dd></dl>
    <dl><dt>Returns:</dt><dd>EdiGrid instance.</dd></dl>
    <dl><dt><b>API</b> Stability:</dt><dd>Deprecated.</dd></dl>
    <dl><dt>See Also:</dt><dd>
    <a href="#struct_esp" class="ref">Esp</a></dd></dl>
  </div>
</div>
<a name="group___esp_req_1ga55166a9390a6764f71d22334b6f4261f"></a>
<div class="api">
  <div class="prototype">
    <a href="osdep.html#group___osdep_1ga0f128c3e0c83721af0220c00554e9c4e" class="ref">cchar</a> *
    * espGetHeader
(<a href="http.html#group___http_stream" class="ref">HttpStream</a> *stream, <a href="osdep.html#group___osdep_1ga0f128c3e0c83721af0220c00554e9c4e" class="ref">cchar</a> *key)
  </div>
  <div class="apiDetail">
<p>Get an rx http header.</p>
    <dl><dt><b>Description</b>:</dt><dd>Get a http response header for a given header key.</dd></dl>
    <dl><dt>Parameters:</dt><dd>
    <table class="parameters" title="Parameters">
    <tr><td class="param">stream</td><td>HttpStream stream object.</td>
    <tr><td class="param">key</td><td>Name of the header to retrieve. This should be a lower case header name. For example: &quot;Connection&quot;.</td>
    </table></dd></dl>
    <dl><dt>Returns:</dt><dd>Value associated with the header key or null if the key did not exist in the response.</dd></dl>
    <dl><dt><b>API</b> Stability:</dt><dd>Stable.</dd></dl>
    <dl><dt>See Also:</dt><dd>
    <a href="#struct_esp" class="ref">Esp</a></dd></dl>
  </div>
</div>
<a name="group___esp_req_1gaacbdf7a3620ff21d9494e5134173fa14"></a>
<div class="api">
  <div class="prototype">
    <a href="mpr.html#struct_mpr_hash" class="ref">MprHash</a> *
    * espGetHeaderHash
(<a href="http.html#group___http_stream" class="ref">HttpStream</a> *stream)
  </div>
  <div class="apiDetail">
<p>Get the hash table of rx Http headers.</p>
    <dl><dt><b>Description</b>:</dt><dd>Get the internal hash table of rx headers.</dd></dl>
    <dl><dt>Parameters:</dt><dd>
    <table class="parameters" title="Parameters">
    <tr><td class="param">stream</td><td>HttpStream stream object.</td>
    </table></dd></dl>
    <dl><dt>Returns:</dt><dd>Hash table. See <a class="ref" href="#struct_mpr_hash" external="/Users/mob/dev/mpr/doc/api/mpr.dtags">MprHash</a> for how to access the hash table.</dd></dl>
    <dl><dt><b>API</b> Stability:</dt><dd>Stable.</dd></dl>
    <dl><dt>See Also:</dt><dd>
    <a href="#struct_esp" class="ref">Esp</a></dd></dl>
  </div>
</div>
<a name="group___esp_req_1gaa1f4c2b82170859379130673d16b9976"></a>
<div class="api">
  <div class="prototype">
    char *
    * espGetHeaders
(<a href="http.html#group___http_stream" class="ref">HttpStream</a> *stream)
  </div>
  <div class="apiDetail">
<p>Get all the request http headers.</p>
    <dl><dt><b>Description</b>:</dt><dd>Get all the rx headers. The returned string formats all the headers in the form: key: value\nkey2: value2\n.</dd></dl>
    <dl><dt>Parameters:</dt><dd>
    <table class="parameters" title="Parameters">
    <tr><td class="param">stream</td><td>HttpStream stream object.</td>
    </table></dd></dl>
    <dl><dt>Returns:</dt><dd>String containing all the headers. The caller must free this returned string.</dd></dl>
    <dl><dt><b>API</b> Stability:</dt><dd>Stable.</dd></dl>
    <dl><dt>See Also:</dt><dd>
    <a href="#struct_esp" class="ref">Esp</a></dd></dl>
  </div>
</div>
<a name="group___esp_req_1ga8c516f5c15f5610e38c7a2c8f37f28cc"></a>
<div class="api">
  <div class="prototype">
    int
    espGetIntParam
(<a href="http.html#group___http_stream" class="ref">HttpStream</a> *stream, <a href="osdep.html#group___osdep_1ga0f128c3e0c83721af0220c00554e9c4e" class="ref">cchar</a> *var, int defaultValue)
  </div>
  <div class="apiDetail">
<p>Get a request pararmeter as an integer.</p>
    <dl><dt><b>Description</b>:</dt><dd>Get the value of a named request parameter. Request parameters are defined via www-urlencoded query, post data contained in the request and route parameters. Request parameters are stored as JSON tree objects and may contain nested properties.</dd></dl>
    <dl><dt>Parameters:</dt><dd>
    <table class="parameters" title="Parameters">
    <tr><td class="param">stream</td><td>HttpStream stream object.</td>
    <tr><td class="param">var</td><td>Name of the request parameter to retrieve.</td>
    <tr><td class="param">defaultValue</td><td>Default value to return if the variable is not defined. Can be null.</td>
    </table></dd></dl>
    <dl><dt>Returns:</dt><dd>Integer containing the request parameter&apos;s value.</dd></dl>
    <dl><dt><b>API</b> Stability:</dt><dd>Stable.</dd></dl>
    <dl><dt>See Also:</dt><dd>
    <a href="#struct_esp" class="ref">Esp</a></dd></dl>
  </div>
</div>
<a name="group___esp_req_1ga2c7910b773f2ba46690dacfce18883eb"></a>
<div class="api">
  <div class="prototype">
    <a href="osdep.html#group___osdep_1ga0f128c3e0c83721af0220c00554e9c4e" class="ref">cchar</a> *
    * espGetMethod
(<a href="http.html#group___http_stream" class="ref">HttpStream</a> *stream)
  </div>
  <div class="apiDetail">
<p>Get the HTTP method.</p>
    <dl><dt><b>Description</b>:</dt><dd>This is a convenience API to return the Http method.</dd></dl>
    <dl><dt>Returns:</dt><dd>The HttpStream.rx.method property.</dd></dl>
    <dl><dt><b>API</b> Stability:</dt><dd>Stable.</dd></dl>
    <dl><dt>See Also:</dt><dd>
    <a href="#struct_esp" class="ref">Esp</a></dd></dl>
  </div>
</div>
<a name="group___esp_req_1ga7fa102e12c3f6459a7cd937bcef00e7e"></a>
<div class="api">
  <div class="prototype">
    <a href="osdep.html#group___osdep_1ga0f128c3e0c83721af0220c00554e9c4e" class="ref">cchar</a> *
    * espGetParam
(<a href="http.html#group___http_stream" class="ref">HttpStream</a> *stream, <a href="osdep.html#group___osdep_1ga0f128c3e0c83721af0220c00554e9c4e" class="ref">cchar</a> *var, <a href="osdep.html#group___osdep_1ga0f128c3e0c83721af0220c00554e9c4e" class="ref">cchar</a> *defaultValue)
  </div>
  <div class="apiDetail">
<p>Get a request parameter.</p>
    <dl><dt><b>Description</b>:</dt><dd>Get the value of a named request parameter. Request parameters are defined via www-urlencoded query, post data contained in the request and route parameters. Route parameters are stored as JSON tree objects and may contain nested properties.</dd></dl>
    <dl><dt>Parameters:</dt><dd>
    <table class="parameters" title="Parameters">
    <tr><td class="param">stream</td><td>HttpStream stream object.</td>
    <tr><td class="param">var</td><td>Name of the request parameter to retrieve.</td>
    <tr><td class="param">defaultValue</td><td>Default value to return if the variable is not defined. Can be null.</td>
    </table></dd></dl>
    <dl><dt>Returns:</dt><dd>String containing the request parameter&apos;s value. Caller should not free.</dd></dl>
    <dl><dt><b>API</b> Stability:</dt><dd>Stable.</dd></dl>
    <dl><dt>See Also:</dt><dd>
    <a href="#struct_esp" class="ref">Esp</a></dd></dl>
  </div>
</div>
<a name="group___esp_req_1gaa8e42a2cef0c9baf1f70081756ed2558"></a>
<div class="api">
  <div class="prototype">
    <a href="mpr.html#group___mpr_json" class="ref">MprJson</a> *
    * espGetParamObj
(<a href="http.html#group___http_stream" class="ref">HttpStream</a> *stream, <a href="osdep.html#group___osdep_1ga0f128c3e0c83721af0220c00554e9c4e" class="ref">cchar</a> *var)
  </div>
  <div class="apiDetail">
<p>Get a request pararmeter as a JSON object.</p>
    <dl><dt><b>Description</b>:</dt><dd>Get the value of a named request parameter. Request parameters are defined via www-urlencoded query, post data contained in the request and route parameters. Request parameters are stored as JSON tree objects and may contain nested properties.</dd></dl>
    <dl><dt>Parameters:</dt><dd>
    <table class="parameters" title="Parameters">
    <tr><td class="param">stream</td><td>HttpStream stream object.</td>
    <tr><td class="param">var</td><td>Name of the request parameter to retrieve.</td>
    </table></dd></dl>
    <dl><dt>Returns:</dt><dd>JSON parameter object.</dd></dl>
    <dl><dt><b>API</b> Stability:</dt><dd>Stable.</dd></dl>
    <dl><dt>See Also:</dt><dd>
    <a href="#struct_esp" class="ref">Esp</a></dd></dl>
  </div>
</div>
<a name="group___esp_req_1gac396be6071893fbb7c911ca900b133fd"></a>
<div class="api">
  <div class="prototype">
    <a href="mpr.html#group___mpr_json" class="ref">MprJson</a> *
    * espGetParams
(<a href="http.html#group___http_stream" class="ref">HttpStream</a> *stream)
  </div>
  <div class="apiDetail">
<p>Get the request parameters.</p>
    <dl><dt><b>Description</b>:</dt><dd>This call gets the request parameters for the current request.</dd></dl>
    <dl><dt><b>Description</b>:</dt><dd>Request parameters are defined via www-urlencoded query, post data contained in the request and route parameters. Request parameters are stored as JSON tree objects and may contain nested properties.</dd></dl>
    <dl><dt>Parameters:</dt><dd>
    <table class="parameters" title="Parameters">
    <tr><td class="param">stream</td><td>HttpStream stream object.</td>
    </table></dd></dl>
    <dl><dt>Returns:</dt><dd>MprJson instance containing the request parameters.</dd></dl>
    <dl><dt><b>API</b> Stability:</dt><dd>Stable.</dd></dl>
    <dl><dt>See Also:</dt><dd>
    <a href="#struct_esp" class="ref">Esp</a></dd></dl>
  </div>
</div>
<a name="group___esp_req_1ga6c01218c942727d853bb13222ee2ad40"></a>
<div class="api">
  <div class="prototype">
    <a href="osdep.html#group___osdep_1ga0f128c3e0c83721af0220c00554e9c4e" class="ref">cchar</a> *
    * espGetPath
(<a href="http.html#group___http_stream" class="ref">HttpStream</a> *stream)
  </div>
  <div class="apiDetail">
<p>Get the request URI path string.</p>
    <dl><dt><b>Description</b>:</dt><dd>This is a convenience API to return the request URI path. This is the request URI path after removing query parameters. It does not include the application route prefix.</dd></dl>
    <dl><dt>Returns:</dt><dd>The <a class="ref" href="#group___esp_req_1gad2e6be70f61174f11ac68c5ee52e0462">espGetStream()</a>-&gt;rx-&gt;pathInfo.</dd></dl>
    <dl><dt><b>API</b> Stability:</dt><dd>Stable.</dd></dl>
    <dl><dt>See Also:</dt><dd>
    <a href="#struct_esp" class="ref">Esp</a></dd></dl>
  </div>
</div>
<a name="group___esp_req_1gab8a6e6a859f2a8b42bdd7e6b28a92803"></a>
<div class="api">
  <div class="prototype">
    <a href="osdep.html#group___osdep_1ga0f128c3e0c83721af0220c00554e9c4e" class="ref">cchar</a> *
    * espGetQueryString
(<a href="http.html#group___http_stream" class="ref">HttpStream</a> *stream)
  </div>
  <div class="apiDetail">
<p>Get the request URI query string.</p>
    <dl><dt><b>Description</b>:</dt><dd>Get URI query string sent with the current request.</dd></dl>
    <dl><dt>Parameters:</dt><dd>
    <table class="parameters" title="Parameters">
    <tr><td class="param">stream</td><td>HttpStream stream object.</td>
    </table></dd></dl>
    <dl><dt>Returns:</dt><dd>String containing the request query string. Caller should not free.</dd></dl>
    <dl><dt><b>API</b> Stability:</dt><dd>Stable.</dd></dl>
    <dl><dt>See Also:</dt><dd>
    <a href="#struct_esp" class="ref">Esp</a></dd></dl>
  </div>
</div>
<a name="group___esp_req_1gaa93ec0ce3050ebc361003b017f8f7ecc"></a>
<div class="api">
  <div class="prototype">
    <a href="osdep.html#group___osdep_1ga0f128c3e0c83721af0220c00554e9c4e" class="ref">cchar</a> *
    * espGetReferrer
(<a href="http.html#group___http_stream" class="ref">HttpStream</a> *stream)
  </div>
  <div class="apiDetail">
<p>Get the referring URI.</p>
    <dl><dt><b>Description</b>:</dt><dd>This returns the referring URI as described in the HTTP &quot;referer&quot; (yes the HTTP specification does spell it incorrectly) header. If this header is not defined, this routine will return the home URI as returned by uri(&quot;~&quot;).</dd></dl>
    <dl><dt>Parameters:</dt><dd>
    <table class="parameters" title="Parameters">
    <tr><td class="param">stream</td><td>HttpStream stream object.</td>
    </table></dd></dl>
    <dl><dt>Returns:</dt><dd>String URI back to the referring URI. If no referrer is defined, refers to the home URI.</dd></dl>
    <dl><dt><b>API</b> Stability:</dt><dd>Stable.</dd></dl>
    <dl><dt>See Also:</dt><dd>
    <a href="#struct_esp" class="ref">Esp</a></dd></dl>
  </div>
</div>
<a name="group___esp_req_1ga30c1f8dca033aa2093998cf0093e8708"></a>
<div class="api">
  <div class="prototype">
    <a href="http.html#group___http_route" class="ref">HttpRoute</a> *
    * espGetRoute
(<a href="http.html#group___http_stream" class="ref">HttpStream</a> *stream)
  </div>
  <div class="apiDetail">
<p>Get the current route HttpRoute object.</p>
    <dl><dt>Parameters:</dt><dd>
    <table class="parameters" title="Parameters">
    <tr><td class="param">stream</td><td>HttpStream stream object.</td>
    </table></dd></dl>
    <dl><dt>Returns:</dt><dd>The HttpRoute object.</dd></dl>
    <dl><dt><b>API</b> Stability:</dt><dd>Stable.</dd></dl>
    <dl><dt>See Also:</dt><dd>
    <a href="#struct_esp" class="ref">Esp</a></dd></dl>
  </div>
</div>
<a name="group___esp_req_1ga31a63865f5ac3a4b97e793a69649de45"></a>
<div class="api">
  <div class="prototype">
    <a href="edi.html#group___edi" class="ref">Edi</a> *
    * espGetRouteDatabase
(<a href="http.html#group___http_route" class="ref">HttpRoute</a> *route)
  </div>
  <div class="apiDetail">
<p>Get the default database defined on a route.</p>
    <dl><dt>Parameters:</dt><dd>
    <table class="parameters" title="Parameters">
    <tr><td class="param">route</td><td>HttpRoute object.</td>
    </table></dd></dl>
    <dl><dt>Returns:</dt><dd>Database instance object.</dd></dl>
    <dl><dt><b>API</b> Stability:</dt><dd>Stable.</dd></dl>
    <dl><dt>See Also:</dt><dd>
    <a href="#struct_esp" class="ref">Esp</a></dd></dl>
  </div>
</div>
<a name="group___esp_req_1gaa4674c619719ff1487bf9258b05c9794"></a>
<div class="api">
  <div class="prototype">
    <a href="osdep.html#group___osdep_1ga0f128c3e0c83721af0220c00554e9c4e" class="ref">cchar</a> *
    * espGetRouteVar
(<a href="http.html#group___http_stream" class="ref">HttpStream</a> *stream, <a href="osdep.html#group___osdep_1ga0f128c3e0c83721af0220c00554e9c4e" class="ref">cchar</a> *var)
  </div>
  <div class="apiDetail">
<p>Get a route variable.</p>
    <dl><dt><b>Description</b>:</dt><dd>Get the value of a request route variable.</dd></dl>
    <dl><dt>Parameters:</dt><dd>
    <table class="parameters" title="Parameters">
    <tr><td class="param">stream</td><td>HttpStream stream object.</td>
    <tr><td class="param">var</td><td>Name of the request parameter to retrieve.</td>
    </table></dd></dl>
    <dl><dt>Returns:</dt><dd>String containing the route variable value. Caller should not free.</dd></dl>
    <dl><dt><b>API</b> Stability:</dt><dd>Stable.</dd></dl>
    <dl><dt>See Also:</dt><dd>
    <a href="#struct_esp" class="ref">Esp</a></dd></dl>
  </div>
</div>
<a name="group___esp_req_1ga51e835444417ad26d3cde665b875b535"></a>
<div class="api">
  <div class="prototype">
    <a href="osdep.html#group___osdep_1ga0f128c3e0c83721af0220c00554e9c4e" class="ref">cchar</a> *
    * espGetSessionID
(<a href="http.html#group___http_stream" class="ref">HttpStream</a> *stream, int create)
  </div>
  <div class="apiDetail">
<p>Get the session state ID.</p>
    <dl><dt><b>Description</b>:</dt><dd>This will get the session and return the session ID. This will create a new session state storage area if create is true and one does not already exist. This can be used to test if the session state exists for this stream.</dd></dl>
    <dl><dt>Parameters:</dt><dd>
    <table class="parameters" title="Parameters">
    <tr><td class="param">stream</td><td>HttpStream stream object.</td>
    <tr><td class="param">create</td><td>Set to true to create a new session if one does not already exist.</td>
    </table></dd></dl>
    <dl><dt>Returns:</dt><dd>The session state identifier string.</dd></dl>
    <dl><dt><b>API</b> Stability:</dt><dd>Stable.</dd></dl>
    <dl><dt>See Also:</dt><dd>
    <a href="#struct_esp" class="ref">Esp</a></dd></dl>
  </div>
</div>
<a name="group___esp_req_1gac69ab5a3aefeb52ee610c97a782f5be8"></a>
<div class="api">
  <div class="prototype">
    int
    espGetStatus
(<a href="http.html#group___http_stream" class="ref">HttpStream</a> *stream)
  </div>
  <div class="apiDetail">
<p>Get the response status.</p>
    <dl><dt>Parameters:</dt><dd>
    <table class="parameters" title="Parameters">
    <tr><td class="param">stream</td><td>HttpStream stream object.</td>
    </table></dd></dl>
    <dl><dt>Returns:</dt><dd>An integer Http response code. Typically 200 is success.</dd></dl>
    <dl><dt><b>API</b> Stability:</dt><dd>Stable.</dd></dl>
    <dl><dt>See Also:</dt><dd>
    <a href="#struct_esp" class="ref">Esp</a></dd></dl>
  </div>
</div>
<a name="group___esp_req_1ga6458200f97538630443957fe302316c1"></a>
<div class="api">
  <div class="prototype">
    <a href="osdep.html#group___osdep_1ga0f128c3e0c83721af0220c00554e9c4e" class="ref">cchar</a> *
    * espGetStatusMessage
(<a href="http.html#group___http_stream" class="ref">HttpStream</a> *stream)
  </div>
  <div class="apiDetail">
<p>Get the Http response status message.</p>
    <dl><dt><b>Description</b>:</dt><dd>The HTTP status message is supplied on the first line of the HTTP response.</dd></dl>
    <dl><dt>Parameters:</dt><dd>
    <table class="parameters" title="Parameters">
    <tr><td class="param">stream</td><td>HttpStream stream object.</td>
    </table></dd></dl>
    <dl><dt>Returns:</dt><dd>A Http status message.</dd></dl>
    <dl><dt><b>API</b> Stability:</dt><dd>Stable.</dd></dl>
    <dl><dt>See Also:</dt><dd>
    <a href="#struct_esp" class="ref">Esp</a></dd></dl>
  </div>
</div>
<a name="group___esp_req_1gad2e6be70f61174f11ac68c5ee52e0462"></a>
<div class="api">
  <div class="prototype">
    <a href="http.html#group___http_stream" class="ref">HttpStream</a> *
    * espGetStream
(void )
  </div>
  <div class="apiDetail">
<p>Get the current request stream.</p>
    <dl><dt>Returns:</dt><dd>The HttpStream stream object.</dd></dl>
    <dl><dt><b>API</b> Stability:</dt><dd>Stable.</dd></dl>
    <dl><dt>See Also:</dt><dd>
    <a href="#struct_esp" class="ref">Esp</a></dd></dl>
  </div>
</div>
<a name="group___esp_req_1gaefb9136c155b9763d37d401e82091354"></a>
<div class="api">
  <div class="prototype">
    <a href="mpr.html#group___mpr_list" class="ref">MprList</a> *
    * espGetUploads
(<a href="http.html#group___http_stream" class="ref">HttpStream</a> *stream)
  </div>
  <div class="apiDetail">
<p>Get the uploaded files.</p>
    <dl><dt><b>Description</b>:</dt><dd>Get the list of uploaded files. This list entries are HttpUploadFile objects.</dd></dl>
    <dl><dt>Parameters:</dt><dd>
    <table class="parameters" title="Parameters">
    <tr><td class="param">stream</td><td>HttpStream stream object.</td>
    </table></dd></dl>
    <dl><dt>Returns:</dt><dd>A list of HttpUploadFile objects.</dd></dl>
    <dl><dt><b>API</b> Stability:</dt><dd>Stable.</dd></dl>
    <dl><dt>See Also:</dt><dd>
    <a href="#struct_esp" class="ref">Esp</a></dd></dl>
  </div>
</div>
<a name="group___esp_req_1gab8f0cb172ba311dca5ceb8500372cf1a"></a>
<div class="api">
  <div class="prototype">
    <a href="osdep.html#group___osdep_1ga0f128c3e0c83721af0220c00554e9c4e" class="ref">cchar</a> *
    * espGetUri
(<a href="http.html#group___http_stream" class="ref">HttpStream</a> *stream)
  </div>
  <div class="apiDetail">
<p>Get the request URI string.</p>
    <dl><dt><b>Description</b>:</dt><dd>This is a convenience API to return the request URI. This is the request URI after removing query parameters. It includes any application route prefix.</dd></dl>
    <dl><dt>Returns:</dt><dd>The <a class="ref" href="#group___esp_req_1gad2e6be70f61174f11ac68c5ee52e0462">espGetStream()</a>-&gt;rx-&gt;uri.</dd></dl>
    <dl><dt><b>API</b> Stability:</dt><dd>Stable.</dd></dl>
    <dl><dt>See Also:</dt><dd>
    <a href="#struct_esp" class="ref">Esp</a></dd></dl>
  </div>
</div>
<a name="group___esp_req_1gadb37c44514aa605a811280e2fdee9329"></a>
<div class="api">
  <div class="prototype">
    <a href="osdep.html#group___osdep_1gad5c9d4ba3dc37783a528b0925dc981a0" class="ref">bool</a>
    espHasGrid
(<a href="http.html#group___http_stream" class="ref">HttpStream</a> *stream)
  </div>
  <div class="apiDetail">
<p>Test if a current grid has been defined via <a class="ref" href="#group___esp_req_1ga09f9871ba0bf8058575c8a22a34774ab">espSetGrid</a></p>
    <dl><dt>Returns:</dt><dd>&quot;True&quot; if a current grid has been defined.</dd></dl>
    <dl><dt><b>API</b> Stability:</dt><dd>Deprecated.</dd></dl>
    <dl><dt>See Also:</dt><dd>
    <a href="#struct_esp" class="ref">Esp</a></dd></dl>
  </div>
</div>
<a name="group___esp_req_1ga1b26f1c2f8e1f78024f076464c1483dc"></a>
<div class="api">
  <div class="prototype">
    <a href="osdep.html#group___osdep_1gad5c9d4ba3dc37783a528b0925dc981a0" class="ref">bool</a>
    espHasRec
(<a href="http.html#group___http_stream" class="ref">HttpStream</a> *stream)
  </div>
  <div class="apiDetail">
<p>Test if a current record has been defined and save to the database.</p>
    <dl><dt><b>Description</b>:</dt><dd>This call returns &quot;true&quot; if a current record is defined and has been saved to the database with a valid &quot;id&quot; field.</dd></dl>
    <dl><dt>Returns:</dt><dd>&quot;True&quot; if a current record with a valid &quot;id&quot; is defined.</dd></dl>
    <dl><dt><b>API</b> Stability:</dt><dd>Deprecated.</dd></dl>
    <dl><dt>See Also:</dt><dd>
    <a href="#struct_esp" class="ref">Esp</a></dd></dl>
  </div>
</div>
<a name="group___esp_req_1gaba5e635fa31811599d1d3c156164f1bf"></a>
<div class="api">
  <div class="prototype">
    <a href="osdep.html#group___osdep_1gad5c9d4ba3dc37783a528b0925dc981a0" class="ref">bool</a>
    espIsAuthenticated
(<a href="http.html#group___http_stream" class="ref">HttpStream</a> *stream)
  </div>
  <div class="apiDetail">
<p>Test if the user is authenticated.</p>
    <dl><dt>Parameters:</dt><dd>
    <table class="parameters" title="Parameters">
    <tr><td class="param">stream</td><td>HttpStream stream object.</td>
    </table></dd></dl>
    <dl><dt>Returns:</dt><dd>True if the username and password have been authenticated.</dd></dl>
    <dl><dt><b>API</b> Stability:</dt><dd>Stable.</dd></dl>
    <dl><dt>See Also:</dt><dd>
    <a href="#struct_esp" class="ref">Esp</a></dd></dl>
  </div>
</div>
<a name="group___esp_req_1ga87aa523e2a34d6c1db9355d16746ba83"></a>
<div class="api">
  <div class="prototype">
    <a href="osdep.html#group___osdep_1gad5c9d4ba3dc37783a528b0925dc981a0" class="ref">bool</a>
    espIsCurrentSession
(<a href="http.html#group___http_stream" class="ref">HttpStream</a> *stream)
  </div>
  <div class="apiDetail">
<p>Test if the request is being made on behalf of the current, single authenticated user.</p>
    <dl><dt><b>Description</b>:</dt><dd>Set esp.login.single to true to enable current session tracking.</dd></dl>
    <dl><dt>Returns:</dt><dd>True if the.</dd></dl>
    <dl><dt><b>API</b> Stability:</dt><dd>Stable.</dd></dl>
    <dl><dt>See Also:</dt><dd>
    <a href="#struct_esp" class="ref">Esp</a></dd></dl>
  </div>
</div>
<a name="group___esp_req_1ga911251b3456386c09a53a33c2f063c07"></a>
<div class="api">
  <div class="prototype">
    <a href="osdep.html#group___osdep_1gad5c9d4ba3dc37783a528b0925dc981a0" class="ref">bool</a>
    espIsEof
(<a href="http.html#group___http_stream" class="ref">HttpStream</a> *stream)
  </div>
  <div class="apiDetail">
<p>Test if the receive input stream is at end-of-file.</p>
    <dl><dt>Parameters:</dt><dd>
    <table class="parameters" title="Parameters">
    <tr><td class="param">stream</td><td>HttpStream stream object.</td>
    </table></dd></dl>
    <dl><dt>Returns:</dt><dd>&quot;True&quot; if there is no more receive data to read.</dd></dl>
    <dl><dt><b>API</b> Stability:</dt><dd>Stable.</dd></dl>
    <dl><dt>See Also:</dt><dd>
    <a href="#struct_esp" class="ref">Esp</a></dd></dl>
  </div>
</div>
<a name="group___esp_req_1ga1a37202ca271308e8742ad69af29443b"></a>
<div class="api">
  <div class="prototype">
    <a href="osdep.html#group___osdep_1gad5c9d4ba3dc37783a528b0925dc981a0" class="ref">bool</a>
    espIsFinalized
(<a href="http.html#group___http_stream" class="ref">HttpStream</a> *stream)
  </div>
  <div class="apiDetail">
<p>Test if the request has been finalized.</p>
    <dl><dt><b>Description</b>:</dt><dd>This tests if <a class="ref" href="#group___esp_req_1gafa8c60c6ae199dd31fa92c4dbbaa7c2d">espFinalize</a> or <a class="ref" href="#group___http_tx_1ga1a328a25ac329fd5cfc9e1ab033b10db" external="/Users/mob/dev/http/doc/api/http.dtags">httpFinalize</a> has been called for a request.</dd></dl>
    <dl><dt>Parameters:</dt><dd>
    <table class="parameters" title="Parameters">
    <tr><td class="param">stream</td><td>HttpStream stream object.</td>
    </table></dd></dl>
    <dl><dt>Returns:</dt><dd>&quot;True&quot; if the request has been finalized.</dd></dl>
    <dl><dt><b>API</b> Stability:</dt><dd>Stable.</dd></dl>
    <dl><dt>See Also:</dt><dd>
    <a href="#struct_esp" class="ref">Esp</a></dd></dl>
  </div>
</div>
<a name="group___esp_req_1gaad694d30c39f736bfd07a4e89facd407"></a>
<div class="api">
  <div class="prototype">
    <a href="osdep.html#group___osdep_1gad5c9d4ba3dc37783a528b0925dc981a0" class="ref">bool</a>
    espIsSecure
(<a href="http.html#group___http_stream" class="ref">HttpStream</a> *stream)
  </div>
  <div class="apiDetail">
<p>Test if the stream is using SSL and is secure.</p>
    <dl><dt>Parameters:</dt><dd>
    <table class="parameters" title="Parameters">
    <tr><td class="param">stream</td><td>HttpStream stream object.</td>
    </table></dd></dl>
    <dl><dt>Returns:</dt><dd>&quot;True&quot; if the stream is using SSL.</dd></dl>
    <dl><dt><b>API</b> Stability:</dt><dd>Stable.</dd></dl>
    <dl><dt>See Also:</dt><dd>
    <a href="#struct_esp" class="ref">Esp</a></dd></dl>
  </div>
</div>
<a name="group___esp_req_1ga9de5abcd3d4052efaa3d3e410ebbf6c9"></a>
<div class="api">
  <div class="prototype">
    <a href="osdep.html#group___osdep_1gad5c9d4ba3dc37783a528b0925dc981a0" class="ref">bool</a>
    espMatchParam
(<a href="http.html#group___http_stream" class="ref">HttpStream</a> *stream, <a href="osdep.html#group___osdep_1ga0f128c3e0c83721af0220c00554e9c4e" class="ref">cchar</a> *var, <a href="osdep.html#group___osdep_1ga0f128c3e0c83721af0220c00554e9c4e" class="ref">cchar</a> *value)
  </div>
  <div class="apiDetail">
<p>Match a request parameter with an expected value.</p>
    <dl><dt><b>Description</b>:</dt><dd>Compare a request parameter and return &quot;true&quot; if it exists and its value matches.</dd></dl>
    <dl><dt>Parameters:</dt><dd>
    <table class="parameters" title="Parameters">
    <tr><td class="param">stream</td><td>HttpStream stream object.</td>
    <tr><td class="param">var</td><td>Name of the request parameter.</td>
    <tr><td class="param">value</td><td>Expected value to match.</td>
    </table></dd></dl>
    <dl><dt>Returns:</dt><dd>&quot;True&quot; if the value matches.</dd></dl>
    <dl><dt><b>API</b> Stability:</dt><dd>Stable.</dd></dl>
    <dl><dt>See Also:</dt><dd>
    <a href="#struct_esp" class="ref">Esp</a></dd></dl>
  </div>
</div>
<a name="group___esp_req_1ga8d1d1a452011e3a410f6d9c79150a958"></a>
<div class="api">
  <div class="prototype">
    <a href="edi.html#group___edi_grid" class="ref">EdiGrid</a> *
    * espReadTable
(<a href="http.html#group___http_stream" class="ref">HttpStream</a> *stream, <a href="osdep.html#group___osdep_1ga0f128c3e0c83721af0220c00554e9c4e" class="ref">cchar</a> *tableName)
  </div>
  <div class="apiDetail">
<p>Read a table from the current database.</p>
    <dl><dt>Parameters:</dt><dd>
    <table class="parameters" title="Parameters">
    <tr><td class="param">stream</td><td>HttpStream stream object.</td>
    <tr><td class="param">tableName</td><td>Database table name.</td>
    </table></dd></dl>
    <dl><dt>Returns:</dt><dd>An EDI grid containing data for the table.</dd></dl>
    <dl><dt><b>API</b> Stability:</dt><dd>Stable.</dd></dl>
    <dl><dt>See Also:</dt><dd>
    <a href="#struct_esp" class="ref">Esp</a></dd></dl>
  </div>
</div>
<a name="group___esp_req_1ga855352588dacdb979a50caae379b736e"></a>
<div class="api">
  <div class="prototype">
    <a href="osdep.html#group___osdep_1ga7d08ccc1e981eb4d5a238641ac4ccfc1" class="ref">ssize</a>
    espReceive
(<a href="http.html#group___http_stream" class="ref">HttpStream</a> *stream, char *buf, <a href="osdep.html#group___osdep_1ga7d08ccc1e981eb4d5a238641ac4ccfc1" class="ref">ssize</a> size)
  </div>
  <div class="apiDetail">
<p>Read receive body content.</p>
Use httpReadBlock for more options to read data
    <dl><dt><b>Description</b>:</dt><dd>Read body content from the client. This call does not block.</dd></dl>
    <dl><dt>Parameters:</dt><dd>
    <table class="parameters" title="Parameters">
    <tr><td class="param">stream</td><td>HttpStream stream object.</td>
    <tr><td class="param">buf</td><td>Buffer to accept content data.</td>
    <tr><td class="param">size</td><td>Size of the buffer.</td>
    </table></dd></dl>
    <dl><dt>Returns:</dt><dd>A count of bytes read into the buffer.</dd></dl>
    <dl><dt><b>API</b> Stability:</dt><dd>Stable.</dd></dl>
    <dl><dt>See Also:</dt><dd>
    <a href="#struct_esp" class="ref">Esp</a></dd></dl>
  </div>
</div>
<a name="group___esp_req_1gad40cb0d52cde0cfa28a6040c5bc035e3"></a>
<div class="api">
  <div class="prototype">
    void
    espRedirect
(<a href="http.html#group___http_stream" class="ref">HttpStream</a> *stream, int status, <a href="osdep.html#group___osdep_1ga0f128c3e0c83721af0220c00554e9c4e" class="ref">cchar</a> *target)
  </div>
  <div class="apiDetail">
<p>Redirect the client.</p>
    <dl><dt><b>Description</b>:</dt><dd>Redirect the client to a new uri.</dd></dl>
    <dl><dt>Parameters:</dt><dd>
    <table class="parameters" title="Parameters">
    <tr><td class="param">stream</td><td>HttpStream stream object.</td>
    <tr><td class="param">status</td><td>Http status code to send with the response.</td>
    <tr><td class="param">target</td><td>New target uri for the client.</td>
    </table></dd></dl>
    <dl><dt><b>API</b> Stability:</dt><dd>Stable.</dd></dl>
    <dl><dt>See Also:</dt><dd>
    <a href="#struct_esp" class="ref">Esp</a></dd></dl>
  </div>
</div>
<a name="group___esp_req_1ga8b565b1563e5dda7271549a1e2b96139"></a>
<div class="api">
  <div class="prototype">
    void
    espRedirectBack
(<a href="http.html#group___http_stream" class="ref">HttpStream</a> *stream)
  </div>
  <div class="apiDetail">
<p>Redirect the client back to the referrer.</p>
    <dl><dt><b>Description</b>:</dt><dd>Redirect the client to the referring URI.</dd></dl>
    <dl><dt>Parameters:</dt><dd>
    <table class="parameters" title="Parameters">
    <tr><td class="param">stream</td><td>HttpStream stream object.</td>
    </table></dd></dl>
    <dl><dt><b>API</b> Stability:</dt><dd>Stable.</dd></dl>
    <dl><dt>See Also:</dt><dd>
    <a href="#struct_esp" class="ref">Esp</a></dd></dl>
  </div>
</div>
<a name="group___esp_req_1ga3dc70abb6ffc559b812d3199aa4238db"></a>
<div class="api">
  <div class="prototype">
    void
    espRemoveCookie
(<a href="http.html#group___http_stream" class="ref">HttpStream</a> *stream, <a href="osdep.html#group___osdep_1ga0f128c3e0c83721af0220c00554e9c4e" class="ref">cchar</a> *name)
  </div>
  <div class="apiDetail">
<p>Remove a cookie.</p>
    <dl><dt>Parameters:</dt><dd>
    <table class="parameters" title="Parameters">
    <tr><td class="param">stream</td><td>HttpStream stream object.</td>
    <tr><td class="param">name</td><td>Cookie name.</td>
    </table></dd></dl>
    <dl><dt><b>API</b> Stability:</dt><dd>Stable.</dd></dl>
    <dl><dt>See Also:</dt><dd>
    <a href="#struct_esp" class="ref">Esp</a></dd></dl>
  </div>
</div>
<a name="group___esp_req_1gaa89cbec1f573b93990587fb190efe6bb"></a>
<div class="api">
  <div class="prototype">
    int
    espRemoveHeader
(<a href="http.html#group___http_stream" class="ref">HttpStream</a> *stream, <a href="osdep.html#group___osdep_1ga0f128c3e0c83721af0220c00554e9c4e" class="ref">cchar</a> *key)
  </div>
  <div class="apiDetail">
<p>Remove a header from the transmission.</p>
    <dl><dt><b>Description</b>:</dt><dd>Remove a header if present.</dd></dl>
    <dl><dt>Parameters:</dt><dd>
    <table class="parameters" title="Parameters">
    <tr><td class="param">stream</td><td>HttpStream stream object.</td>
    <tr><td class="param">key</td><td>Http response header key.</td>
    </table></dd></dl>
    <dl><dt>Returns:</dt><dd>Zero if successful, otherwise a negative MPR error code.</dd></dl>
    <dl><dt><b>API</b> Stability:</dt><dd>Stable.</dd></dl>
    <dl><dt>See Also:</dt><dd>
    <a href="#struct_esp" class="ref">Esp</a></dd></dl>
  </div>
</div>
<a name="group___esp_req_1ga2ca5f0bbfd91449ba14ec1368c3731fb"></a>
<div class="api">
  <div class="prototype">
    void
    espRemoveSessionVar
(<a href="http.html#group___http_stream" class="ref">HttpStream</a> *stream, <a href="osdep.html#group___osdep_1ga0f128c3e0c83721af0220c00554e9c4e" class="ref">cchar</a> *name)
  </div>
  <div class="apiDetail">
<p>Remove a session state variable.</p>
    <dl><dt>Parameters:</dt><dd>
    <table class="parameters" title="Parameters">
    <tr><td class="param">stream</td><td>HttpStream stream object.</td>
    <tr><td class="param">name</td><td>Variable name to set.</td>
    </table></dd></dl>
    <dl><dt><b>API</b> Stability:</dt><dd>Stable.</dd></dl>
    <dl><dt>See Also:</dt><dd>
    <a href="#struct_esp" class="ref">Esp</a></dd></dl>
  </div>
</div>
<a name="group___esp_req_1ga740f0e3af771eb0b256cd7221e4bb4df"></a>
<div class="api">
  <div class="prototype">
    <a href="osdep.html#group___osdep_1ga7d08ccc1e981eb4d5a238641ac4ccfc1" class="ref">ssize</a>
    espRender
(<a href="http.html#group___http_stream" class="ref">HttpStream</a> *stream, <a href="osdep.html#group___osdep_1ga0f128c3e0c83721af0220c00554e9c4e" class="ref">cchar</a> *fmt, ...)
  </div>
  <div class="apiDetail">
<p>Render a formatted string.</p>
    <dl><dt><b>Description</b>:</dt><dd>Render a formatted string of data into packets to the client. Data packets will be created as required to store the write data. This call may block waiting for data to drain to the client and may yield to the garbage collector.</dd></dl>
    <dl><dt>Parameters:</dt><dd>
    <table class="parameters" title="Parameters">
    <tr><td class="param">stream</td><td>HttpStream stream object.</td>
    <tr><td class="param">fmt</td><td>Printf style formatted string.</td>
    <tr><td class="param">...</td><td>Arguments for fmt.</td>
    </table></dd></dl>
    <dl><dt>Returns:</dt><dd>A count of the bytes actually written.</dd></dl>
    <dl><dt><b>API</b> Stability:</dt><dd>Stable.</dd></dl>
    <dl><dt>See Also:</dt><dd>
    <a href="#struct_esp" class="ref">Esp</a></dd></dl>
  </div>
</div>
<a name="group___esp_req_1gab1ae06f7d01f771d47e06a97d6eb9a48"></a>
<div class="api">
  <div class="prototype">
    <a href="osdep.html#group___osdep_1ga7d08ccc1e981eb4d5a238641ac4ccfc1" class="ref">ssize</a>
    espRenderBlock
(<a href="http.html#group___http_stream" class="ref">HttpStream</a> *stream, <a href="osdep.html#group___osdep_1ga0f128c3e0c83721af0220c00554e9c4e" class="ref">cchar</a> *buf, <a href="osdep.html#group___osdep_1ga7d08ccc1e981eb4d5a238641ac4ccfc1" class="ref">ssize</a> size)
  </div>
  <div class="apiDetail">
<p>Render a block of data to the client.</p>
    <dl><dt><b>Description</b>:</dt><dd>Render a block of data to the client. Data packets will be created as required to store the write data. This call may block waiting for the client to absorb the data.</dd></dl>
    <dl><dt>Parameters:</dt><dd>
    <table class="parameters" title="Parameters">
    <tr><td class="param">stream</td><td>HttpStream stream object.</td>
    <tr><td class="param">buf</td><td>Buffer containing the write data.</td>
    <tr><td class="param">size</td><td>Size of the data in buf.</td>
    </table></dd></dl>
    <dl><dt>Returns:</dt><dd>A count of the bytes actually written.</dd></dl>
    <dl><dt><b>API</b> Stability:</dt><dd>Stable.</dd></dl>
    <dl><dt>See Also:</dt><dd>
    <a href="#struct_esp" class="ref">Esp</a></dd></dl>
  </div>
</div>
<a name="group___esp_req_1ga48248f6e2da9c63d14de1acfea49f0fb"></a>
<div class="api">
  <div class="prototype">
    <a href="osdep.html#group___osdep_1ga7d08ccc1e981eb4d5a238641ac4ccfc1" class="ref">ssize</a>
    espRenderCached
(<a href="http.html#group___http_stream" class="ref">HttpStream</a> *stream)
  </div>
  <div class="apiDetail">
<p>Render cached content.</p>
    <dl><dt><b>Description</b>:</dt><dd>Render the saved, cached response from a prior request to this URI. This is useful if the caching mode has been set to &quot;manual&quot;.</dd></dl>
    <dl><dt>Parameters:</dt><dd>
    <table class="parameters" title="Parameters">
    <tr><td class="param">stream</td><td>HttpStream stream object.</td>
    </table></dd></dl>
    <dl><dt>Returns:</dt><dd>A count of the bytes actually written.</dd></dl>
    <dl><dt><b>API</b> Stability:</dt><dd>Stable.</dd></dl>
    <dl><dt>See Also:</dt><dd>
    <a href="#struct_esp" class="ref">Esp</a></dd></dl>
  </div>
</div>
<a name="group___esp_req_1gafa3a630f74ad5bd46445737d204745b4"></a>
<div class="api">
  <div class="prototype">
    <a href="osdep.html#group___osdep_1ga7d08ccc1e981eb4d5a238641ac4ccfc1" class="ref">ssize</a>
    espRenderConfig
(<a href="http.html#group___http_stream" class="ref">HttpStream</a> *stream)
  </div>
  <div class="apiDetail">
<p>Render the client configuration string in JSON.</p>
    <dl><dt>Parameters:</dt><dd>
    <table class="parameters" title="Parameters">
    <tr><td class="param">stream</td><td>HttpStream stream object.</td>
    </table></dd></dl>
    <dl><dt>Returns:</dt><dd>A count of the bytes actually written.</dd></dl>
    <dl><dt><b>API</b> Stability:</dt><dd>Stable.</dd></dl>
    <dl><dt>See Also:</dt><dd>
    <a href="#struct_esp" class="ref">Esp</a></dd></dl>
  </div>
</div>
<a name="group___esp_req_1ga321591a7772d9555f93d8804513c0707"></a>
<div class="api">
  <div class="prototype">
    void
    espRenderDocument
(<a href="http.html#group___http_stream" class="ref">HttpStream</a> *stream, <a href="osdep.html#group___osdep_1ga0f128c3e0c83721af0220c00554e9c4e" class="ref">cchar</a> *path)
  </div>
  <div class="apiDetail">
<p>Render an ESP document.</p>
    <dl><dt><b>Description</b>:</dt><dd>If the document is an ESP page, it will be rendered as a view via <a class="ref" href="#group___esp_req_1ga321591a7772d9555f93d8804513c0707">espRenderDocument</a>. Otherwise, it will be rendered using the fileHandler as a static document. This routine may yield.</dd></dl>
    <dl><dt>Parameters:</dt><dd>
    <table class="parameters" title="Parameters">
    <tr><td class="param">stream</td><td>Http stream object.</td>
    <tr><td class="param">path</td><td>Relative pathname from route-&gt;documents to the document to render.</td>
    </table></dd></dl>
    <dl><dt><b>API</b> Stability:</dt><dd>Stable.</dd></dl>
    <dl><dt>See Also:</dt><dd>
    <a href="#struct_esp" class="ref">Esp</a></dd></dl>
  </div>
</div>
<a name="group___esp_req_1ga97dcf0c01a210b1190bbaf6ddec55626"></a>
<div class="api">
  <div class="prototype">
    <a href="osdep.html#group___osdep_1ga7d08ccc1e981eb4d5a238641ac4ccfc1" class="ref">ssize</a>
    espRenderError
(<a href="http.html#group___http_stream" class="ref">HttpStream</a> *stream, int status, <a href="osdep.html#group___osdep_1ga0f128c3e0c83721af0220c00554e9c4e" class="ref">cchar</a> *fmt, ...)
  </div>
  <div class="apiDetail">
<p>Render an error message back to the client and finalize the request.</p>
The output is Html escaped for security
    <dl><dt>Parameters:</dt><dd>
    <table class="parameters" title="Parameters">
    <tr><td class="param">stream</td><td>HttpStream stream object.</td>
    <tr><td class="param">status</td><td>Http status code.</td>
    <tr><td class="param">fmt</td><td>Printf style message format.</td>
    </table></dd></dl>
    <dl><dt>Returns:</dt><dd>A count of the bytes actually written.</dd></dl>
    <dl><dt><b>API</b> Stability:</dt><dd>Stable.</dd></dl>
    <dl><dt>See Also:</dt><dd>
    <a href="#struct_esp" class="ref">Esp</a></dd></dl>
  </div>
</div>
<a name="group___esp_req_1ga679268b7235fa3a44c66bc5ccf9d334a"></a>
<div class="api">
  <div class="prototype">
    <a href="osdep.html#group___osdep_1ga7d08ccc1e981eb4d5a238641ac4ccfc1" class="ref">ssize</a>
    espRenderFile
(<a href="http.html#group___http_stream" class="ref">HttpStream</a> *stream, <a href="osdep.html#group___osdep_1ga0f128c3e0c83721af0220c00554e9c4e" class="ref">cchar</a> *path)
  </div>
  <div class="apiDetail">
<p>Render the contents of a file back to the client.</p>
    <dl><dt>Parameters:</dt><dd>
    <table class="parameters" title="Parameters">
    <tr><td class="param">stream</td><td>HttpStream stream object.</td>
    <tr><td class="param">path</td><td>File path name.</td>
    </table></dd></dl>
    <dl><dt>Returns:</dt><dd>A count of the bytes actually written.</dd></dl>
    <dl><dt><b>API</b> Stability:</dt><dd>Stable.</dd></dl>
    <dl><dt>See Also:</dt><dd>
    <a href="#struct_esp" class="ref">Esp</a></dd></dl>
  </div>
</div>
<a name="group___esp_req_1ga73989d22b93eb4f2bd0e57f5312d7070"></a>
<div class="api">
  <div class="prototype">
    <a href="osdep.html#group___osdep_1ga7d08ccc1e981eb4d5a238641ac4ccfc1" class="ref">ssize</a>
    espRenderSafe
(<a href="http.html#group___http_stream" class="ref">HttpStream</a> *stream, <a href="osdep.html#group___osdep_1ga0f128c3e0c83721af0220c00554e9c4e" class="ref">cchar</a> *fmt, ...)
  </div>
  <div class="apiDetail">
<p>Render a formatted string after HTML escaping.</p>
    <dl><dt><b>Description</b>:</dt><dd>Render a formatted string of data and then HTML escape. Data packets will be created as required to store the write data. This call may block waiting for data to drain to the client.</dd></dl>
    <dl><dt>Parameters:</dt><dd>
    <table class="parameters" title="Parameters">
    <tr><td class="param">stream</td><td>HttpStream stream object.</td>
    <tr><td class="param">fmt</td><td>Printf style formatted string.</td>
    <tr><td class="param">...</td><td>Arguments for fmt.</td>
    </table></dd></dl>
    <dl><dt>Returns:</dt><dd>A count of the bytes actually written.</dd></dl>
    <dl><dt><b>API</b> Stability:</dt><dd>Stable.</dd></dl>
    <dl><dt>See Also:</dt><dd>
    <a href="#struct_esp" class="ref">Esp</a></dd></dl>
  </div>
</div>
<a name="group___esp_req_1gac13211295b015088127ac10684933f19"></a>
<div class="api">
  <div class="prototype">
    <a href="osdep.html#group___osdep_1ga7d08ccc1e981eb4d5a238641ac4ccfc1" class="ref">ssize</a>
    espRenderSafeString
(<a href="http.html#group___http_stream" class="ref">HttpStream</a> *stream, <a href="osdep.html#group___osdep_1ga0f128c3e0c83721af0220c00554e9c4e" class="ref">cchar</a> *s)
  </div>
  <div class="apiDetail">
<p>Render a safe string of data to the client.</p>
    <dl><dt><b>Description</b>:</dt><dd>HTML escape a string and then write the string of data to the client. Data packets will be created as required to store the write data. This call may block waiting for the data to the client to drain.</dd></dl>
    <dl><dt>Parameters:</dt><dd>
    <table class="parameters" title="Parameters">
    <tr><td class="param">stream</td><td>HttpStream stream object.</td>
    <tr><td class="param">s</td><td>String containing the data to write.</td>
    </table></dd></dl>
    <dl><dt>Returns:</dt><dd>A count of the bytes actually written.</dd></dl>
    <dl><dt><b>API</b> Stability:</dt><dd>Stable.</dd></dl>
    <dl><dt>See Also:</dt><dd>
    <a href="#struct_esp" class="ref">Esp</a></dd></dl>
  </div>
</div>
<a name="group___esp_req_1ga08cb7d6bbbb06131994b6033ea99b5ad"></a>
<div class="api">
  <div class="prototype">
    <a href="osdep.html#group___osdep_1ga7d08ccc1e981eb4d5a238641ac4ccfc1" class="ref">ssize</a>
    espRenderString
(<a href="http.html#group___http_stream" class="ref">HttpStream</a> *stream, <a href="osdep.html#group___osdep_1ga0f128c3e0c83721af0220c00554e9c4e" class="ref">cchar</a> *s)
  </div>
  <div class="apiDetail">
<p>Render a string of data to the client.</p>
    <dl><dt><b>Description</b>:</dt><dd>Render a string of data to the client. Data packets will be created as required to store the write data. This call may block waiting for data to drain to the client.</dd></dl>
    <dl><dt>Parameters:</dt><dd>
    <table class="parameters" title="Parameters">
    <tr><td class="param">stream</td><td>HttpStream stream object.</td>
    <tr><td class="param">s</td><td>String containing the data to write.</td>
    </table></dd></dl>
    <dl><dt>Returns:</dt><dd>A count of the bytes actually written.</dd></dl>
    <dl><dt><b>API</b> Stability:</dt><dd>Stable.</dd></dl>
    <dl><dt>See Also:</dt><dd>
    <a href="#struct_esp" class="ref">Esp</a></dd></dl>
  </div>
</div>
<a name="group___esp_req_1ga38422504736e4bd4d5a9af9a76345885"></a>
<div class="api">
  <div class="prototype">
    <a href="osdep.html#group___osdep_1ga7d08ccc1e981eb4d5a238641ac4ccfc1" class="ref">ssize</a>
    espRenderVar
(<a href="http.html#group___http_stream" class="ref">HttpStream</a> *stream, <a href="osdep.html#group___osdep_1ga0f128c3e0c83721af0220c00554e9c4e" class="ref">cchar</a> *name)
  </div>
  <div class="apiDetail">
<p>Render the value of a request variable to the client.</p>
If a request parameter is not found by the given name, consult the session store for a variable the same name
    <dl><dt><b>Description</b>:</dt><dd>This writes the value of a request variable after HTML escaping its value.</dd></dl>
    <dl><dt>Parameters:</dt><dd>
    <table class="parameters" title="Parameters">
    <tr><td class="param">stream</td><td>HttpStream stream object.</td>
    <tr><td class="param">name</td><td>Request parameter variable name.</td>
    </table></dd></dl>
    <dl><dt>Returns:</dt><dd>A count of the bytes actually written.</dd></dl>
    <dl><dt><b>API</b> Stability:</dt><dd>Stable.</dd></dl>
    <dl><dt>See Also:</dt><dd>
    <a href="#struct_esp" class="ref">Esp</a></dd></dl>
  </div>
</div>
<a name="group___esp_req_1ga6b235109ed8caa6ff411df4160630ba9"></a>
<div class="api">
  <div class="prototype">
    <a href="osdep.html#group___osdep_1gad5c9d4ba3dc37783a528b0925dc981a0" class="ref">bool</a>
    espRenderView
(<a href="http.html#group___http_stream" class="ref">HttpStream</a> *stream, <a href="osdep.html#group___osdep_1ga0f128c3e0c83721af0220c00554e9c4e" class="ref">cchar</a> *view, int flags)
  </div>
  <div class="apiDetail">
<p>Render an ESP view page to the client.</p>
    <dl><dt>Parameters:</dt><dd>
    <table class="parameters" title="Parameters">
    <tr><td class="param">stream</td><td>Http stream object.</td>
    <tr><td class="param">view</td><td>View name. The view name is interpreted relative to the matching route documents directory and may omit an ESP extension. This routine may yield.</td>
    <tr><td class="param">flags</td><td>Reserved. Set to zero.</td>
    </table></dd></dl>
    <dl><dt>Returns:</dt><dd>True if a vew can be rendered.</dd></dl>
    <dl><dt><b>API</b> Stability:</dt><dd>Stable.</dd></dl>
    <dl><dt>See Also:</dt><dd>
    <a href="#struct_esp" class="ref">Esp</a></dd></dl>
  </div>
</div>
<a name="group___esp_req_1gabd3396f92f086163b3f873ab8f4ef68f"></a>
<div class="api">
  <div class="prototype">
    <a href="osdep.html#group___osdep_1ga7d08ccc1e981eb4d5a238641ac4ccfc1" class="ref">ssize</a>
    espSendGrid
(<a href="http.html#group___http_stream" class="ref">HttpStream</a> *stream, <a href="edi.html#group___edi_grid" class="ref">EdiGrid</a> *grid, int flags)
  </div>
  <div class="apiDetail">
<p>Send a database grid as a JSON string.</p>
    <dl><dt><b>Description</b>:</dt><dd>The JSON string is rendered as part of an enclosing &quot;{ data: JSON }&quot; wrapper.</dd></dl>
    <dl><dt>Parameters:</dt><dd>
    <table class="parameters" title="Parameters">
    <tr><td class="param">stream</td><td>HttpStream stream object.</td>
    <tr><td class="param">grid</td><td>EDI grid.</td>
    <tr><td class="param">flags</td><td>Reserved. Set to zero.</td>
    </table></dd></dl>
    <dl><dt>Returns:</dt><dd>Number of bytes rendered.</dd></dl>
    <dl><dt><b>API</b> Stability:</dt><dd>Stable.</dd></dl>
    <dl><dt>See Also:</dt><dd>
    <a href="#struct_esp" class="ref">Esp</a></dd></dl>
  </div>
</div>
<a name="group___esp_req_1ga6ad553215efae37b30624cc189f8ec93"></a>
<div class="api">
  <div class="prototype">
    <a href="osdep.html#group___osdep_1ga7d08ccc1e981eb4d5a238641ac4ccfc1" class="ref">ssize</a>
    espSendRec
(<a href="http.html#group___http_stream" class="ref">HttpStream</a> *stream, <a href="edi.html#group___edi_rec" class="ref">EdiRec</a> *rec, int flags)
  </div>
  <div class="apiDetail">
<p>Send a database record as a JSON string.</p>
    <dl><dt><b>Description</b>:</dt><dd>The JSON string is rendered as part of an enclosing &quot;{ data: JSON }&quot; wrapper.</dd></dl>
    <dl><dt>Parameters:</dt><dd>
    <table class="parameters" title="Parameters">
    <tr><td class="param">stream</td><td>HttpStream stream object.</td>
    <tr><td class="param">rec</td><td>EDI record.</td>
    <tr><td class="param">flags</td><td>Reserved. Set to zero.</td>
    </table></dd></dl>
    <dl><dt>Returns:</dt><dd>Number of bytes rendered.</dd></dl>
    <dl><dt><b>API</b> Stability:</dt><dd>Stable.</dd></dl>
    <dl><dt>See Also:</dt><dd>
    <a href="#struct_esp" class="ref">Esp</a></dd></dl>
  </div>
</div>
<a name="group___esp_req_1gab58e0600c271a9cd45d9b71f7946eb92"></a>
<div class="api">
  <div class="prototype">
    <a href="osdep.html#group___osdep_1ga7d08ccc1e981eb4d5a238641ac4ccfc1" class="ref">ssize</a>
    espSendResult
(<a href="http.html#group___http_stream" class="ref">HttpStream</a> *stream, <a href="osdep.html#group___osdep_1gad5c9d4ba3dc37783a528b0925dc981a0" class="ref">bool</a> success)
  </div>
  <div class="apiDetail">
<p>Send a JSON response result.</p>
    <dl><dt><b>Description</b>:</dt><dd>This renders a JSON response including the request success status, feedback message and field errors. The field errors apply to the current EDI record. The format of the response is: &quot;{ error: 0/1, feedback: {messages}, fieldErrors: {messages}}&quot; wrapper. The feedback messages are created via the espSetFeedback API. Field errors are created by ESP validations.</dd></dl>
    <dl><dt>Parameters:</dt><dd>
    <table class="parameters" title="Parameters">
    <tr><td class="param">stream</td><td>HttpStream stream object.</td>
    <tr><td class="param">success</td><td>True if the operation was a success.</td>
    </table></dd></dl>
    <dl><dt>Returns:</dt><dd>Number of bytes sent.</dd></dl>
    <dl><dt><b>API</b> Stability:</dt><dd>Stable.</dd></dl>
    <dl><dt>See Also:</dt><dd>
    <a href="#struct_esp" class="ref">Esp</a></dd></dl>
  </div>
</div>
<a name="group___esp_req_1gade4f16e9df197e729243386fb4adf9b5"></a>
<div class="api">
  <div class="prototype">
    <a href="osdep.html#group___osdep_1gad5c9d4ba3dc37783a528b0925dc981a0" class="ref">bool</a>
    espSetAutoFinalizing
(<a href="http.html#group___http_stream" class="ref">HttpStream</a> *stream, <a href="osdep.html#group___osdep_1gad5c9d4ba3dc37783a528b0925dc981a0" class="ref">bool</a> on)
  </div>
  <div class="apiDetail">
<p>Enable auto-finalizing for this request.</p>
    <dl><dt>Parameters:</dt><dd>
    <table class="parameters" title="Parameters">
    <tr><td class="param">stream</td><td>HttpStream stream object.</td>
    <tr><td class="param">on</td><td>Set to &quot;true&quot; to enable auto-finalizing.</td>
    </table></dd></dl>
    <dl><dt>Returns:</dt><dd>&quot;True&quot; if auto-finalizing was enabled prior to this call.</dd></dl>
    <dl><dt><b>API</b> Stability:</dt><dd>Stable.</dd></dl>
    <dl><dt>See Also:</dt><dd>
    <a href="#struct_esp" class="ref">Esp</a></dd></dl>
  </div>
</div>
<a name="group___esp_req_1ga9159e247a36c454bc3e0840051b7233a"></a>
<div class="api">
  <div class="prototype">
    void
    espSetContentLength
(<a href="http.html#group___http_stream" class="ref">HttpStream</a> *stream, <a href="mpr.html#mpr_8h_1a87e9f435008723c7b1489af1944c6e20" class="ref">MprOff</a> length)
  </div>
  <div class="apiDetail">
<p>Define a content length header in the transmission.</p>
    <dl><dt><b>Description</b>:</dt><dd>This will define a &quot;Content-Length: NNN&quot; request header.</dd></dl>
    <dl><dt>Parameters:</dt><dd>
    <table class="parameters" title="Parameters">
    <tr><td class="param">stream</td><td>HttpStream stream object.</td>
    <tr><td class="param">length</td><td>Numeric value for the content length header.</td>
    </table></dd></dl>
    <dl><dt><b>API</b> Stability:</dt><dd>Stable.</dd></dl>
    <dl><dt>See Also:</dt><dd>
    <a href="#struct_esp" class="ref">Esp</a></dd></dl>
  </div>
</div>
<a name="group___esp_req_1gabed006452ae09b7a3c387755876429df"></a>
<div class="api">
  <div class="prototype">
    void
    espSetContentType
(<a href="http.html#group___http_stream" class="ref">HttpStream</a> *stream, <a href="osdep.html#group___osdep_1ga0f128c3e0c83721af0220c00554e9c4e" class="ref">cchar</a> *mimeType)
  </div>
  <div class="apiDetail">
<p>Set the transmission (response) content mime type.</p>
    <dl><dt><b>Description</b>:</dt><dd>Set the mime type Http header in the transmission.</dd></dl>
    <dl><dt>Parameters:</dt><dd>
    <table class="parameters" title="Parameters">
    <tr><td class="param">stream</td><td>HttpStream stream object.</td>
    <tr><td class="param">mimeType</td><td>Mime type string.</td>
    </table></dd></dl>
    <dl><dt><b>API</b> Stability:</dt><dd>Stable.</dd></dl>
    <dl><dt>See Also:</dt><dd>
    <a href="#struct_esp" class="ref">Esp</a></dd></dl>
  </div>
</div>
<a name="group___esp_req_1ga5b14b36d8775d67665900c6c241c01e0"></a>
<div class="api">
  <div class="prototype">
    void
    espSetCookie
(<a href="http.html#group___http_stream" class="ref">HttpStream</a> *stream, <a href="osdep.html#group___osdep_1ga0f128c3e0c83721af0220c00554e9c4e" class="ref">cchar</a> *name, <a href="osdep.html#group___osdep_1ga0f128c3e0c83721af0220c00554e9c4e" class="ref">cchar</a> *value, <a href="osdep.html#group___osdep_1ga0f128c3e0c83721af0220c00554e9c4e" class="ref">cchar</a> *path, <a href="osdep.html#group___osdep_1ga0f128c3e0c83721af0220c00554e9c4e" class="ref">cchar</a> *domain, <a href="mpr.html#mpr_8h_1adbceeccda24c35e7b4c6090db7065319" class="ref">MprTicks</a> lifespan, <a href="osdep.html#group___osdep_1gad5c9d4ba3dc37783a528b0925dc981a0" class="ref">bool</a> isSecure)
  </div>
  <div class="apiDetail">
<p>Set a cookie in the transmission.</p>
    <dl><dt><b>Description</b>:</dt><dd>Define a cookie to send in the transmission Http header.</dd></dl>
    <dl><dt>Parameters:</dt><dd>
    <table class="parameters" title="Parameters">
    <tr><td class="param">stream</td><td>HttpStream stream object.</td>
    <tr><td class="param">name</td><td>Cookie name.</td>
    <tr><td class="param">value</td><td>Cookie value.</td>
    <tr><td class="param">path</td><td>URI path to which the cookie applies.</td>
    <tr><td class="param">domain</td><td>String Domain in which the cookie applies. Must have 2-3 &quot;.&quot; and begin with a leading &quot;.&quot;. For example: domain: .example.com. Set to NULL to use the current connection&apos;s client domain. Some browsers will accept cookies without the initial &quot;.&quot;, but the spec: (RFC 2109) requires it.</td>
    <tr><td class="param">lifespan</td><td>Duration for the cookie to persist in msec. Set to a negative number to delete a cookie. Set to zero for a &quot;session&quot; cookie that lives only for the user&apos;s session.</td>
    <tr><td class="param">isSecure</td><td>Set to &quot;true&quot; if the cookie only applies for SSL based connections.</td>
    </table></dd></dl>
    <dl><dt><b>API</b> Stability:</dt><dd>Stable.</dd></dl>
    <dl><dt>See Also:</dt><dd>
    <a href="#struct_esp" class="ref">Esp</a></dd></dl>
  </div>
</div>
<a name="group___esp_req_1ga7716b0e1e8129914f1ef94585c37673a"></a>
<div class="api">
  <div class="prototype">
    void
    espSetCurrentSession
(<a href="http.html#group___http_stream" class="ref">HttpStream</a> *stream)
  </div>
  <div class="apiDetail">
<p>Set this authenticated session as the current session.</p>
    <dl><dt><b>Description</b>:</dt><dd>Set esp.login.single to true to enable current session tracking.</dd></dl>
    <dl><dt><b>API</b> Stability:</dt><dd>Stable.</dd></dl>
    <dl><dt>See Also:</dt><dd>
    <a href="#struct_esp" class="ref">Esp</a></dd></dl>
  </div>
</div>
<a name="group___esp_req_1ga771dab7992d00940e83a27d47c4fbeec"></a>
<div class="api">
  <div class="prototype">
    void
    espSetFeedback
(<a href="http.html#group___http_stream" class="ref">HttpStream</a> *stream, <a href="osdep.html#group___osdep_1ga0f128c3e0c83721af0220c00554e9c4e" class="ref">cchar</a> *type, <a href="osdep.html#group___osdep_1ga0f128c3e0c83721af0220c00554e9c4e" class="ref">cchar</a> *fmt, ...)
  </div>
  <div class="apiDetail">
<p>Set a feedback message.</p>
    <dl><dt><b>Description</b>:</dt><dd>Feedback messages are a convenient way to aggregate messages state information in the response. Feedback messages are removed at the completion of the request.</dd></dl>
    <dl><dt>Parameters:</dt><dd>
    <table class="parameters" title="Parameters">
    <tr><td class="param">stream</td><td>Http stream object.</td>
    <tr><td class="param">type</td><td>type of feedback message. This may be set to any word, but the following feedback types are typically supported as per RFC 5424: &quot;debug&quot;, &quot;info&quot;, &quot;notice&quot;, &quot;warn&quot;, &quot;error&quot;, &quot;critical&quot;.</td>
    <tr><td class="param">fmt</td><td>Printf style formatted string to use as the message.</td>
    </table></dd></dl>
    <dl><dt><b>API</b> Stability:</dt><dd>Stable.</dd></dl>
    <dl><dt>See Also:</dt><dd>
    <a href="#struct_esp" class="ref">Esp</a></dd></dl>
  </div>
</div>
<a name="group___esp_req_1gad86d75d3f1de8522aa232e023cfdde73"></a>
<div class="api">
  <div class="prototype">
    void
    espSetFeedbackv
(<a href="http.html#group___http_stream" class="ref">HttpStream</a> *stream, <a href="osdep.html#group___osdep_1ga0f128c3e0c83721af0220c00554e9c4e" class="ref">cchar</a> *type, <a href="osdep.html#group___osdep_1ga0f128c3e0c83721af0220c00554e9c4e" class="ref">cchar</a> *fmt, va_list args)
  </div>
  <div class="apiDetail">
<p>Send a feedback message.</p>
    <dl><dt>Parameters:</dt><dd>
    <table class="parameters" title="Parameters">
    <tr><td class="param">stream</td><td>Http stream object.</td>
    <tr><td class="param">type</td><td>type of feedback message. This may be set to any word, but the following feedback types are typically supported as per RFC 5424: &quot;debug&quot;, &quot;info&quot;, &quot;notice&quot;, &quot;warn&quot;, &quot;error&quot;, &quot;critical&quot;.</td>
    <tr><td class="param">fmt</td><td>Printf style formatted string to use as the message.</td>
    <tr><td class="param">args</td><td>Varargs style list.</td>
    </table></dd></dl>
    <dl><dt><b>API</b> Stability:</dt><dd>Internal.</dd></dl>
    <dl><dt>See Also:</dt><dd>
    <a href="#struct_esp" class="ref">Esp</a></dd></dl>
  </div>
</div>
<a name="group___esp_req_1ga09f9871ba0bf8058575c8a22a34774ab"></a>
<div class="api">
  <div class="prototype">
    <a href="edi.html#group___edi_grid" class="ref">EdiGrid</a> *
    * espSetGrid
(<a href="http.html#group___http_stream" class="ref">HttpStream</a> *stream, <a href="edi.html#group___edi_grid" class="ref">EdiGrid</a> *grid)
  </div>
  <div class="apiDetail">
<p>Set the current database grid.</p>
    <dl><dt>Returns:</dt><dd>The grid instance. This permits chaining.</dd></dl>
    <dl><dt><b>API</b> Stability:</dt><dd>Stable.</dd></dl>
    <dl><dt>See Also:</dt><dd>
    <a href="#struct_esp" class="ref">Esp</a></dd></dl>
  </div>
</div>
<a name="group___esp_req_1gac60ee82bf1ce6b09cfe9ebe669062af0"></a>
<div class="api">
  <div class="prototype">
    void
    espSetHeader
(<a href="http.html#group___http_stream" class="ref">HttpStream</a> *stream, <a href="osdep.html#group___osdep_1ga0f128c3e0c83721af0220c00554e9c4e" class="ref">cchar</a> *key, <a href="osdep.html#group___osdep_1ga0f128c3e0c83721af0220c00554e9c4e" class="ref">cchar</a> *fmt, ...)
  </div>
  <div class="apiDetail">
<p>Set a transmission header.</p>
    <dl><dt><b>Description</b>:</dt><dd>Set a Http header to send with the request. If the header already exists, its value is overwritten.</dd></dl>
    <dl><dt>Parameters:</dt><dd>
    <table class="parameters" title="Parameters">
    <tr><td class="param">stream</td><td>HttpStream stream object.</td>
    <tr><td class="param">key</td><td>Http response header key.</td>
    <tr><td class="param">fmt</td><td>Printf style formatted string to use as the header key value.</td>
    <tr><td class="param">...</td><td>Arguments for fmt.</td>
    </table></dd></dl>
    <dl><dt><b>API</b> Stability:</dt><dd>Stable.</dd></dl>
    <dl><dt>See Also:</dt><dd>
    <a href="#struct_esp" class="ref">Esp</a></dd></dl>
  </div>
</div>
<a name="group___esp_req_1gad13e6dc837686a7b820105374750ed4f"></a>
<div class="api">
  <div class="prototype">
    void
    espSetHeaderString
(<a href="http.html#group___http_stream" class="ref">HttpStream</a> *stream, <a href="osdep.html#group___osdep_1ga0f128c3e0c83721af0220c00554e9c4e" class="ref">cchar</a> *key, <a href="osdep.html#group___osdep_1ga0f128c3e0c83721af0220c00554e9c4e" class="ref">cchar</a> *value)
  </div>
  <div class="apiDetail">
<p>Set a simple key/value transmission header.</p>
    <dl><dt><b>Description</b>:</dt><dd>Set a Http header to send with the request. If the header already exists, its value is overwritten.</dd></dl>
    <dl><dt>Parameters:</dt><dd>
    <table class="parameters" title="Parameters">
    <tr><td class="param">stream</td><td>HttpStream stream object.</td>
    <tr><td class="param">key</td><td>Http response header key.</td>
    <tr><td class="param">value</td><td>String value for the key.</td>
    </table></dd></dl>
    <dl><dt><b>API</b> Stability:</dt><dd>Stable.</dd></dl>
    <dl><dt>See Also:</dt><dd>
    <a href="#struct_esp" class="ref">Esp</a></dd></dl>
  </div>
</div>
<a name="group___esp_req_1ga6696ab81bed4cdd5031cf535e614e726"></a>
<div class="api">
  <div class="prototype">
    void
    espSetNotifier
(<a href="http.html#group___http_stream" class="ref">HttpStream</a> *stream, <a href="http.html#group___http_stream_1gad583143fc934fa15f237b74102c31c4a" class="ref">HttpNotifier</a> notifier)
  </div>
  <div class="apiDetail">
<p>Define a notifier callback for this stream.</p>
    <dl><dt><b>Description</b>:</dt><dd>The notifier callback will be invoked for state changes and I/O events as requests are processed. The supported events are: <ul><li>HTTP_EVENT_STATE <mdash/> The request is changing state. Valid states are: HTTP_STATE_BEGIN, HTTP_STATE_CONNECTED, HTTP_STATE_FIRST, HTTP_STATE_CONTENT, HTTP_STATE_READY, HTTP_STATE_RUNNING, HTTP_STATE_FINALIZED and HTTP_STATE_COMPLETE. A request will always visit all states and the notifier will be invoked for each and every state. This is true even if the request has no content, the HTTP_STATE_CONTENT will still be visited. </li><li>HTTP_EVENT_READABLE <mdash/> There is data available to read </li><li>HTTP_EVENT_WRITABLE <mdash/> The outgoing pipeline can absorb more data </li><li>HTTP_EVENT_ERROR <mdash/> The request has encountered an error </li><li>HTTP_EVENT_DESTROY <mdash/> The stream structure is about to be destoyed </li><li>HTTP_EVENT_OPEN <mdash/> The application layer is now open </li><li>HTTP_EVENT_CLOSE <mdash/> The application layer is now closed </li></ul>
Before the notifier is invoked, espSetStream is called to set the stream object in the thread local storage. This enables the ESP Abbreviated API.</dd></dl>
    <dl><dt>Parameters:</dt><dd>
    <table class="parameters" title="Parameters">
    <tr><td class="param">stream</td><td>HttpStream stream object created via <a class="ref" href="#group___http_stream_1ga910ea0a907e28ae1cf10c5396c8926a1" external="/Users/mob/dev/http/doc/api/http.dtags">httpCreateStream</a></td>
    <tr><td class="param">notifier</td><td>Notifier function.</td>
    </table></dd></dl>
    <dl><dt><b>API</b> Stability:</dt><dd>Stable.</dd></dl>
    <dl><dt>See Also:</dt><dd>
    <a href="#struct_esp" class="ref">Esp</a></dd></dl>
  </div>
</div>
<a name="group___esp_req_1ga0363bac2a708d5185f9335fcfbffa510"></a>
<div class="api">
  <div class="prototype">
    void
    espSetParam
(<a href="http.html#group___http_stream" class="ref">HttpStream</a> *stream, <a href="osdep.html#group___osdep_1ga0f128c3e0c83721af0220c00554e9c4e" class="ref">cchar</a> *var, <a href="osdep.html#group___osdep_1ga0f128c3e0c83721af0220c00554e9c4e" class="ref">cchar</a> *value)
  </div>
  <div class="apiDetail">
<p>Set a request parameter value.</p>
    <dl><dt><b>Description</b>:</dt><dd>Set the value of a named request parameter to a string value. Parameters are defined via requeset POST data or request URI queries. This API permits these initial request parameters to be set or modified.</dd></dl>
    <dl><dt>Parameters:</dt><dd>
    <table class="parameters" title="Parameters">
    <tr><td class="param">stream</td><td>HttpStream stream object.</td>
    <tr><td class="param">var</td><td>Name of the request parameter to set.</td>
    <tr><td class="param">value</td><td>Value to set.</td>
    </table></dd></dl>
    <dl><dt><b>API</b> Stability:</dt><dd>Stable.</dd></dl>
    <dl><dt>See Also:</dt><dd>
    <a href="#struct_esp" class="ref">Esp</a></dd></dl>
  </div>
</div>
<a name="group___esp_req_1ga019457243559de65eafc912540707f28"></a>
<div class="api">
  <div class="prototype">
    void
    espSetParamInt
(<a href="http.html#group___http_stream" class="ref">HttpStream</a> *stream, <a href="osdep.html#group___osdep_1ga0f128c3e0c83721af0220c00554e9c4e" class="ref">cchar</a> *var, int value)
  </div>
  <div class="apiDetail">
<p>Set an integer request parameter value.</p>
    <dl><dt><b>Description</b>:</dt><dd>Set the value of a named request parameter to an integer value. Request parameters are defined via www-urlencoded query or post data contained in the request.</dd></dl>
    <dl><dt>Parameters:</dt><dd>
    <table class="parameters" title="Parameters">
    <tr><td class="param">stream</td><td>HttpStream stream object.</td>
    <tr><td class="param">var</td><td>Name of the request parameter to set.</td>
    <tr><td class="param">value</td><td>Value to set.</td>
    </table></dd></dl>
    <dl><dt><b>API</b> Stability:</dt><dd>Stable.</dd></dl>
    <dl><dt>See Also:</dt><dd>
    <a href="#struct_esp" class="ref">Esp</a></dd></dl>
  </div>
</div>
<a name="group___esp_req_1ga0a635f2487e8ce077c791814ed9a8fd5"></a>
<div class="api">
  <div class="prototype">
    <a href="edi.html#group___edi_rec" class="ref">EdiRec</a> *
    * espSetRec
(<a href="http.html#group___http_stream" class="ref">HttpStream</a> *stream, <a href="edi.html#group___edi_rec" class="ref">EdiRec</a> *rec)
  </div>
  <div class="apiDetail">
<p>Set the current database record.</p>
    <dl><dt><b>Description</b>:</dt><dd>The current record is used to supply data to various abbreviated controls, such as: text(), input(), checkbox and dropdown().</dd></dl>
    <dl><dt>Parameters:</dt><dd>
    <table class="parameters" title="Parameters">
    <tr><td class="param">stream</td><td>HttpStream stream object.</td>
    <tr><td class="param">rec</td><td>Record object to define as the current record.</td>
    </table></dd></dl>
    <dl><dt>Returns:</dt><dd>The grid instance. This permits chaining.</dd></dl>
    <dl><dt><b>API</b> Stability:</dt><dd>Stable.</dd></dl>
    <dl><dt>See Also:</dt><dd>
    <a href="#struct_esp" class="ref">Esp</a></dd></dl>
  </div>
</div>
<a name="group___esp_req_1ga5b28e98f9f6b7c9932dfe72f8afaa86d"></a>
<div class="api">
  <div class="prototype">
    void
    espSetStatus
(<a href="http.html#group___http_stream" class="ref">HttpStream</a> *stream, int status)
  </div>
  <div class="apiDetail">
<p>Set a Http response status.</p>
    <dl><dt><b>Description</b>:</dt><dd>Set the Http response status for the request. This defaults to 200 (OK).</dd></dl>
    <dl><dt>Parameters:</dt><dd>
    <table class="parameters" title="Parameters">
    <tr><td class="param">stream</td><td>HttpStream stream object.</td>
    <tr><td class="param">status</td><td>Http status code.</td>
    </table></dd></dl>
    <dl><dt><b>API</b> Stability:</dt><dd>Stable.</dd></dl>
    <dl><dt>See Also:</dt><dd>
    <a href="#struct_esp" class="ref">Esp</a></dd></dl>
  </div>
</div>
<a name="group___esp_req_1ga0f123fdd3a6adf76ecc8eb0a27cd7605"></a>
<div class="api">
  <div class="prototype">
    void
    espSetStream
(<a href="http.html#group___http_stream" class="ref">HttpStream</a> *stream)
  </div>
  <div class="apiDetail">
<p>Set the current request stream.</p>
    <dl><dt>Parameters:</dt><dd>
    <table class="parameters" title="Parameters">
    <tr><td class="param">stream</td><td>The HttpStream stream object to define.</td>
    </table></dd></dl>
    <dl><dt><b>API</b> Stability:</dt><dd>Stable.</dd></dl>
    <dl><dt>See Also:</dt><dd>
    <a href="#struct_esp" class="ref">Esp</a></dd></dl>
  </div>
</div>
<a name="group___esp_req_1gacfda1021dede1225a27d384584f066ad"></a>
<div class="api">
  <div class="prototype">
    void
    espShowRequest
(<a href="http.html#group___http_stream" class="ref">HttpStream</a> *stream)
  </div>
  <div class="apiDetail">
<p>Show request details.</p>
    <dl><dt><b>Description</b>:</dt><dd>This e request details back to the client. This is useful as a debugging tool.</dd></dl>
    <dl><dt>Parameters:</dt><dd>
    <table class="parameters" title="Parameters">
    <tr><td class="param">stream</td><td>HttpStream stream object.</td>
    </table></dd></dl>
    <dl><dt><b>API</b> Stability:</dt><dd>Stable.</dd></dl>
    <dl><dt>See Also:</dt><dd>
    <a href="#struct_esp" class="ref">Esp</a></dd></dl>
  </div>
</div>
<a name="group___esp_req_1gab4ece9543d64a835a54c225d2e5e49a3"></a>
<div class="api">
  <div class="prototype">
    void
    espUpdateCache
(<a href="http.html#group___http_stream" class="ref">HttpStream</a> *stream, <a href="osdep.html#group___osdep_1ga0f128c3e0c83721af0220c00554e9c4e" class="ref">cchar</a> *uri, <a href="osdep.html#group___osdep_1ga0f128c3e0c83721af0220c00554e9c4e" class="ref">cchar</a> *data, int lifesecs)
  </div>
  <div class="apiDetail">
<p>Update the cached content for a request.</p>
    <dl><dt><b>Description</b>:</dt><dd>Save the given content for future requests. This is useful if the caching mode has been set to &quot;manual&quot;.</dd></dl>
    <dl><dt>Parameters:</dt><dd>
    <table class="parameters" title="Parameters">
    <tr><td class="param">stream</td><td>HttpStream stream object.</td>
    <tr><td class="param">uri</td><td>Request URI to cache for.</td>
    <tr><td class="param">data</td><td>Data to cache.</td>
    <tr><td class="param">lifesecs</td><td>Time in seconds to cache the data.</td>
    </table></dd></dl>
    <dl><dt><b>API</b> Stability:</dt><dd>Stable.</dd></dl>
    <dl><dt>See Also:</dt><dd>
    <a href="#struct_esp" class="ref">Esp</a></dd></dl>
  </div>
</div>
<a name="group___esp_req_1ga30c12797ca0400feda759dbc26485b56"></a>
<div class="api">
  <div class="prototype">
    <a href="osdep.html#group___osdep_1gad5c9d4ba3dc37783a528b0925dc981a0" class="ref">bool</a>
    espUpdateRec
(<a href="http.html#group___http_stream" class="ref">HttpStream</a> *stream, <a href="edi.html#group___edi_rec" class="ref">EdiRec</a> *rec)
  </div>
  <div class="apiDetail">
<p>Write a record to the database.</p>
    <dl><dt><b>Description</b>:</dt><dd>The record will be saved to the database after running any field validations. If any field validations fail to pass, the record will not be written and error details can be retrieved via <a class="ref" href="#group___edi_1ga7515e433e2812cae0d0a68cf3af899dd" external="/Users/mob/dev/esp/doc/api/edi.dtags">ediGetRecErrors</a>. If the record is a new record and the &quot;id&quot; column is EDI_AUTO_INC, then the &quot;id&quot; will be assigned prior to saving the record.</dd></dl>
    <dl><dt>Parameters:</dt><dd>
    <table class="parameters" title="Parameters">
    <tr><td class="param">stream</td><td>HttpStream stream object.</td>
    <tr><td class="param">rec</td><td>Record to write to the database.</td>
    </table></dd></dl>
    <dl><dt>Returns:</dt><dd>&quot;true&quot; if the record can be successfully written.</dd></dl>
    <dl><dt><b>API</b> Stability:</dt><dd>Stable.</dd></dl>
    <dl><dt>See Also:</dt><dd>
    <a href="#struct_esp" class="ref">Esp</a></dd></dl>
  </div>
</div>
<a name="group___esp_req_1ga75a45ce2a706a3cdd453bde9a0b1b0da"></a>
<div class="api">
  <div class="prototype">
    <a href="osdep.html#group___osdep_1ga0f128c3e0c83721af0220c00554e9c4e" class="ref">cchar</a> *
    * espUri
(<a href="http.html#group___http_stream" class="ref">HttpStream</a> *stream, <a href="osdep.html#group___osdep_1ga0f128c3e0c83721af0220c00554e9c4e" class="ref">cchar</a> *target)
  </div>
  <div class="apiDetail">
<p>Create a URI.</p>
    <dl><dt><b>Description</b>:</dt><dd>Create a URI link by expansions tokens based on the current request and route state. The target parameter may contain partial or complete URI information. The missing parts are supplied using the current request and route tables. The resulting URI is a normalized, server-local URI (that begins with &quot;/&quot;). The URI will include any defined route prefix, but will not include scheme, host or port components.</dd></dl>
    <dl><dt>Parameters:</dt><dd>
    <table class="parameters" title="Parameters">
    <tr><td class="param">stream</td><td>HttpStream stream object.</td>
    <tr><td class="param">target</td><td>The URI target. The target parameter can be a URI string or JSON style set of options. The target will have any embedded &quot;{tokens}&quot; expanded by using token values from the request parameters. If the target has an absolute URI path, that path is used directly after tokenization. If the target begins with &quot;~&quot;, that character will be replaced with the route prefix. This is a very convenient way to create application top-level relative links. <br/><br/>
 If the target is a string that begins with &quot;{AT}&quot; it will be interpreted as a controller/action pair of the form &quot;{AT}controller/action&quot;. If the &quot;controller/&quot; portion is absent, the current controller is used. If the action component is missing, the &quot;list&quot; action is used. A bare &quot;{AT}&quot; refers to the &quot;list&quot; action of the current controller. <br/><br/>
 If the target starts with &quot;{&quot; it is interpreted as being a JSON style set of options that describe the link. If the target is a relative URI path, it is appended to the current request URI path. <br/><br/>
 If the target is a JSON style of options, it can specify the URI components: scheme, host, port, path, reference and query. If these component properties are supplied, these will be combined to create a URI. <br/><br/>
 If the target specifies either a controller/action or a JSON set of options, The URI will be created according to the route URI template. The template may be explicitly specified via a &quot;route&quot; target property. Otherwise, if an &quot;action&quot; property is specified, the route of the same name will be used. If these don&apos;t result in a usable route, the &quot;default&quot; route will be used. <br/><br/>
 These are the properties supported in a JSON style &quot;{ ... }&quot; target: <ul><li>scheme String URI scheme portion </li><li>host String URI host portion </li><li>port Number URI port number </li><li>path String URI path portion </li><li>reference String URI path reference. Does not include &quot;#&quot; </li><li>query String URI query parameters. Does not include &quot;?&quot; </li><li>controller String controller name if using a controller-based route. This can also be specified via the action option. </li><li>action String Action to invoke. This can be a URI string or a controller action of the form {AT}controller/action. </li><li>route String Route name to use for the URI template </li></ul></td>
    </table></dd></dl>
    <dl><dt>Returns:</dt><dd>A normalized, server-local Uri string.</dd></dl>
    <dl><dt><b>Example</b>:</dt><dd>EspUri(stream, &quot;http://example.com/index.html&quot;, 0); <br/>
 espUri(stream, &quot;/path/to/index.html&quot;, 0); <br/>
 espUri(stream, &quot;../images/splash.png&quot;, 0); <br/>
 espUri(stream, &quot;~/client/images/splash.png&quot;, 0); <br/>
 espUri(stream, &quot;${app}/client/images/splash.png&quot;, 0); <br/>
 espUri(stream, &quot;@controller/checkout&quot;, 0); <br/>
 espUri(stream, &quot;@controller/&quot;) <br/>
 espUri(stream, &quot;@init&quot;) <br/>
 espUri(stream, &quot;@&quot;) <br/>
 espUri(stream, &quot;{ action: &apos;@post/create&apos; }&quot;, 0); <br/>
 espUri(stream, &quot;{ action: &apos;checkout&apos; }&quot;, 0); <br/>
 espUri(stream, &quot;{ action: &apos;logout&apos;, controller: &apos;admin&apos; }&quot;, 0); <br/>
 espUri(stream, &quot;{ action: &apos;admin/logout&apos;&quot;, 0); <br/>
 espUri(stream, &quot;{ product: &apos;candy&apos;, quantity: &apos;10&apos;, template: &apos;/cart/${product}/${quantity}&apos; }&quot;, 0); <br/>
 espUri(stream, &quot;{ route: &apos;~/STAR/edit&apos;, action: &apos;checkout&apos;, id: &apos;99&apos; }&quot;, 0); <br/>
 espUri(stream, &quot;{ template: &apos;~/client/images/${theme}/background.jpg&apos;, theme: &apos;blue&apos; }&quot;, 0);.</dd></dl>
    <dl><dt><b>API</b> Stability:</dt><dd>Stable.</dd></dl>
    <dl><dt>See Also:</dt><dd>
    <a href="#struct_esp" class="ref">Esp</a></dd></dl>
  </div>
</div>
<h2>EspRoute</h2>
<a name="group___esp_route"></a>
<div class="api">
  <div class="prototype">EspRoute</div>
  <div class="apiDetail">
<p>EspRoute extended route configuration.</p>
    <dl><dt>See Also:</dt><dd>
    <a href="#struct_esp" class="ref">Esp</a></dd></dl>
    <dl><dt>Fields:</dt><dd>
    <table class="parameters" title="Parameters">
    <tr><td class="param"><a class="ref" href="#struct_mpr_hash" external="/Users/mob/dev/mpr/doc/api/mpr.dtags">MprHash</a> *</td><td><td>actions</td><td>
Table of actions.
</td>
    <tr><td class="param">uint</td><td><td>app</td><td>
Is an esp mvc application.
</td>
    <tr><td class="param">cchar *</td><td><td>appName</td><td>
App module name.
</td>
    <tr><td class="param">uint</td><td><td>combine</td><td>
Combine C source into a single file.
</td>
    <tr><td class="param">EspProc</td><td><td>commonController</td><td>
Common code for all controllers.
</td>
    <tr><td class="param">uint</td><td><td>compile</td><td>
Enable recompiling the application or esp page.
</td>
    <tr><td class="param">cchar *</td><td><td>compileCmd</td><td>
Compile command template.
</td>
    <tr><td class="param">uint</td><td><td>compileMode</td><td>
Compile the application debug or release mode.
</td>
    <tr><td class="param">cchar *</td><td><td>configFile</td><td>
Path to config file.
</td>
    <tr><td class="param">cchar *</td><td><td>currentSession</td><td>
Current login session when enforcing a single login.
</td>
    <tr><td class="param">Edi *</td><td><td>edi</td><td>
Default database for this route.
</td>
    <tr><td class="param">uint</td><td><td>encodeTypes</td><td>
Encode data types in JSON API request/response.
</td>
    <tr><td class="param"><a class="ref" href="#struct_mpr_hash" external="/Users/mob/dev/mpr/doc/api/mpr.dtags">MprHash</a> *</td><td><td>env</td><td>
Environment variables for route.
</td>
    <tr><td class="param">uint</td><td><td>keep</td><td>
Keep intermediate source code after compiling.
</td>
    <tr><td class="param">cchar *</td><td><td>linkCmd</td><td>
Link command template.
</td>
    <tr><td class="param">MprTime</td><td><td>loaded</td><td>
When configuration was last loaded.
</td>
    <tr><td class="param">HttpRoute *</td><td><td>route</td><td>
Back link to route.
</td>
    <tr><td class="param">cchar *</td><td><td>searchPath</td><td>
Search path to use when locating compiler/linker.
</td>
    <tr><td class="param">struct EspRoute *</td><td><td>top</td><td>
Top-level route for this application.
</td>
    <tr><td class="param">uint</td><td><td>update</td><td>
Enable dynamically updating the application.
</td>
    <tr><td class="param"><a class="ref" href="#struct_mpr_hash" external="/Users/mob/dev/mpr/doc/api/mpr.dtags">MprHash</a> *</td><td><td>views</td><td>
Table of views.
</td>
    <tr><td class="param">cchar *</td><td><td>winsdk</td><td>
Windows SDK.
</td>
    </table></dd></dl>
  </div>
</div>
<a name="group___esp_route_1gaf0597c922fe4a863f84e40f93d3d5ee4"></a>
<div class="api">
  <div class="prototype">
    void
    espAction
(<a href="http.html#group___http_route" class="ref">HttpRoute</a> *route, <a href="osdep.html#group___osdep_1ga0f128c3e0c83721af0220c00554e9c4e" class="ref">cchar</a> *targetKey, <a href="osdep.html#group___osdep_1ga0f128c3e0c83721af0220c00554e9c4e" class="ref">cchar</a> *abilities, <a href="#esp_8h_1a3be68c9acb3ee13fce7b42a600b1ffdd" class="ref">EspProc</a> actionProc)
  </div>
  <div class="apiDetail">
<p>Define an action.</p>
    <dl><dt><b>Description</b>:</dt><dd>Actions are C procedures that are invoked when specific URIs are routed to the controller/action pair. The action will require the specified abilities or roles.</dd></dl>
    <dl><dt>Parameters:</dt><dd>
    <table class="parameters" title="Parameters">
    <tr><td class="param">route</td><td>HttpRoute object.</td>
    <tr><td class="param">targetKey</td><td>Target key used to select the action in a HttpRoute target. This is typically a URI prefix.</td>
    <tr><td class="param">abilities</td><td>String Comma separated list of abilities or roles. If set to the empty string, no specific abilities are required but an authenticated user is required. Set to NULL if an authenticated user is not required.</td>
    <tr><td class="param">actionProc</td><td>EspProc callback procedure to invoke when the action is requested.</td>
    </table></dd></dl>
    <dl><dt><b>API</b> Stability:</dt><dd>Stable.</dd></dl>
    <dl><dt>See Also:</dt><dd>
    <a href="#struct_esp" class="ref">Esp</a></dd></dl>
  </div>
</div>
<a name="group___esp_route_1gaa6e0943224a139d93f465b7ff2060c36"></a>
<div class="api">
  <div class="prototype">
    void
    espAddHomeRoute
(<a href="http.html#group___http_route" class="ref">HttpRoute</a> *route)
  </div>
  <div class="apiDetail">
<p>Add a route for the home page.</p>
    <dl><dt><b>Description</b>:</dt><dd>This will add a home page to route ESP applications. This will add the following route: <table class='info'><tr><td>Name</td><td>Method</td><td>Pattern</td><td>Target </td></row><tr><td>home</td><td>GET,POST,PUT</td><td>^/$</td><td>index.esp </td></row></table></dd></dl>
    <dl><dt>Parameters:</dt><dd>
    <table class="parameters" title="Parameters">
    <tr><td class="param">route</td><td>Parent route from which to inherit configuration.</td>
    </table></dd></dl>
    <dl><dt><b>API</b> Stability:</dt><dd>Stable.</dd></dl>
    <dl><dt>See Also:</dt><dd>
    <a href="#struct_esp" class="ref">Esp</a></dd></dl>
  </div>
</div>
<a name="group___esp_route_1gab12f7c6108ac1d0a972fc837e9b9dec8"></a>
<div class="api">
  <div class="prototype">
    void
    espAddRouteSet
(<a href="http.html#group___http_route" class="ref">HttpRoute</a> *route, <a href="osdep.html#group___osdep_1ga0f128c3e0c83721af0220c00554e9c4e" class="ref">cchar</a> *set)
  </div>
  <div class="apiDetail">
<p>Add a route set.</p>
    <dl><dt><b>Description</b>:</dt><dd>This will add a set of routes. It will add a home route and optional routes depending on the route set. <table class='info'><tr><td>Name</td><td>Method</td><td>Pattern</td><td>Target </td></row><tr><td>home</td><td>GET,POST,PUT</td><td>^/$</td><td>index.esp </td></row></table></dd></dl>
    <dl><dt>Parameters:</dt><dd>
    <table class="parameters" title="Parameters">
    <tr><td class="param">route</td><td>Parent route from which to inherit configuration.</td>
    <tr><td class="param">set</td><td>Route set to select. Use &quot;vue-mvc&quot;, or &quot;html-mvc&quot;.</td>
    </table></dd></dl>
    <dl><dt><b>API</b> Stability:</dt><dd>Stable.</dd></dl>
    <dl><dt>See Also:</dt><dd>
    <a href="#struct_esp" class="ref">Esp</a></dd></dl>
  </div>
</div>
<a name="group___esp_route_1ga0d812aed0ff96f0ffa281860270e8910"></a>
<div class="api">
  <div class="prototype">
    int
    espBindProc
(<a href="http.html#group___http_route" class="ref">HttpRoute</a> *route, <a href="osdep.html#group___osdep_1ga0f128c3e0c83721af0220c00554e9c4e" class="ref">cchar</a> *pattern, void *actionProc)
  </div>
  <div class="apiDetail">
<p>Define an action for a URI pattern.</p>
    <dl><dt><b>Description</b>:</dt><dd>This creates a new route and binds the action function to a URI pattern.</dd></dl>
    <dl><dt>Parameters:</dt><dd>
    <table class="parameters" title="Parameters">
    <tr><td class="param">route</td><td>Parent route object from which to inherit settings when creating the new route.</td>
    <tr><td class="param">pattern</td><td>URI pattern to use to find the releavant route.</td>
    <tr><td class="param">actionProc</td><td>EspProc callback procedure to invoke when the action is requested.</td>
    </table></dd></dl>
    <dl><dt><b>API</b> Stability:</dt><dd>Stable.</dd></dl>
    <dl><dt>See Also:</dt><dd>
    <a href="#struct_esp" class="ref">Esp</a></dd></dl>
  </div>
</div>
<a name="group___esp_route_1gadca72b20c0416a6e834105ae329e8529"></a>
<div class="api">
  <div class="prototype">
    char *
    * espBuildScript
(<a href="http.html#group___http_route" class="ref">HttpRoute</a> *route, <a href="osdep.html#group___osdep_1ga0f128c3e0c83721af0220c00554e9c4e" class="ref">cchar</a> *page, <a href="osdep.html#group___osdep_1ga0f128c3e0c83721af0220c00554e9c4e" class="ref">cchar</a> *path, <a href="osdep.html#group___osdep_1ga0f128c3e0c83721af0220c00554e9c4e" class="ref">cchar</a> *cacheName, <a href="osdep.html#group___osdep_1ga0f128c3e0c83721af0220c00554e9c4e" class="ref">cchar</a> *layout, <a href="#struct_esp_state" class="ref">EspState</a> *state, char **err)
  </div>
  <div class="apiDetail">
<p>Convert an ESP web page into C code.</p>
    <dl><dt><b>Description</b>:</dt><dd>This parses an ESP web page into an equivalent C source view.</dd></dl>
    <dl><dt>Parameters:</dt><dd>
    <table class="parameters" title="Parameters">
    <tr><td class="param">route</td><td>HttpRoute object.</td>
    <tr><td class="param">page</td><td>ESP web page script.</td>
    <tr><td class="param">path</td><td>Pathname for the ESP web page. This is used to process include directives which are resolved relative to this path.</td>
    <tr><td class="param">cacheName</td><td>MD5 cache name. Not a full path.</td>
    <tr><td class="param">layout</td><td>Default layout page. Deprecated.</td>
    <tr><td class="param">state</td><td>Reserved. Must set to NULL.</td>
    <tr><td class="param">err</td><td>Output parameter to hold any relevant error message.</td>
    </table></dd></dl>
    <dl><dt>Returns:</dt><dd>Compiled script. Return NULL on errors.</dd></dl>
    <dl><dt><b>API</b> Stability:</dt><dd>Stable.</dd></dl>
    <dl><dt>See Also:</dt><dd>
    <a href="#struct_esp" class="ref">Esp</a></dd></dl>
  </div>
</div>
<a name="group___esp_route_1ga01d07d3db11f99c0d1b93b068ec56c67"></a>
<div class="api">
  <div class="prototype">
    int
    espCache
(<a href="http.html#group___http_route" class="ref">HttpRoute</a> *route, <a href="osdep.html#group___osdep_1ga0f128c3e0c83721af0220c00554e9c4e" class="ref">cchar</a> *uri, int lifesecs, int flags)
  </div>
  <div class="apiDetail">
<p>Add caching for response content.</p>
    <dl><dt><b>Description</b>:</dt><dd>This call configures caching for request responses. Caching may be used for any HTTP method, though typically it is most useful for state-less GET requests. Output data may be uniquely cached for requests with different request parameters (query, post and route parameters). <br/><br/>
When server-side caching is requested and manual-mode is not enabled, the request response will be automatically cached. Subsequent client requests will revalidate the cached content with the server. If the server-side cached content has not expired, a HTTP Not-Modified (304) response will be sent and the client will use its client-side cached content. This results in a very fast transaction with the client as no response data is sent. Server-side caching will cache both the response headers and content. <br/><br/>
If manual server-side caching is requested, the response will be automatically cached, but subsequent requests will require the handler to explicitly send cached content by calling <a class="ref" href="#group___http_cache_1ga289c2c5d43b653bdae351d0bdab951aa" external="/Users/mob/dev/http/doc/api/http.dtags">httpWriteCached</a>. <br/><br/>
If client-side caching is requested, a &quot;Cache-Control&quot; Http header will be sent to the client with the caching &quot;max-age&quot; set to the lifesecs argument value. This causes the client to serve client-cached content and to not contact the server at all until the max-age expires. Alternatively, you can use <a class="ref" href="#group___http_tx_1ga1d493091887d99538039678342383a71" external="/Users/mob/dev/http/doc/api/http.dtags">httpSetHeader</a> to explicitly set a &quot;Cache-Control header. For your reference, here are
some keywords that can be used in the Cache-Control Http header.
\n\n
    &quot;max-age&quot; Max time in seconds the resource is considered fresh.
    &quot;s-maxage&quot; Max time in seconds the resource is considered fresh from a shared cache.
    &quot;public&quot; marks authenticated responses as cacheable.
    &quot;private&quot; shared caches may not store the response.
    &quot;no-cache&quot; cache must re-submit request for validation before using cached copy.
    &quot;no-store&quot; response may not be stored in a cache.
    &quot;must-revalidate&quot; forces clients to revalidate the request with the server.
    &quot;proxy-revalidate&quot; similar to must-revalidate except only for proxy caches.
\n\n
Use client-side caching for static content that will rarely change or for content for which using &quot;reload&quot; in
the browser is an adequate solution to force a refresh. Use manual server-side caching for situations where you need to
explicitly control when and how cached data is returned to the client. For most other situations, use server-side
caching.
@param route HttpRoute object
@param uri URI to cache.
    If the URI is set to &quot;*&quot; all URIs for that action are uniquely cached. If the request has POST data,
    the URI may include such post data in a sorted query format. E.g. {uri: /buy?item=scarf&amp;quantity=1}.
@param lifesecs Lifespan of cache items in seconds. If not set to positive integer, the lifesecs will
    default to the route lifespan.
@param flags Cache control flags. Select ESP_CACHE_MANUAL to enable manual mode. In manual mode, cached content
    will not be automatically sent. Use #httpWriteCached in the request handler to write previously cached content.
    \n\n
    Select ESP_CACHE_CLIENT to enable client-side caching. In this mode a &quot;Cache-Control&quot; Http header will be
    sent to the client with the caching &quot;max-age". WARNING: the client will not send any request for this URI until the max-age timeout has expired. <br/><br/>
 Select HTTP_CACHE_RESET to first reset existing caching configuration for this route. <br/><br/>
 Select HTTP_CACHE_COMBINED, HTTP_CACHE_ONLY or HTTP_CACHE_UNIQUE to define the server-side caching mode. Only one of these three mode flags should be specified. <br/><br/>
 If the HTTP_CACHE_COMBINED flag is set, the request params (query, post data and route parameters) will be ignored and all request for a given URI path will cache to the same cache record. <br/><br/>
 Select HTTP_CACHE_UNIQUE to uniquely cache requests with different request parameters. The URIs specified in uris should not contain any request parameters. <br/><br/>
 Select HTTP_CACHE_ONLY to cache only the exact URI with parameters specified in uris. The parameters must be in sorted www-urlencoded format. For example: /example.esp?hobby=sailing&amp;name=john.</dd></dl>
    <dl><dt>Returns:</dt><dd>A count of the bytes actually written.</dd></dl>
    <dl><dt><b>API</b> Stability:</dt><dd>Stable.</dd></dl>
    <dl><dt>See Also:</dt><dd>
    <a href="#struct_esp" class="ref">Esp</a></dd></dl>
  </div>
</div>
<a name="group___esp_route_1gaa6f62a5bb430f502b6067cac74d948e4"></a>
<div class="api">
  <div class="prototype">
    <a href="osdep.html#group___osdep_1gad5c9d4ba3dc37783a528b0925dc981a0" class="ref">bool</a>
    espCompile
(<a href="http.html#group___http_route" class="ref">HttpRoute</a> *route, <a href="mpr.html#group___mpr_dispatcher" class="ref">MprDispatcher</a> *dispatcher, <a href="osdep.html#group___osdep_1ga0f128c3e0c83721af0220c00554e9c4e" class="ref">cchar</a> *source, <a href="osdep.html#group___osdep_1ga0f128c3e0c83721af0220c00554e9c4e" class="ref">cchar</a> *module, <a href="osdep.html#group___osdep_1ga0f128c3e0c83721af0220c00554e9c4e" class="ref">cchar</a> *cacheName, int isView, char **errMsg)
  </div>
  <div class="apiDetail">
<p>Compile an ESP page, controller or view.</p>
    <dl><dt><b>Description</b>:</dt><dd>This compiles ESP resources into loadable, cached modules.</dd></dl>
    <dl><dt>Parameters:</dt><dd>
    <table class="parameters" title="Parameters">
    <tr><td class="param">route</td><td>HttpRoute object.</td>
    <tr><td class="param">dispatcher</td><td>Optional dispatcher to use when waiting for the compilation command.</td>
    <tr><td class="param">source</td><td>ESP source file name.</td>
    <tr><td class="param">module</td><td>Output module file name.</td>
    <tr><td class="param">cacheName</td><td>MD5 cache name. Not a full path.</td>
    <tr><td class="param">isView</td><td>Set to &quot;true&quot; if the source is a view.</td>
    <tr><td class="param">errMsg</td><td>Reference to receive an error message if the routine fails.</td>
    </table></dd></dl>
    <dl><dt>Returns:</dt><dd>&quot;True&quot; if the compilation is successful. Errors are logged and sent back to the client if ShowErrors is true.</dd></dl>
    <dl><dt><b>API</b> Stability:</dt><dd>Stable.</dd></dl>
    <dl><dt>See Also:</dt><dd>
    <a href="#struct_esp" class="ref">Esp</a></dd></dl>
  </div>
</div>
<a name="group___esp_route_1ga8e9d301b4d8ea03e194be4339ec9d361"></a>
<div class="api">
  <div class="prototype">
    void
    espController
(<a href="http.html#group___http_route" class="ref">HttpRoute</a> *route, <a href="#esp_8h_1a3be68c9acb3ee13fce7b42a600b1ffdd" class="ref">EspProc</a> baseProc)
  </div>
  <div class="apiDetail">
<p>Define a common controller function to invoke before invoking for all controller actions.</p>
    <dl><dt><b>Description</b>:</dt><dd>A base controller function can be defined that will be called before calling any controller action. This emulates a super class constructor.</dd></dl>
    <dl><dt>Parameters:</dt><dd>
    <table class="parameters" title="Parameters">
    <tr><td class="param">route</td><td>HttpRoute object.</td>
    <tr><td class="param">baseProc</td><td>Function to call just prior to invoking a controller action.</td>
    </table></dd></dl>
    <dl><dt><b>API</b> Stability:</dt><dd>Stable.</dd></dl>
    <dl><dt>See Also:</dt><dd>
    <a href="#struct_esp" class="ref">Esp</a></dd></dl>
  </div>
</div>
<a name="group___esp_route_1ga619e3d85014d882f8330e47ee1f6ac24"></a>
<div class="api">
  <div class="prototype">
    void
    espDefineBase
(<a href="http.html#group___http_route" class="ref">HttpRoute</a> *route, <a href="#esp_8h_1adc749236ce9c01e8c3f43a4b779df700" class="ref">EspLegacyProc</a> baseProc)
  </div>
  <div class="apiDetail">
<p>Define a base controller function to invoke for all controller actions.</p>
    <dl><dt><b>Description</b>:</dt><dd>A base controller function can be defined that will be called before calling any controller action. This emulates a super class constructor.</dd></dl>
    <dl><dt>Parameters:</dt><dd>
    <table class="parameters" title="Parameters">
    <tr><td class="param">route</td><td>HttpRoute object.</td>
    <tr><td class="param">baseProc</td><td>Function to call just prior to invoking a controller action.</td>
    </table></dd></dl>
    <dl><dt><b>API</b> Stability:</dt><dd>Deprecated.</dd></dl>
    <dl><dt>See Also:</dt><dd>
    <a href="#struct_esp" class="ref">Esp</a></dd></dl>
  </div>
</div>
<a name="group___esp_route_1gab7ebccfe31eb1e07f3f40db700d18bd9"></a>
<div class="api">
  <div class="prototype">
    void
    espDefineView
(<a href="http.html#group___http_route" class="ref">HttpRoute</a> *route, <a href="osdep.html#group___osdep_1ga0f128c3e0c83721af0220c00554e9c4e" class="ref">cchar</a> *path, void *viewProc)
  </div>
  <div class="apiDetail">
<p>Define a view.</p>
    <dl><dt><b>Description</b>:</dt><dd>Views are ESP web pages that are executed to return presentation data back to the client.</dd></dl>
    <dl><dt>Parameters:</dt><dd>
    <table class="parameters" title="Parameters">
    <tr><td class="param">route</td><td>Http route object.</td>
    <tr><td class="param">path</td><td>Path to the ESP view source code.</td>
    <tr><td class="param">viewProc</td><td>EspViewPrococ callback procedure to invoke when the view is requested.</td>
    </table></dd></dl>
    <dl><dt><b>API</b> Stability:</dt><dd>Stable.</dd></dl>
    <dl><dt>See Also:</dt><dd>
    <a href="#struct_esp" class="ref">Esp</a></dd></dl>
  </div>
</div>
<a name="group___esp_route_1gac48430a671a2f13e5b6b1461e10584bd"></a>
<div class="api">
  <div class="prototype">
    char *
    * espExpandCommand
(<a href="http.html#group___http_route" class="ref">HttpRoute</a> *route, <a href="osdep.html#group___osdep_1ga0f128c3e0c83721af0220c00554e9c4e" class="ref">cchar</a> *command, <a href="osdep.html#group___osdep_1ga0f128c3e0c83721af0220c00554e9c4e" class="ref">cchar</a> *source, <a href="osdep.html#group___osdep_1ga0f128c3e0c83721af0220c00554e9c4e" class="ref">cchar</a> *module)
  </div>
  <div class="apiDetail">
<p>Expand a compile or link command template.</p>
    <dl><dt><b>Description</b>:</dt><dd>This expands a command template and replaces &quot;${tokens}&quot; with their equivalent value. The supported tokens are: <ul><li>ARCH - Build architecture (i386, x86_64) </li><li>CC - Compiler pathname </li><li>DEBUG - Compiler debug options (-g, -Zi, -Od) </li><li>INC - Include directory (out/inc) </li><li>LIB - Library directory (out/lib, out/bin) </li><li>LIBS - Required libraries directory (esp, mpr) </li><li>OBJ - Name of compiled source (out/lib/view-MD5.o) </li><li>OUT - Output module (view_MD5.dylib) </li><li>SHLIB - Shared library extension (.lib, .so) </li><li>SHOBJ - Shared object extension (.dll, .so) </li><li>SRC - Path to source code for view or controller (already templated) </li><li>TMP - System temporary directory </li><li>WINSDK - Path to the Windows SDK </li><li>VS - Path to Visual Studio </li></ul></dd></dl>
    <dl><dt>Parameters:</dt><dd>
    <table class="parameters" title="Parameters">
    <tr><td class="param">route</td><td>HttpRoute object.</td>
    <tr><td class="param">command</td><td>Command to run.</td>
    <tr><td class="param">source</td><td>ESP web page source pathname.</td>
    <tr><td class="param">module</td><td>Output module pathname.</td>
    </table></dd></dl>
    <dl><dt>Returns:</dt><dd>An expanded command line.</dd></dl>
    <dl><dt><b>API</b> Stability:</dt><dd>Stable.</dd></dl>
    <dl><dt>See Also:</dt><dd>
    <a href="#struct_esp" class="ref">Esp</a></dd></dl>
  </div>
</div>
<a name="group___esp_route_1ga744ec95e55de1ea6717c0b843a950636"></a>
<div class="api">
  <div class="prototype">
    <a href="osdep.html#group___osdep_1ga0f128c3e0c83721af0220c00554e9c4e" class="ref">cchar</a> *
    * espGetConfig
(<a href="http.html#group___http_route" class="ref">HttpRoute</a> *route, <a href="osdep.html#group___osdep_1ga0f128c3e0c83721af0220c00554e9c4e" class="ref">cchar</a> *key, <a href="osdep.html#group___osdep_1ga0f128c3e0c83721af0220c00554e9c4e" class="ref">cchar</a> *defaultValue)
  </div>
  <div class="apiDetail">
<p>Get a configuration value from the ESP pak.json.</p>
    <dl><dt>Parameters:</dt><dd>
    <table class="parameters" title="Parameters">
    <tr><td class="param">route</td><td>HttpRoute defining the ESP application.</td>
    <tr><td class="param">key</td><td>Configuration property path. May contain dots.</td>
    <tr><td class="param">defaultValue</td><td>Default value to use if the configuration is not defined. May be null.</td>
    </table></dd></dl>
    <dl><dt>Returns:</dt><dd>The Configuration string value.</dd></dl>
    <dl><dt><b>API</b> Stability:</dt><dd>Stable.</dd></dl>
    <dl><dt>See Also:</dt><dd>
    <a href="#struct_esp" class="ref">Esp</a></dd></dl>
  </div>
</div>
<a name="group___esp_route_1gaca1c2bea3bde8c348d3d70c35ef21667"></a>
<div class="api">
  <div class="prototype">
    int
    espInit
(<a href="http.html#group___http_route" class="ref">HttpRoute</a> *route, <a href="osdep.html#group___osdep_1ga0f128c3e0c83721af0220c00554e9c4e" class="ref">cchar</a> *prefix, <a href="osdep.html#group___osdep_1ga0f128c3e0c83721af0220c00554e9c4e" class="ref">cchar</a> *path)
  </div>
  <div class="apiDetail">
<p>Initialize ESP.</p>
    <dl><dt><b>Description</b>:</dt><dd>This initializes a route for ESP. This may be called multiple times for different routes.</dd></dl>
    <dl><dt>Parameters:</dt><dd>
    <table class="parameters" title="Parameters">
    <tr><td class="param">route</td><td>Parent route from which to inherit configuration.</td>
    <tr><td class="param">prefix</td><td>Optional URI prefix for all application URIs.</td>
    <tr><td class="param">path</td><td>Pathname to the esp.json file.</td>
    </table></dd></dl>
    <dl><dt>Returns:</dt><dd>Zero if successful, otherwise a negative MPR error code.</dd></dl>
    <dl><dt><b>API</b> Stability:</dt><dd>Stable.</dd></dl>
    <dl><dt>See Also:</dt><dd>
    <a href="#struct_esp" class="ref">Esp</a></dd></dl>
  </div>
</div>
<a name="group___esp_route_1ga619751fdfd2aa494d0074bd661e5e103"></a>
<div class="api">
  <div class="prototype">
    int
    espLoadCompilerRules
(<a href="http.html#group___http_route" class="ref">HttpRoute</a> *route)
  </div>
  <div class="apiDetail">
<p>Load the compiler rules from esp-compile.json.</p>
    <dl><dt>Parameters:</dt><dd>
    <table class="parameters" title="Parameters">
    <tr><td class="param">route</td><td>HttpRoute object.</td>
    </table></dd></dl>
    <dl><dt><b>API</b> Stability:</dt><dd>Stable.</dd></dl>
    <dl><dt>See Also:</dt><dd>
    <a href="#struct_esp" class="ref">Esp</a></dd></dl>
  </div>
</div>
<a name="group___esp_route_1ga8719b78bdfb4e3228c6e9be843f45140"></a>
<div class="api">
  <div class="prototype">
    int
    espLoadConfig
(<a href="http.html#group___http_route" class="ref">HttpRoute</a> *route)
  </div>
  <div class="apiDetail">
<p>Load configuration for an ESP application.</p>
    <dl><dt><b>Description</b>:</dt><dd>Load the application&apos;s esp.json and pak.json configuration files.</dd></dl>
    <dl><dt>Parameters:</dt><dd>
    <table class="parameters" title="Parameters">
    <tr><td class="param">route</td><td>Parent route from which to inherit configuration.</td>
    </table></dd></dl>
    <dl><dt>Returns:</dt><dd>Zero if successful, otherwise a negative MPR error code.</dd></dl>
    <dl><dt><b>API</b> Stability:</dt><dd>Stable.</dd></dl>
    <dl><dt>See Also:</dt><dd>
    <a href="#struct_esp" class="ref">Esp</a></dd></dl>
  </div>
</div>
<a name="group___esp_route_1ga7814b1fa47cbcc97d8bdd1d7141b3d4b"></a>
<div class="api">
  <div class="prototype">
    <a href="#group___esp_route" class="ref">EspRoute</a> *
    * espRoute
(<a href="http.html#group___http_route" class="ref">HttpRoute</a> *route, <a href="osdep.html#group___osdep_1gad5c9d4ba3dc37783a528b0925dc981a0" class="ref">bool</a> create)
  </div>
  <div class="apiDetail">
<p>Return the corresponding EspRoute for the given Route.</p>
    <dl><dt><b>Description</b>:</dt><dd>Returns the defined EspRoute for the given Route. Creates a new EspRoute if required.</dd></dl>
    <dl><dt>Parameters:</dt><dd>
    <table class="parameters" title="Parameters">
    <tr><td class="param">route</td><td>Parent route from which to inherit configuration.</td>
    <tr><td class="param">create</td><td>Set to true to create an EspRoute if a suitable one cannot be found.</td>
    </table></dd></dl>
    <dl><dt>Returns:</dt><dd>The EspRoute object.</dd></dl>
    <dl><dt><b>API</b> Stability:</dt><dd>Stable.</dd></dl>
    <dl><dt>See Also:</dt><dd>
    <a href="#struct_esp" class="ref">Esp</a></dd></dl>
  </div>
</div>
<a name="group___esp_route_1gada3b399d10e3f1eaee004cde256e379f"></a>
<div class="api">
  <div class="prototype">
    int
    espSetConfig
(<a href="http.html#group___http_route" class="ref">HttpRoute</a> *route, <a href="osdep.html#group___osdep_1ga0f128c3e0c83721af0220c00554e9c4e" class="ref">cchar</a> *key, <a href="osdep.html#group___osdep_1ga0f128c3e0c83721af0220c00554e9c4e" class="ref">cchar</a> *value)
  </div>
  <div class="apiDetail">
<p>Set a configuration value to the ESP pak.json.</p>
    <dl><dt><b>Description</b>:</dt><dd>This updates the in-memory copy of the pak.json only.</dd></dl>
    <dl><dt>Parameters:</dt><dd>
    <table class="parameters" title="Parameters">
    <tr><td class="param">route</td><td>HttpRoute defining the ESP application.</td>
    <tr><td class="param">key</td><td>Configuration property path. May contain dots.</td>
    <tr><td class="param">value</td><td>Value to set the property to.</td>
    </table></dd></dl>
    <dl><dt>Returns:</dt><dd>Zero if successful, otherwise a negative MPR error code.</dd></dl>
    <dl><dt><b>API</b> Stability:</dt><dd>Stable.</dd></dl>
    <dl><dt>See Also:</dt><dd>
    <a href="#struct_esp" class="ref">Esp</a></dd></dl>
  </div>
</div>
<a name="group___esp_route_1ga115c8f838daf7b187cb8a07787734f37"></a>
<div class="api">
  <div class="prototype">
    <a href="osdep.html#group___osdep_1gad5c9d4ba3dc37783a528b0925dc981a0" class="ref">bool</a>
    espTestConfig
(<a href="http.html#group___http_route" class="ref">HttpRoute</a> *route, <a href="osdep.html#group___osdep_1ga0f128c3e0c83721af0220c00554e9c4e" class="ref">cchar</a> *key, <a href="osdep.html#group___osdep_1ga0f128c3e0c83721af0220c00554e9c4e" class="ref">cchar</a> *desired)
  </div>
  <div class="apiDetail">
<p>Test if a configuration property from the ESP pak.json has a desired value.</p>
    <dl><dt>Parameters:</dt><dd>
    <table class="parameters" title="Parameters">
    <tr><td class="param">route</td><td>HttpRoute defining the ESP application.</td>
    <tr><td class="param">key</td><td>Configuration property path. May contain dots.</td>
    <tr><td class="param">desired</td><td>Desired value to compare with.</td>
    </table></dd></dl>
    <dl><dt>Returns:</dt><dd>True if the configuration property has the desired value.</dd></dl>
    <dl><dt><b>API</b> Stability:</dt><dd>Stable.</dd></dl>
    <dl><dt>See Also:</dt><dd>
    <a href="#struct_esp" class="ref">Esp</a></dd></dl>
  </div>
</div>
<h2>Functions</h2>
<a name="esp_8h_1ac8b1fec7b34093c10064dd4d16622fc2"></a>
<div class="api">
  <div class="prototype">
    <a href="#group___esp_route" class="ref">EspRoute</a> *
    * espCreateRoute
(<a href="http.html#group___http_route" class="ref">HttpRoute</a> *route)
  </div>
  <div class="apiDetail">
<p>Create an EspRoute object.</p>
    <dl><dt>Parameters:</dt><dd>
    <table class="parameters" title="Parameters">
    <tr><td class="param">route</td><td>HttpRoute to associate with.</td>
    </table></dd></dl>
    <dl><dt>Returns:</dt><dd>EspRoute object.</dd></dl>
  </div>
</div>
<a name="esp_8h_1a0fafa076a86bf29ec11d07515817da3c"></a>
<div class="api">
  <div class="prototype">
    int
    espEmail
(<a href="http.html#group___http_stream" class="ref">HttpStream</a> *stream, <a href="osdep.html#group___osdep_1ga0f128c3e0c83721af0220c00554e9c4e" class="ref">cchar</a> *to, <a href="osdep.html#group___osdep_1ga0f128c3e0c83721af0220c00554e9c4e" class="ref">cchar</a> *from, <a href="osdep.html#group___osdep_1ga0f128c3e0c83721af0220c00554e9c4e" class="ref">cchar</a> *subject, <a href="mpr.html#group___mpr_time" class="ref">MprTime</a> date, <a href="osdep.html#group___osdep_1ga0f128c3e0c83721af0220c00554e9c4e" class="ref">cchar</a> *mime, <a href="osdep.html#group___osdep_1ga0f128c3e0c83721af0220c00554e9c4e" class="ref">cchar</a> *message, <a href="mpr.html#group___mpr_list" class="ref">MprList</a> *files)
  </div>
  <div class="apiDetail">
<p>Send mail using sendmail.</p>
    <dl><dt>Parameters:</dt><dd>
    <table class="parameters" title="Parameters">
    <tr><td class="param">stream</td><td>HttpStream stream object.</td>
    <tr><td class="param">to</td><td>Message recipient.</td>
    <tr><td class="param">from</td><td>Message sender.</td>
    <tr><td class="param">subject</td><td>Message subject.</td>
    <tr><td class="param">date</td><td>Message creation date. Set to null to use the current date/time.</td>
    <tr><td class="param">mime</td><td>Message mime type. Set to null for text/plain.</td>
    <tr><td class="param">message</td><td>Message body.</td>
    <tr><td class="param">files</td><td>MprList of files to send with the message.</td>
    </table></dd></dl>
    <dl><dt>Returns:</dt><dd>Zero if the email is successfully sent.</dd></dl>
    <dl><dt><b>API</b> Stability:</dt><dd>Stable.</dd></dl>
  </div>
</div>
<a name="esp_8h_1a56eafbf70fb0509e85aa5070becbaca6"></a>
<div class="api">
  <div class="prototype">
    void
    espInitHtmlOptions
(<a href="#struct_esp" class="ref">Esp</a> *esp)
  </div>
  <div class="apiDetail">
<p>Add HTLM internal options to the Esp.options hash.</p>
  </div>
</div>
<a name="esp_8h_1a240f55c3789229bd59ec4c2c4b5c1557"></a>
<div class="api">
  <div class="prototype">
    int
    espInitParser
(void )
  </div>
  <div class="apiDetail">
<p>Initialize the ESP configuration file parser.</p>
  </div>
</div>
<a name="esp_8h_1a2f63950b45dd427b2bdfa7ae1c8f85c0"></a>
<div class="api">
  <div class="prototype">
    int
    espOpen
(<a href="mpr.html#group___mpr_module" class="ref">MprModule</a> *module)
  </div>
  <div class="apiDetail">
<p>ESP initialization entry point.</p>
    <dl><dt>Parameters:</dt><dd>
    <table class="parameters" title="Parameters">
    <tr><td class="param">module</td><td>Module object if loaded as an MPR module.</td>
    </table></dd></dl>
    <dl><dt>Returns:</dt><dd>Zero if successful, otherwise a negative MPR error code.</dd></dl>
    <dl><dt><b>API</b> Stability:</dt><dd>Stable.</dd></dl>
  </div>
</div>
<a name="esp_8h_1acd50895af625f24f565c21f27a934405"></a>
<div class="api">
  <div class="prototype">
    <a href="osdep.html#group___osdep_1ga7d08ccc1e981eb4d5a238641ac4ccfc1" class="ref">ssize</a>
    espRenderFeedback
(<a href="http.html#group___http_stream" class="ref">HttpStream</a> *stream, <a href="osdep.html#group___osdep_1ga0f128c3e0c83721af0220c00554e9c4e" class="ref">cchar</a> *types)
  </div>
  <div class="apiDetail">
<p>Render feedback messages.</p>
    <dl><dt><b>Description</b>:</dt><dd>Feedback messages for one-time messages that are sent to the client. For HTML clients, feedback messages use the session state store and persist for only one request. For smart/thick clients, feedback messages are sent as JSON responses via the espSendFeedback API. See <a class="ref" href="#group___esp_req_1ga771dab7992d00940e83a27d47c4fbeec">espSetFeedback</a> for how to define feedback messages.</dd></dl>
    <dl><dt>Parameters:</dt><dd>
    <table class="parameters" title="Parameters">
    <tr><td class="param">stream</td><td>Http stream object.</td>
    <tr><td class="param">types</td><td>Types of feedback message to retrieve. Set to &quot;*&quot; to retrieve all types of feedback. This may be set to any word, but the following feedback types are typically supported as per RFC 5424: &quot;debug&quot;, &quot;info&quot;, &quot;notice&quot;, &quot;warn&quot;, &quot;error&quot;, &quot;critical&quot;.</td>
    </table></dd></dl>
    <dl><dt>Returns:</dt><dd>Number of bytes written.</dd></dl>
    <dl><dt><b>API</b> Stability:</dt><dd>Deprecated.</dd></dl>
  </div>
</div>
<a name="esp_8h_1a3534a4b4994b1de062c75ebb121b59fe"></a>
<div class="api">
  <div class="prototype">
    void
    espSetData
(<a href="http.html#group___http_stream" class="ref">HttpStream</a> *stream, void *data)
  </div>
  <div class="apiDetail">
<p>Set a private data reference for the current request.</p>
    <dl><dt>Parameters:</dt><dd>
    <table class="parameters" title="Parameters">
    <tr><td class="param">stream</td><td>HttpStream object.</td>
    <tr><td class="param">data</td><td>Data object to associate with the current request. This must be a managed reference.</td>
    </table></dd></dl>
    <dl><dt>Returns:</dt><dd>Reference to private data.</dd></dl>
    <dl><dt><b>API</b> Stability:</dt><dd>Stable.</dd></dl>
  </div>
</div>
<a name="esp_8h_1a2b6ab1f6cf9333533ece4ed0f871e0a6"></a>
<div class="api">
  <div class="prototype">
    int
    espStaticInitialize
(<a href="#group___esp_route_1ga39099f433a25379dcf1ff0381e78b8d3" class="ref">EspModuleEntry</a> entry, <a href="osdep.html#group___osdep_1ga0f128c3e0c83721af0220c00554e9c4e" class="ref">cchar</a> *appName, <a href="osdep.html#group___osdep_1ga0f128c3e0c83721af0220c00554e9c4e" class="ref">cchar</a> *routeName)
  </div>
  <div class="apiDetail">
<p>Initialize a static library ESP module.</p>
    <dl><dt><b>Description</b>:</dt><dd>This invokes the ESP initializers for the required pre-compiled ESP shared library.</dd></dl>
    <dl><dt>Parameters:</dt><dd>
    <table class="parameters" title="Parameters">
    <tr><td class="param">entry</td><td>ESP initialization function.</td>
    <tr><td class="param">appName</td><td>Name of the ESP application.</td>
    <tr><td class="param">routeName</td><td>Name of the route in the appweb.conf file for this ESP application or page.</td>
    </table></dd></dl>
    <dl><dt>Returns:</dt><dd>Zero if successful, otherwise a negative MPR error code.</dd></dl>
    <dl><dt><b>API</b> Stability:</dt><dd>Stable.</dd></dl>
  </div>
</div>
<h2>Typedefs</h2>
<a name="esp_8h_1adc749236ce9c01e8c3f43a4b779df700"></a>
<div class="api">
  <div class="prototype">
    typedef void(* EspLegacyProc) (HttpStream *stream).
  </div>
  <div class="apiDetail">
<p>Procedure callback.</p>
    <dl><dt><b>API</b> Stability:</dt><dd>Stable.</dd></dl>
  </div>
</div>
<a name="group___esp_req_1gaade394637a4d5f682c1edcc287023658"></a>
<div class="api">
  <div class="prototype">
    typedef void(* EspViewProc) (HttpStream *stream).
  </div>
  <div class="apiDetail">
<p>View procedure callback.</p>
    <dl><dt>Parameters:</dt><dd>
    <table class="parameters" title="Parameters">
    <tr><td class="param">stream</td><td>Http stream object.</td>
    </table></dd></dl>
    <dl><dt><b>API</b> Stability:</dt><dd>Stable.</dd></dl>
    <dl><dt>See Also:</dt><dd>
    <a href="#struct_esp" class="ref">Esp</a></dd></dl>
  </div>
</div>
<a name="group___esp_route_1ga39099f433a25379dcf1ff0381e78b8d3"></a>
<div class="api">
  <div class="prototype">
    typedef int(* EspModuleEntry) (struct HttpRoute *route, MprModule *module).
  </div>
  <div class="apiDetail">
<p>Entry point for a loadable ESP module.</p>
    <dl><dt>Parameters:</dt><dd>
    <table class="parameters" title="Parameters">
    <tr><td class="param">route</td><td>HttpRoute object.</td>
    <tr><td class="param">module</td><td>Mpr module object.</td>
    </table></dd></dl>
    <dl><dt>Returns:</dt><dd>Zero if successful, otherwise a negative MPR error code.</dd></dl>
    <dl><dt><b>API</b> Stability:</dt><dd>Stable.</dd></dl>
    <dl><dt>See Also:</dt><dd>
    <a href="#struct_esp" class="ref">Esp</a></dd></dl>
  </div>
</div>
<a name="struct_esp"></a>
<div class="api">
  <div class="prototype">Esp</div>
  <div class="apiDetail">
<p>Top level ESP structure.</p>
    <dl><dt>Fields:</dt><dd>
    <table class="parameters" title="Parameters">
    <tr><td class="param">int</td><td><td>compileMode</td><td>
Force a debug compile.
</td>
    <tr><td class="param"><a class="ref" href="#struct_mpr_hash" external="/Users/mob/dev/mpr/doc/api/mpr.dtags">MprHash</a> *</td><td><td>databases</td><td>
Cloned databases.
</td>
    <tr><td class="param">MprEvent *</td><td><td>databasesTimer</td><td>
Database prune timer.
</td>
    <tr><td class="param">EdiService *</td><td><td>ediService</td><td>
Database service.
</td>
    <tr><td class="param">cchar *</td><td><td>hostedDocuments</td><td>
Documents directory if hosted.
</td>
    <tr><td class="param"><a class="ref" href="#struct_mpr_hash" external="/Users/mob/dev/mpr/doc/api/mpr.dtags">MprHash</a> *</td><td><td>internalOptions</td><td>
Table of internal HTML control options <br/>
</td>
    <tr><td class="param">int</td><td><td>inUse</td><td>
Active ESP request counter.
</td>
    <tr><td class="param"><a class="ref" href="#struct_mpr_thread_local" external="/Users/mob/dev/mpr/doc/api/mpr.dtags">MprThreadLocal</a> *</td><td><td>local</td><td>
Thread local data.
</td>
    <tr><td class="param"><a class="ref" href="#struct_mpr_mutex" external="/Users/mob/dev/mpr/doc/api/mpr.dtags">MprMutex</a> *</td><td><td>mutex</td><td>
Multithread lock.
</td>
    <tr><td class="param">int</td><td><td>reloading</td><td>
Reloading ESP and modules.
</td>
    <tr><td class="param"><a class="ref" href="#struct_mpr_hash" external="/Users/mob/dev/mpr/doc/api/mpr.dtags">MprHash</a> *</td><td><td>vstudioEnv</td><td>
Visual Studio environment.
</td>
    </table></dd></dl>
  </div>
</div>
<a name="struct_esp_action"></a>
<div class="api">
  <div class="prototype">EspAction</div>
  <div class="apiDetail">
<p>Action definition.</p>
    <dl><dt><b>API</b> Stability:</dt><dd>Stable.</dd></dl>
    <dl><dt>Fields:</dt><dd>
    <table class="parameters" title="Parameters">
    <tr><td class="param">cchar *</td><td><td>abilities</td><td>
Abilities or roles for action. 
Comma separated.
</td>
    <tr><td class="param">EspProc</td><td><td>callback</td><td>
Callback action.
</td>
    <tr><td class="param">cchar *</td><td><td>target</td><td>
Route target string.
</td>
    </table></dd></dl>
  </div>
</div>
